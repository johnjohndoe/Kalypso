<?xml version="1.0" encoding="UTF-8"?>
<!-- edited with XMLSPY v5 rel. 4 U (http://www.xmlspy.com) by Andersen (no) -->
<schema targetNamespace="http://www.tuhh.de/kalypsoNA" version="0.9" 
	xmlns:na="http://www.tuhh.de/kalypsoNA" 
	xmlns:xlink="http://www.w3.org/1999/xlink" 
	xmlns:gml="http://www.opengis.net/gml" 
	xmlns="http://www.w3.org/2001/XMLSchema" 
	xmlns:obslink="obslink.zml.kalypso.org" elementFormDefault="qualified">
	<import namespace="http://www.opengis.net/gml" 
		schemaLocation="feature.xsd"/>
	<import namespace="obslink.zml.kalypso.org" 
		schemaLocation="obslink.xsd"/>
	<!--<import namespace="http://www.opengis.net/gml" schemaLocation="http://schemas.opengis.net/gml/2.1.2/feature.xsd"/>
	-->
	
	
	<element name="NaModell" type="na:NaModellType"/>
	<complexType name="NaModellType">
		<complexContent>
			<extension base="gml:AbstractFeatureType">
				<sequence>
					<element name="CatchmentCollectionMember" 
						type="na:CatchmentCollectionAssociationType"/>
					<element name="ChannelCollectionMember" 
						type="na:ChannelCollectionAssociationType"/>
					<element name="NodeCollectionMember" 
						type="na:NodeCollectionAssociationType"/>
				</sequence>
			</extension>
		</complexContent>
	</complexType>
	<!-- __ Nodes _________________________________ -->
	<complexType name="NodeCollectionAssociationType">
		<complexContent>
			<restriction base="gml:FeatureAssociationType">
				<sequence>
					<element ref="na:NodeCollection"/>
				</sequence>
			</restriction>
		</complexContent>
	</complexType>
	<element name="NodeCollection" type="na:NodeCollectionType" 
		substitutionGroup="gml:_Feature"/>
	<complexType name="NodeCollectionType">
		<complexContent>
			<restriction base="gml:AbstractFeatureCollectionType">
				<sequence>
					<element name="nodeMember" type="na:NodeAssociationType" 
						minOccurs="0" maxOccurs="unbounded"/>
				</sequence>
			</restriction>
		</complexContent>
	</complexType>
	<complexType name="NodeAssociationType">
		<complexContent>
			<restriction base="gml:FeatureAssociationType">
				<sequence>
					<element ref="na:Node"/>
				</sequence>
			</restriction>
		</complexContent>
	</complexType>
	<element name="Node" type="na:NodeFeatureType" 
		substitutionGroup="gml:_Feature"/>
	<complexType name="NodeFeatureType">
		<complexContent>
			<extension base="gml:AbstractFeatureType">
				<sequence>
                    <element name="Ort" type="gml:PointPropertyType"/>            
        			<element name="num" type="integer"></element>
					<element name="generateResult" type="boolean"/>
        			<element name="downStreamChannelMember" type="na:ChannelAssociationType" minOccurs="0" maxOccurs="1"/>
					<!-- ZR Zufluss falls zufluss vorhanden --> 
		            <element name="zuflussZRRepository" type="obslink:TimeseriesLink"/>
		            <element name="zuflussZR" type="obslink:TimeseriesLink"/>
          			<element name="nzufPfad" type="string"/> <!-- TODO loeschen -->
        			<!-- ZR Pegel falls Pegel vorhanden-->
		            <element name="pegelZRRepository" type="obslink:TimeseriesLink"/>
		            <element name="pegelZR" type="obslink:TimeseriesLink"/>
					<!-- ZR berechnet hier wird das ergebnis gespeichert-->
		            <element name="qberechnetZR" type="obslink:TimeseriesLink"/>
                    <!-- verzweigung -->
					<element name="zproz" type="double"/>
					<element name="verzweigungNodeMember" type="na:NodeAssociationType"/>
				</sequence>
			</extension>
		</complexContent>
	</complexType>
	

	<!-- ___________________________________ -->
	<complexType name="CatchmentCollectionAssociationType">
		<complexContent>
			<restriction base="gml:FeatureAssociationType">
				<sequence>
					<element ref="na:CatchmentCollection"/>
				</sequence>
			</restriction>
		</complexContent>
	</complexType>
	<element name="CatchmentCollection" type="na:CatchmentCollectionType" 
		substitutionGroup="gml:_Feature"/>
	<complexType name="CatchmentAssociationType">
		<complexContent>
			<restriction base="gml:FeatureAssociationType">
				<sequence>
					<element ref="na:Catchment"/>
				</sequence>
			</restriction>
		</complexContent>
	</complexType>
	<complexType name="CatchmentCollectionType">
		<complexContent>
			<restriction base="gml:AbstractFeatureCollectionType">
				<sequence>
					<element name="catchmentMember" 
						type="na:CatchmentAssociationType" minOccurs="0" 
						maxOccurs="unbounded"/>
				</sequence>
			</restriction>
		</complexContent>
	</complexType>
	<element name="Catchment" type="na:CatchmentFeatureType" 
		substitutionGroup="gml:_Feature"/>
	<complexType name="CatchmentFeatureType">
		<complexContent>
			<extension base="gml:AbstractFeatureType">
                <sequence>
                    <!--
    ___________(inum,i5)____(ispk,i3)
(text,a80)
(flaech,*)
(pns,a1)_(kurzzeit,a)_(namfn,a)_(langzeit,a)_(faktn,f5.2)
(namft,a)_(namept,a)
(namfzf,a)
(namhydro,a)
(snowtype,a15)(ftem,*)_(fver,*)
    -->
                    <element name="Ort" type="gml:PolygonPropertyType"/>
                    <element name="inum" type="integer"/>
                    <element name="generateResult" type="boolean"/>
                    <element name="ispk" type="integer"/>
                    <element name="text" type="string"/> <!-- TODO benoetigt ? -->
                    <element name="flaech" type="long"/>
                    <element name="pns" type="string"/> <!-- TODO loeschen, standardwert rausschreiben -->
                    <element name="kurzzeit" type="string"/> <!-- TODO loeschen, da jetzt Teilgebietsmodell -->
                    <element name="langzeit" type="string"/> <!-- TODO loeschen, da jetzt Teilgebietsmodell -->               
                    <element name="namfn" type="string"/> <!-- TODO loeschen, da standard-name -->
                    <element name="faktn" type="double"/>
                    <element name="namft" type="string"/> <!-- TODO loeschen, da standard-name -->
                    <element name="namept" type="string"/> <!-- TODO loeschen, da standard-name -->
                    <element name="namfzf" type="string"/> <!-- TODO zeitflaechenfunktion lesen -->
                    <element name="namhydro" type="string"/> <!-- TODO hydrotope uebernehmen -->
                    <element name="snowtype" type="string"/> <!-- TODO standard oder snowdatei uebernehmen -->
                    <element name="ftem" type="double"/> 
                    <element name="fver" type="double"/>
                    <!--
(vsg,f5.3)(anzlayy,i5)_____(bimax,f5.1)_____(bianf,f5.1)(izkn_vers,f5.1)_____(tint,f5.1)_____(rintmx,f5.1)
-->
                    <element name="vsg" type="double"/>
                    <element name="anzlayy" type="integer"/> <!-- TODO loeschen sollte aus listtenanzahl hervorgehen-->
                    <element name="bimax" type="double"/>
                    <element name="bianf" type="double"/>
                    <element name="faktorBianf" type="double"/> <!-- TODO loeschen, bianf ist schon der faktor -->                     
                    <element name="izkn_vers" type="integer"/> <!-- TODO loeschen, geht aus relation hervor -->
                    <element name="tint" type="double"/> 
                    <element name="rintmx" type="double"/>
                    <!-- 
 (cinh,*)_(cind,*)_(cex,*)_(bmax,*)_(banf,*)_(fko,*)_(retlay,*)_(evalay,*)
siehe bodenkorrekturmember...
-->
                    <element name="bodenkorrekturmember" type="na:bodenschichtkorrekturAssociationType" maxOccurs="10"/>
                    <!--
(f_eva,f4.1)_(aint,f4.1)_(aigw,f6.2)_(fint,f4.2)_(ftra,f4.2)
(retvs,*)_(retob,*)_(retint,*)_(retbas,*)_(retgw,*)_(retklu,*)
(igwzu,*)
-->
                    <element name="f_eva" type="double"/>
                    <element name="aint" type="double"/>
                    <element name="aigw" type="double"/>
                    <element name="faktorAigw" type="double"/>
                    <element name="fint" type="double"/>
                    <element name="ftra" type="double"/>
                    <element name="retvs" type="double"/>
                    <element name="retob" type="double"/>
                    <element name="retint" type="double"/>
                    <element name="faktorRetobRetint" type="double"/>                
                    <element name="retbas" type="double"/>
                    <element name="retgw" type="double"/>
                    <element name="retklu" type="double"/>
                    <element name="igwzu" type="integer"/> <!-- TODO loeschen, sollte aus listenanzahl hervorgehen -->
                    <!--
 (ngwzu,*)_...
 (gwwi,*)_...
-->
                    
                    <element name="grundwasserabflussMember" type="na:grundwasserabflussAssociationType" maxOccurs="6"/>
                    <element name="entwaesserungsStrangMember" type="na:ChannelAssociationType" minOccurs="0" maxOccurs="1"/>
                    <!--	<element name="ngwzu" type="string"/>
					<element name="gwwi" type="string"/>
					-->
                    <!--
(hgru,*)(hgro,*)(rtr,*)(pors,*)(gwsent,*)(klupor,*)(izkn,*)

-->
                    <element name="hgru" type="double"/>
                    <element name="hgro" type="double"/>
                    <element name="rtr" type="double"/>
                    <element name="pors" type="double"/>
                    <element name="gwsent" type="double"/>
                    <element name="klupor" type="double"/>
                    <element name="izkn" type="integer"/> <!-- TODO loeschen, sollte aus relation hervorgehen -->
    
					<!-- ZR niederschlag -->
   					<element name="niederschlagZRRepository" type="obslink:TimeseriesLink"/>
   					<element name="niederschlagZR" type="obslink:TimeseriesLink"/>                                        

                </sequence>
			</extension>
		</complexContent>
	</complexType>
	<!-- ______________channels_____________________ -->
	<complexType name="ChannelCollectionAssociationType">
		<complexContent>
			<restriction base="gml:FeatureAssociationType">
				<sequence>
					<element ref="na:ChannelCollection"/>
				</sequence>
			</restriction>
		</complexContent>
	</complexType>
	
	<element name="ChannelCollection" 
		type="na:ChannelCollectionType" 
		substitutionGroup="gml:_Feature"/>
		
	<complexType name="ChannelCollectionType">
		<complexContent>
			<restriction base="gml:AbstractFeatureCollectionType">
				<sequence>
					<element name="channelMember" 
						type="na:ChannelAssociationType" minOccurs="0" 
						maxOccurs="unbounded"/>
				</sequence>
			</restriction>
		</complexContent>
	</complexType>
	
		<complexType name="ChannelAssociationType">
		<complexContent>
			<restriction base="gml:FeatureAssociationType">
				<sequence>
					<element ref="na:_Channel"/>					
				</sequence>				
			</restriction>			
		</complexContent>		
	</complexType>

	
	<element name="_Channel" abstract="true" type="na:AbstractChannelType" substitutionGroup="gml:_Feature"/>
<!-- Channel super type -->
		<complexType name="AbstractChannelType">
			<complexContent>
				<extension base="gml:AbstractFeatureType">
					<sequence>
         				<element name="Ort" type="gml:LineStringPropertyType"/>            
            			<element name="inum" type="integer"/>
                		<element name="downStreamNodeMember" type="na:NodeAssociationType" minOccurs="0" maxOccurs="1"/>		
        			</sequence>		
				</extension>
			</complexContent>
		</complexType>


<!-- Virtual Channel -->	
	<element name="VirtualChannel" type="na:VirtualChannelFeatureType" 
		substitutionGroup="na:_Channel"/>
	<complexType name="VirtualChannelFeatureType">
		<complexContent>
			<extension base="na:AbstractChannelType">
				<sequence>
					<!-- virtueller channel hat sonst keine properties -->
					<!--<element name="kjh" type="string"/>-->
				</sequence>
			</extension>
		</complexContent>
	</complexType>

<!-- KM-Channel -->	
	<element name="KMChannel" type="na:KMChannelFeatureType" 
		substitutionGroup="na:_Channel"/>
	<complexType name="KMChannelFeatureType">
		<complexContent>
			<extension base="na:AbstractChannelType">
				<sequence>
					<element name="qfmax" type="double"/>
					<element name="c" type="double"/>
					<element name="faktorRkf" type="double"/>
					<element name="faktorRnf" type="double"/>
					<element name="KMParameterMember" 
						type="na:KMParameterAssociationType" minOccurs="5" 
						maxOccurs="5"/>
				</sequence>
			</extension>
		</complexContent>
	</complexType>
	<complexType name="KMParameterAssociationType">
		<complexContent>
			<restriction base="gml:FeatureAssociationType">
				<sequence>
					<element ref="na:KMParameter"/>
				</sequence>
			</restriction>
		</complexContent>
	</complexType>
	<element name="KMParameter" type="na:KMParameterType"/>
	<complexType name="KMParameterType">
		<complexContent>
			<extension base="na:NonGeometricAbstractFeatureType">
				<sequence>
					<element name="qrk" type="double"/>
					<element name="rkf" type="double"/>
					<element name="rnf" type="double"/>
					<element name="rkv" type="double"/>
					<element name="rnv" type="double"/>
				</sequence>
			</extension>
		</complexContent>
	</complexType>
	<complexType name="NonGeometricAbstractFeatureType" abstract="true">
		<complexContent>
			<restriction base="gml:AbstractFeatureType">
			</restriction>
		</complexContent>
	</complexType>
	<complexType name="bodenschichtkorrekturAssociationType">
		<complexContent>
			<restriction base="gml:FeatureAssociationType">
				<sequence>
					<element ref="na:bodenschichtkorrektur"/>
				</sequence>
			</restriction>
		</complexContent>
	</complexType>
	<element name="bodenschichtkorrektur" type="na:bodenschichtkorrekturType" 
		substitutionGroup="gml:_Feature"/>
	<!--
 (cinh,*)_(cind,*)_(cex,*)_(bmax,*)_(banf,*)_(fko,*)_(retlay,*)_(evalay,*)
-->
	<complexType name="bodenschichtkorrekturType">
		<complexContent>
			<extension base="gml:AbstractFeatureType">
				<sequence>
					<element name="cinh" type="double"/>
					<element name="cind" type="double"/>
					<element name="cex" type="double"/>
					<element name="bmax" type="double"/>
					<element name="banf" type="double"/>
					<element name="fko" type="double"/>
					<element name="retlay" type="double"/>
					<element name="evalay" type="double"/> <!-- TODO loeschen und standard schreiben, da vom NA-modell nicht benutzt -->
				</sequence>
			</extension>
		</complexContent>
	</complexType>
	<complexType name="grundwasserabflussAssociationType">
		<complexContent>
			<restriction base="gml:FeatureAssociationType">
				<sequence>
					<element ref="na:grundwasserabfluss"/>
				</sequence>
			</restriction>
		</complexContent>
	</complexType>
	<element name="grundwasserabfluss" type="na:grundwasserabflussType" 
		substitutionGroup="gml:_Feature"/>
	<complexType name="grundwasserabflussType">
		<complexContent>
			<extension base="gml:AbstractFeatureType">
				<sequence>
					<element name="ngwzu" type="na:CatchmentLinkType"/>
					<element name="gwwi" type="double"/>
				</sequence>
			</extension>
		</complexContent>
	</complexType>
	<complexType name="CatchmentLinkType">
		<complexContent>
			<restriction base="gml:FeatureAssociationType">
				<sequence>
					<element ref="na:Catchment"/>
				</sequence>
			</restriction>
		</complexContent>
	</complexType>
</schema>
