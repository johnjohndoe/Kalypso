<?xml version="1.0" encoding="UTF-8"?>
<chapter id="modelldaten">
	<title>Modelldaten</title>
	
	<para>Kalypso beruht auf drei Hauptdatengruppen:</para>
	
	<figure>
		<title>Datengruppen in Kalypso</title>
		
		<mediaobject>
			<imageobject>
				<imagedata fileref="img/kap5/Datengruppen_Kalypso.png"/>
			</imageobject>
		</mediaobject>
	</figure>
	
	<section id="abschn_5_1">
		<title>Modellstruktur</title>
		
		<para>Alle Daten eines Modells werden innerhalb eines sogenannten Projektes im
			Arbeitsbereich (<guilabel>Navigator</guilabel>) der Anwendung abgelegt.
			Die Ablage erfolgt dabei in einer, im Wesentlichen beliebigen,
			Verzeichnisstruktur.</para>
		
		<para>Zur besseren Übersicht empfehlen wir die Ablage nach einem festen
			Schema.</para>
		
		<para>Die folgende Tabelle beschreibt die einzelnen Dateien und die von uns
			verwendete Verzeichnisstruktur, beginnend unterhalb des
			Projektverzeichnisses):</para>
		
		<table>
			<title>Tabelle 6: Modellstruktur</title>
			
			<tgroup cols="4">
				<colspec align="left" colwidth="2*"/>
				<colspec align="left" colwidth="2*"/>
				<colspec align="left" colwidth="3*"/>
				<colspec align="left" colwidth="1*"/>
				
				<thead>
					<row>
						<entry align="center">Pfad</entry>
						<entry align="center">Datei</entry>
						<entry align="center">Erläuterung</entry>
						<entry align="center">Standort</entry>
					</row>
				</thead>
				
				<tbody>
					<row>
						<entry>/</entry>
						<entry>.project</entry>
						<entry>Haupt-Projektdatei</entry>
						<entry>fest</entry>
					</row>
					
					<row>
						<entry>/</entry>
						<entry>.metadata</entry>
						<entry>Modell-spezifische Parameter</entry>
						<entry>fest</entry>
					</row>
					
					<row>
						<entry>/</entry>
						<entry>modell.gml</entry>
						<entry>Grunddaten des Modells</entry>
						<entry>frei</entry>
					</row>
					
					<row>
						<entry>/.modell/</entry>
						<entry>calcCaseConfig.xml</entry>
						<entry>Konfiguration Rechenvariante</entry>
						<entry>fest</entry>
					</row>
					
					<row>
						<entry>/.model/</entry>
						<entry>calcWizard.xml</entry>
						<entry>Konfiguration Vorhersage-Wizard</entry>
						<entry>fest</entry>
					</row>
					
					<row>
						<entry>/.model/</entry>
						<entry>Modelspec.xml</entry>
						<entry>Eingangsdaten für Rechen-Plugin</entry>
						<entry>fest</entry>
					</row>
					
					<row>
						<entry>/.model/schema/</entry>
						<entry>*.xsd</entry>
						<entry>XML Schemata für GML-Daten</entry>
						<entry>fest</entry>
					</row>
					
					<row>
						<entry>/.prognose/</entry>
						<entry>*.*</entry>
						<entry>Ablage der Vorhersage-Varianten</entry>
						<entry>fest</entry>
					</row>
					
					<row>
						<entry>/.settings/</entry>
						<entry>*.prefs</entry>
						<entry>Interne Konfigurationsdatei</entry>
						<entry>fest</entry>
					</row>
					
					<row>
						<entry>/.styles/</entry>
						<entry>*.sld</entry>
						<entry>Style-Definitionsdateien für
							GIS-Darstellung</entry>
						<entry>frei</entry>
					</row>
					
					<row>
						<entry>/.templates/</entry>
						<entry>*.odt, *.ott, *.gmt, *.gtt</entry>
						<entry>Vorlagendateien für Rechenvarianten und
							Vorhersage-Wizard</entry>
						<entry>frei</entry>
					</row>
					
					<row>
						<entry>/Grunddaten/</entry>
						<entry>*.shp, *.*</entry>
						<entry>Weitere feste Grunddaten wie z.B. Shape-Dateien,
							Rasterdaten etc.</entry>
						<entry>frei</entry>
					</row>
					
					<row>
						<entry>/Karten/</entry>
						<entry>*.gmt</entry>
						<entry>Kartenvorlagen für Modelldaten</entry>
						<entry>frei</entry>
					</row>
					
					<row>
						<entry>/Tabellen/</entry>
						<entry>*.gtt</entry>
						<entry>Tabellenvorlagen für Modelldaten</entry>
						<entry>frei</entry>
					</row>
					
					<row>
						<entry>/Rechenvarianten/</entry>
						<entry>*.*</entry>
						<entry>Ablageverzeichnis für Rechenvarianten</entry>
						<entry>frei</entry>
					</row>
				</tbody>
			</tgroup>
		</table>
		
		<para>Mit Punkt <emphasis>.</emphasis> beginnende Verzeichnisse blendet der
			Expertenmodus von Kalypso normalerweise aus. Der Menüpunkt
			<guimenu>Filter</guimenu> blendet den Navigator ein.</para>
	</section>
	
	<section id="abschn_5_2">
		<title>GIS-Daten</title>
		
		<para>Die Modellierung von Modellen in Kalypso Enterprise basiert auf den
			Standards des OpenGIS-Konsortiums (OGC, http://www.opengis.org) und des
			World-Wide-Web-Konsortiums (W3C, http://www.w3c.org).</para>
		
		<para>Die Formatierung der Modelldaten ist in der vom OGC spezifizierten Geography
			Markup Language (GML) realisiert. GML ist eine XML-Codierung zum Transport und
			Speichern von geographischen Informationen.</para>
		
		<para>Die GML-Spezifikationen werden vom OGC veröffentlicht und sind über die
			Internet-Seite des OGC in englischer Sprache verfügbar (PDF).</para>
		
		<para>Die in Kalypso Enterprise unterstützte Version ist GML2.</para>
	</section>
	
	<section>
		<title>Zeitreihen</title>
		
		<para>Das Zeitreihenformat (ZML) ähnelt dem OGC-Observation-Schema (siehe
			http://www.opengeospatial.org/docs/03-022r3.pdf für mehr Information),
			ist aber einfacher aufgebaut. Zum Zeitpunkt der Realisierung gab es noch keine
			Implementierung dieses Standards.</para>
		
		<para>Das ZML-Schema befindet sich im KalypsoCore-Projekt unter:
			etc/schemas/zml/observation.xsd.</para>
		
		<para>ZML ist besonders für große Datenmengen geeignet. Die Implementierung
			unterstützt drei Arten von Datenintegration:</para>
		
		<itemizedlist>
			<listitem>
				<para>inline</para>
			</listitem>
			<listitem>
				<para>linked</para>
			</listitem>
			<listitem>
				<para>block-inline</para>
			</listitem>
		</itemizedlist>
		
		<para>Die Unterschiede zwischen diesen Variationen werden in den nächsten
			Abschnitten näher erläutert.</para>
		
		<section>
			<title>ZML-inline</title>
			
			<para>Dieses Format orientiert sich am stärksten am OGC-Schema. Die Daten
				werden direkt in das `valueArray’-Element `axis’-Elements
				geschrieben.</para>
			
			<figure>
				<title>Beispiel</title>
				
				<mediaobject>
					<imageobject>
						<imagedata fileref="img/kap5/ZML_inline.png"/>
					</imageobject>
				</mediaobject>
			</figure>
		</section>
		
		<section>
			<title>ZML-linked</title>
			
			<para>Dieses Format dient der Flexibilität. Wenn Zeitreihen als ASCII-Datei
				schon vorhanden sind, bietet das ZML-Schema die Möglichkeit, diese Daten
				aus der ZML-Datei zu verlinken. Eine Umformatierung der Ausgangsdateien
				ist nicht erforderlich.</para>
			
			<figure>
				<title>Beispiel</title>
				
				<mediaobject>
					<imageobject>
						<imagedata fileref="img/kap5/ZML_linked.png"/>
					</imageobject>
				</mediaobject>
			</figure>
		</section>
		
		<section>
			<title>ZML-block-inline</title>
			
			<para>Als Alternative zum ZML-linked Format bietet sich das ZML-block-inline
				Format an. Die Daten werden ’en bloc’ direkt in die ZML-Datei
				gespeichert.</para>
			
			<figure>
				<title>Beispiel</title>
				
				<mediaobject>
					<imageobject>
						<imagedata fileref="img/kap5/ZML_block_inline.png"/>
					</imageobject>
				</mediaobject>
			</figure>
		</section>
	</section>
</chapter>
