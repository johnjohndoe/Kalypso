<?xml version="1.0" encoding="ISO-8859-1"?>

<project name="Kalypso-Sachsen: DWD" default="copy-dwd-install-lfug" basedir="..">

	<!-- Project full path -->
	<property name="project.path" value="${workspace}/KalypsoConfSachsen" />
	
	<property name="dwd" value="${workspace}/KalypsoDWD" />
	<property name="dwd.lib" value="${dwd}/lib" />
	
	<property name="dist" value="${workspace}/KalypsoConfSachsen/deploy/server" />
	<property name="dist.dwd" value="${dist}/dwd" />

	<target name="prepare" description="Creates the build directory">
		<echo message="Creating the required directories...." />
		<mkdir dir="${dist}" />
		<mkdir dir="${dist.dwd}" />
		<mkdir dir="${dist.dwd}/lib" />
	</target>

	<target name="clean" description="Removes the build directories">
		<delete dir="${dist.dwd}" />
	</target>

	<target name="copy-dwd-install-lfug" depends="clean,prepare" description="Zips the Install Dir" >
		
		<copy todir="${dist.dwd}">
			<fileset dir="${workspace}/KalypsoDWD/install" includes="*.txt,*.bat,*.conf" />
		</copy>
			
		<copy todir="${dist.dwd}/lib">
			<fileset dir="${workspace}/KalypsoDWD/lib" includes="**/*" />
		</copy>
		
		<jar destfile="${dist.dwd}/lib/KalypsoDWD.jar" basedir="${workspace}/KalypsoDWD/build/bin" >
		    <manifest>
		    	<attribute name="Class-Path" value="lib/commons-io-1.0.jar lib/relaxngDatatype.jar lib/xsdlib.jar lib/namespace.jar lib/jax-qname.jar lib/jaxb-libs.jar lib/jaxb-impl.jar lib/jaxb-api.jar lib/dwdBinding.jar lib/corebinding.jar" />
		    	<attribute name="Main-Class" value="org.kalypso.dwd.ForecastGenerator" />
		    </manifest>
		</jar>
	</target>
	
</project>