<?xml version="1.0" encoding="UTF-8"?>
<chapter id="chapter_3_installation">
  <title>Installation und Konfiguration</title>

  <indexterm>
    <primary>Inatallation und Konfiguration</primary>
  </indexterm>

  <para>Die Installation und Konfiguration von KALYPSO wird in zwei Teilen -
  Client und Server - beschrieben.</para>

  <section id="install-client">
    <title>Client</title>

    <indexterm>
      <primary>Installation und Konfiguration</primary>

      <secondary>Client</secondary>
    </indexterm>

    <section>
      <title>Systemvoraussetzungen</title>

      <indexterm>
        <primary>Inatallation und Konfiguration</primary>

        <secondary>Client</secondary>

        <tertiary>Systemvoraussetzungen</tertiary>
      </indexterm>

      <para>KALYPSO wurde in der Programmiersprache Java und unter Verwendung
      der Eclipse Plattform realisiert, so dass die Software prinzipiell auf
      allen Systemen unter einer Java Runtime Umgebung (ab Version. 1.6) und
      der Eclipse Plattform einsetzbar ist. Um allerdings die volle
      Funktionalität nutzen zu können (Anstoßen des Grafikprogramms zum
      Editieren von Ergebnisdaten), ist der Einsatz der Software unter Windows
      NT/2000/XP zwingend.</para>
      
      <para>Für den Zugriff auf die Server Dienste ist ein Ethernet-LAN Voraussetzung, die Kommunikation erfolgt über Port 8080 (HTTP). 
      Für den Datenaustausch mit dem Berechnungsdienst wird zusätzlich eine für Server und Client beschreibbare Dateifreigabe benötigt.</para>

      <para>Für das Einrichten eines zentralen Modellverzeichnisses zum Ablegen archivierter Rechenvarianten wird eine weitere für den Client 
      beschreibbare Dateifreigabe benötigt.</para>
    </section>

    <section>
      <title>Installation</title>

      <indexterm>
        <primary>Installation und Konfiguration</primary>

        <secondary>Client</secondary>

        <tertiary>Installation</tertiary>
      </indexterm>

      <para>Die Installation der Client-Anwendung besteht aus:</para>

      <itemizedlist>
        <listitem>
          <para>Client.zip: Basisapplikation, basierend auf Eclipse, inklusive aktuelle Java Version (Sun JDK 1.6)</para>
        </listitem>

        <listitem>
          <para>Client_plugins.zip: Kalypso plug-ins inklusive benötigter Eclipse plug-ins</para>
        </listitem>

        <listitem>
          <para>Client_plugins_i10n.zip: Internationalisierung der verwendeten Eclipse plug-ins</para>
        </listitem>
      </itemizedlist>

      <para>Die Installation erfolgt durch das Entpacken der Archive. Hierzu wird
      die Basisapplikation an einen beliebigen Ort entpackt und die weiteren
      Bausteine in die entsprechenden Unterverzeichnisse kopiert.</para>

	  <para>Für eine zentrale Installation kann die Installation auf einem Dateiserver erfolgen. Der Zugriff muss über eine Netzwerkplatte 
	  (nicht über einen UNC-Pfad) erfolgen. Das Programmverzeichnis wird auf dem Dateiserver einmalig über den Aufruf
	  <programlisting>kalypso.exe -initialize</programlisting> durch den Administrator initalisiert. Das Programmverzeihnis sollte dann für normale Benutzer 
	  nicht beschreibbar sein. Neben dem Arbeitsverzeichnis, siehe unten, wird in diesem Fall eine lokale Konfiguration unter 
	  <filename>.eclpse</filename> im Anwenderverzeichnis abgelegt.</para>  

      <!--PROFILING ANFANG sachsen-anhalt-->
      <para vendor="sachsen-anhalt">Beispiel (Installation im HVZ in
      Magdeburg):<programlisting>\\smdhvzwapp\KalypsoClient\
        .eclipseproduct
        features
        plugins
        links\&lt;feature-name&gt;.link
        extensions\&lt;extension-name&gt;\eclipse
        extensions\&lt;extension-name&gt;\eclipse\.eclipseextension
        extensions\&lt;extension-name&gt;\eclipse\features
        extensions\&lt;extension-name&gt;\eclipse\plugins</programlisting> Wie
      aus dem Beispiel ersichtlich, kann die KALYPSO-Client Installation
      zentral vorgenommen werden. Dies ist der Fall in Magdeburg und in
      Halle.</para>
	<!--PROFILING ENDE sachsen-anhalt-->

      <para>Auf jeden Client-Rechner muss nur noch das Datenverzeichnis (sog.
      Workspace) festgelegt werden. Hierzu wird eine Verknüpfung eingerichtet, welche auf die zentrale Installation
      verweist und als Argument den Pfad auf das Datenverzeichnis enthält:
      <programlisting>T:\...\kalypso.exe -data WORKSPACE -vmargs -Xmx512m -XX:MaxPermSize=128M</programlisting>
	  </para>
	  
      <para><itemizedlist>
          <listitem>
            <para>T: ist das freigegebene Netzwerklaufwerk</para>
          </listitem>

          <listitem>
            <para>WORKSPACE: ist durch den lokalen Pfad des Datenverzeichnisses zu ersetzen.</para>
          </listitem>

          <listitem>
            <para>vmargs: Vorgaben für das Speichermanagement von Java </para>
          </listitem>
        </itemizedlist>
      </para>

      <!--PROFILING ANFANG sachsen-anhalt-->
      
      <para vendor="sachsen-anhalt">Eine Übersicht über die vorliegende Client Installation findet
      sich in <xref linkend="tab_install_client_overview" />.</para>
      <table id="tab_install_client_overview" vendor="sachsen-anhalt">
        <title>Installationspfade und Freigaben der Client
        Installation</title>

        <tgroup cols="4">
          <colspec align="left" colwidth="1*" />
          <colspec align="left" colwidth="2*" />
          <colspec align="left" colwidth="2*" />
          <colspec align="left" colwidth="2*" />

          <thead>
            <row>
              <entry align="center">Standort</entry>

              <entry align="center">Rechner</entry>

              <entry align="center">Installationspfad</entry>

              <entry align="center">Freigabe</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry>Magdeburg</entry>

              <entry>SMDHVZWAPP</entry>

              <entry><filename>D:/Programme/KalypsoClient</filename></entry>

              <entry><filename>//smdhvzwapp/KalypsoClient</filename></entry>
            </row>

            <row>
              <entry>Halle</entry>

              <entry>SHALHVZWAPP</entry>

              <entry><filename>D:/Programme/KalypsoClient</filename></entry>

              <entry><filename>//shalhvzwapp/KalypsoClient</filename></entry>
            </row>
          </tbody>
        </tgroup>
      </table>

      <!--PROFILING ENDE-->
    </section>

    <section>
      <title>Konfiguration</title>

      <indexterm>
        <primary>Installation und Konfiguration</primary>
        <secondary>Client</secondary>
        <tertiary>Konfiguration</tertiary>
      </indexterm>

	  <para>Die Konfiguraton des Kalypso Clients erfolgt an zentraler Stelle über die
	  Datei <filename>configuration/config.ini</filename> innerhalb der Installation. 
	  Die Konfiguration legt unter anderem die URL des Kalypso Server fest. Bei Konfiguration eines
	  redundant ausgelegten System mit zwei Servern ist zumindest das Anlegen zweier Konfigurationen
	  notwendig.</para>

	  <para>In <xref linkend="tab_client_config_ini"></xref> sind die von Kalypso definierten
	  Konfigurationsparameter aufgelistet. Darüber hinaus enthlt die Datei Parameter des Basissystems Eclipse, 
	  diese sind in der Eclipse Online Hilfe unter dem Stichpunkt <filename>Eclipse Runtime Options</filename>
	  dokumentiert.      
	  </para>
      
      <!--PROFILING ANFANG - ROW-basiert-->
      <table id="tab_client_config_ini" vendor="sachsen;sachsen-anhalt">
        <title>Konfigurationsparameter - Client</title>

        <tgroup cols="3">
          <colspec align="left" colwidth="1*" />
          <colspec align="left" colwidth="1*" />
          <colspec align="left" colwidth="3*" />

          <thead>
            <row>
              <entry align="center">Parameter</entry>
              <entry align="center">Typ</entry>
              <entry align="center">Beschreibung</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry>kalypso.hwv.prognose.dir</entry>
              <entry>Verzeichnispfad (UNC möglich)</entry>
              <entry>Dateipfad auf die zentral gespeicherten Prognosemodelle. Die hier gespeicherten Modelle
              werden bei jedem Aufruf des Vorhersageassistenten in das lokale Arbeitsverzeichnis kopiert.
              Archiviert Rechenvarianten werden im Unterverzeichnis <filename>.prognose</filename> abgelegt.                
              </entry>
            </row>
            <row>
              <entry>kalypso.hwv.modellist.url</entry>
              <entry>URL</entry>
              <entry>Ort der Konfigurationsdatei der Startseite. Legt die Auswahl der Modelle fest.</entry>
            </row>
            <row>
              <entry>kalypso.ask_for_pool_save</entry>
              <entry>boolean</entry>
              <entry>Legt fest, ob beim Schließen ungespeicherter Daten ein Speicherdialog angezeigt wird.</entry>
            </row>
            <row>
              <entry>kalypso.timezone</entry>
              <entry>Zeitzone</entry>
              <entry>Legt die globale Zeitzone durch Darstellung von Datumswerten fest. Siehe auch <programlisting>java.util.TimeZone</programlisting></entry>
            </row>
            <row>
              <entry>kalypso.timeseries.properties</entry>
              <entry>URL</entry>
              <entry>Ort der Zeitreihen-Konfigurationsdatei. Legt z.B. Standardfarben oder Achsenbeschriftungen fest.</entry>
            </row>
            <row>
              <entry>org.kalypso.service.wps.service</entry>
              <entry>URL</entry>
              <entry>Endpoint des WebProcessingService (WPS). Der WPS stellt eine Reihe von Server-Diensten zur Verfügung, u.a. den 
              Berechnungsdienst.</entry>
            </row>
            <row>
              <entry>org.kalypso.service.wps.input</entry>
              <entry>Verzeichnispfad (UNC möglich)</entry>
              <entry>Zentrale Eingabedaten für den WPS. Unter diesem Pfad stellt der Client temporäre Eingangsdaten 
              für den WPS bereit. Siehe auch die Server-Konfiguration.</entry>
            </row>
            <row>
              <entry>kalypso.hwv.user.service.id</entry>
              <entry>WPS-ID</entry>
              <entry>ID des WPS Prozesses zur Anfrage der Benutzerauthentifizierung.</entry>
            </row>
            <row>
              <entry>kalypso.hwv.user.askUserName</entry>
              <entry>boolean</entry>
              <entry>Legt fest, ob beim Login-Dialog eine Eingabe des Benutzernamens möglich ist. Bei false wird 
              automatisch der Windows-Benutzername angenommen.</entry>
            </row>
            <row>
              <entry>kalypso.hwv.user.scenarioIdList</entry>
              <entry>String</entry>
              <entry>Strichpunkt getrennte Liste der möglichen Szenarien.</entry>
            </row>
            <row>
              <entry>kalypso.hwv.user.scenarioIniList</entry>
              <entry>URL</entry>
              <entry>Strichpunkt getrennte Liste der Konfigurationsdateien je Szenario. Muss der id-Liste entsprechen.</entry>
            </row>
            <row>
              <entry>kalypso.hwv.document.service.id</entry>
              <entry>WPS-ID</entry>
              <entry>ID des WPS Prozesses zur Berichtsablage.</entry>
            </row>
            <row>
              <entry>kalypso.hwv.document.service.client.gml</entry>
              <entry>URL</entry>
              <entry>Vorlagendatei für Metadaten der Berichtsablage.</entry>
            </row>
            <row>
              <entry>kalypso.hwv.document.service.client.gft</entry>
              <entry>URL</entry>
              <entry>Vorlagendatei zur Darstellung der Metadaten der Berichtsablage.</entry>
            </row>
            <row>
              <entry>kalypso.hwv.observation.service.client.wsdl.location</entry>
              <entry>URL</entry>
              <entry>Service-Endpoint des WSDL-basierten Zeitreihendienstes.</entry>
            </row>
            <row>
              <entry>kalypso.hwv.raster.database.get.entries</entry>
              <entry>WPS-ID</entry>
              <entry>ID des WPS Prozesses der Raster-Datenbank: Methode <quote>getEntries</quote></entry>
            </row>
            <row>
              <entry>kalypso.hwv.raster.database.process.timeseries</entry>
              <entry>WPS-ID</entry>
              <entry>ID des WPS Prozesses der Raster-Datenbank: Methode <quote>processTimeseries</quote></entry>
            </row>

          </tbody>
        </tgroup>
      </table>
      <!--PROFILING ENDE-->

	 <para>Neben der zentralen Konfiguration können individuelle Benutzereinstellungen innerhalb
	 des Programms unter  
	 <menuchoice>
          <guimenu>Fenster</guimenu>
          <guisubmenu>Benutzervorgaben</guisubmenu>
          <guimenuitem>Kalypso</guimenuitem>
        </menuchoice> angepasst werden. Hier sind besonders die folgenden beiden Punkte auf der Seite 
        <guimenu>Kalypso</guimenu> anzumerken:
        <itemizedlist>
        	<listitem>Globales Koordinatensystem: alle Kartendarstellungen erfolgen in der angegebenen Projektion, </listitem>
        	<listitem>Zeitzone für die Darstellung: die Darstellung von Datums- oder Zeitwerten erfolgt in der angegebenen Zeitzone.</listitem>
        </itemizedlist>
      </para>
    </section>
  </section>

  <section id="install-server">
    <title>Server</title>

    <indexterm>
      <primary>Installation und Konfiguration</primary>
      <secondary>Server</secondary>
    </indexterm>

    <para>Die vollständige Installation der Serveranwendung erfordert eine
    Reihe manueller Schritte. Einführend werden die Systemvoraussetzungen und
    die notwendige Verzeichnisstruktur auf dem Server behandelt.</para>

    <section>
      <title>Systemvoraussetzungen</title>

      <indexterm>
        <primary>Installation und Konfiguration</primary>
        <secondary>Server</secondary>
        <tertiary>Systemvoraussetzungen</tertiary>
      </indexterm>

      <para>Die Serveranwendung ist bereits auf einem handelsüblichen PC
      (<abbrev>z. B.</abbrev> Pentium 4, 512 MB RAM, 40 GB HDD) einsatzfähig.
      Um jedoch die System-Antwortzeit erheblich zu verbessern, empfehlen wir
      folgende Konfiguration: Dual Pentium 4, 2 GB RAM, 130 GB HDD, eventuell
      mit replizierter Hardware für eine erhöhte Ausfallsicherheit.</para>

      <para>Aufgrund der Programmierung der KALYPSO-Dienste in der
      Programmiersprache Java, ist die Software auf allen Systemen, die eine
      Java Runtime Umgebung (ab Version 1.6) unterstützen,
      einsetzbar.</para>

      <para>Die Modell-Plugins und deren Rechenkerne stellen ggf. spezielle
      Anforderungen an die Laufzeitumgebung (DOS-Programm o.ä.).</para>
      
      <para>Für den Zugriff der Clients auf die Server Dienste ist ein Ethernet-LAN Voraussetzung, die Kommunikation erfolgt über Port 8080 (HTTP). 
      Für den Datenaustausch mit dem Berechnungsdienst wird zusätzlich eine für Server und Client beschreibbare Dateifreigabe benötigt.</para>
    </section>

    <section>
      <title>Installation</title>

      <indexterm>
        <primary>Inatallation und Konfiguration</primary>
        <secondary>Server</secondary>
        <tertiary>Installation</tertiary>
      </indexterm>

      <para>Die Installation der Server-Anwendung besteht aus:</para>

      <itemizedlist>
        <listitem>
          <para>Tomcat6.0.18.zip: Tomcat Applikationsserver, inklusive aktueller Java Version (Sun JDK 1.6)</para>
        </listitem>

        <listitem>
          <para>bridge.zip: Kalypso-Basiswebapplikation (Eclipse Equinox Bridge)</para>
        </listitem>

        <listitem>
          <para>Service_plugins.zip: Plug-ins der Kalypso-Dienste</para>
        </listitem>

        <listitem>
          <para>Prognose.zip: Aktueller Stand der Prognosemodelle</para>
        </listitem>
      </itemizedlist>

	  <para>Die Installation erfolgt durch das Entpacken der Archive. Hierzu wird
      die Basisapplikation an einen beliebigen Ort entpackt und die weiteren
      Bausteine in die entsprechenden Unterverzeichnisse kopiert.</para>

      <para >In <xref linkend="pic_install_Dateistruktur" /> ist die
      Verzeichnisstruktur einer Serverinstallation beispielhaft zu sehen.</para>

      <figure id="pic_install_Dateistruktur" >
        <title>Abbildung Dateistruktur</title>

        <!--PROFILING ANFANG sachsen-anhalt-->
        <mediaobject vendor="sachsen-anhalt">
          <imageobject>
            <imagedata fileref="img/kap3/Dateistruktur_Installation.png" />
          </imageobject>
        </mediaobject>

        <!--PROFILING ANFANG sachsen-->
        <mediaobject vendor="sachsen">
          <imageobject>
            <imagedata fileref="img/installation/sachsen/dirstruktur_lfug_kv.png" />
          </imageobject>
        </mediaobject>
      <!--PROFILING ENDE-->
      </figure>

	  <para>Zur Laufzeit erzeugt die Server-Anwendung verschiedene temporäre Dateien. Der Ablageort dieser Dateien
	  wird über die Konfiguration des Servers festgelegt. Es empfiehlt sich, die temporären Dateien ausserhalb des
	  Installationsverzeichnis an einer zentralen Stelle abzulegen und regelmässig zu löschen.</para>


		<!--  TODO TODO TODO -->
      <para>Die folgenden Pfade und Freigaben müssen vor dem Start des Kalypso Servers 
      eingerichtet werden:</para>

      <!--PREOFILING ANFANG sachsen-anhalt-->

      <table vendor="sachsen-anhalt">
        <title>Dateifreigabe</title>

        <tgroup cols="3">
          <colspec align="left" colwidth="2*" />
          <colspec align="left" colwidth="3*" />
          <colspec align="left" colwidth="3*" />

          <thead>
            <row>
              <entry align="center">Freigabe</entry>
              <entry align="center">Pfad (relativ zu )</entry>
              <entry align="center">Beschreibung</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry>Kalypso-modelle</entry>
              <entry><filename>D:/Programme/Kalypso/webapps/webdav/prognose</filename></entry>
              <entry>Lese- und Schreibrechte für <quote>Jeder</quote>.
              Modelldaten werden auf diese Art und Weise zwischen Clients und
              Server ausgetauscht.</entry>
            </row>

            <row>
              <entry>KalypsoClient</entry>
              <entry><filename>D:/Programme/KalypsoClient</filename></entry>
              <entry>Leserechte für <quote>Jeder</quote>. Ablage der zentralen
              Client-Installation.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>

      <!--PROFLING ANFANG sachsen-->

      <table vendor="sachsen">
        <title>Dateifreigabe</title>

        <tgroup cols="3">
          <colspec align="left" colwidth="1*" />
          <colspec align="left" colwidth="2*" />
          <colspec align="left" colwidth="1*" />
          <colspec align="left" colwidth="2*" />

          <thead>
            <row>
              <entry align="center">Pfad</entry>
              <entry align="center">Bedeutung</entry>
              <entry align="center">Freigabe</entry>
              <entry align="center">Berechtigung</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry><filename>D:\Programme\kalypso\client</filename></entry>
              <entry>Programmverzeichnis Kalypso-Client</entry>
              <entry><filename>client$</filename></entry>
              <entry>Lesezugriff für alle Benutzer</entry>
            </row>
            <row>
              <entry><filename>D:\Programme\kalypso\prognose</filename></entry>
              <entry> Verzeichnis der Prognosemodelle und archivierten Rechenvarianten</entry>
              <entry><filename>prognose$</filename></entry>
              <entry>Schreibrechte für alle Benutzer</entry>
            </row>
            <row>
              <entry><filename>D:\Programme\kalypso\Tomcat6.0.18</filename></entry>
              <entry>Installation des Tomcat Webservers</entry>
              <entry>-</entry>
              <entry>-</entry>
            </row>
            <row>
              <entry><filename>D:\Programme\kalypso\dwd</filename></entry>
              <entry>Speicherort der Datenbank für DWD-Raste</entry>
              <entry>-</entry>
              <entry>-</entry>
            </row>
            <row>
              <entry><filename>D:\Temp\kalypso</filename></entry>
              <entry>Zentrales Verzeichnis für temporäre Dateien des Kalypso Service</entry>
              <entry>-</entry>
              <entry>-</entry>
            </row>
            <row>
              <entry><filename>D:\Temp\kalypso\wps</filename></entry>
              <entry>Tempräre Dateien des !WebProcessingService</entry>
              <entry><filename>wps$</filename></entry>
              <entry>Schreibrechte für alle Benutzer</entry>
            </row>
            <row>
              <entry><filename>D:\Temp\kalypso\wps\inputs</filename></entry>
              <entry>Vom Client übertragene Eingangsdateien</entry>
              <entry>-</entry>
              <entry>-</entry>
            </row>
            <row>
              <entry><filename>D:\Temp\kalypso\wps\results</filename></entry>
              <entry>Ergebnisdaten des WPS</entry>
              <entry>-</entry>
              <entry>-</entry>
            </row>
            <row>
              <entry><filename>D:\Programme\PSI\lhwz\dist\pgn</filename></entry>
              <entry>Übergabeverzeichnis für DWD Daten</entry>
              <entry>-</entry>
              <entry>-</entry>
            </row>
          </tbody>
        </tgroup>
      </table>

      <!--PROFILING ENDE-->
    </section>

    <section>
      <title>Konfiguration Tomcat Applikationsserver</title>

      <indexterm>
        <primary>Installation und Konfiguration</primary>
        <secondary>Server</secondary>
        <tertiary>Tomcat</tertiary>
      </indexterm>

	  <para>Die Basis-Konfiguration des Tomcat Applikationsserver besteht im Wesentlichen darin,
	  diesen als Windows-Dienst anzumelden und diese Anmeldung zu Konfigurieren. Das Einrichten
	  als Windows-Dienst ist notwendig, damit der Dienst nach Neustart des Servers
      automatisch gestartet wird.</para>
      
      <para>Der Dienst wird durch Ausführen von <programlisting>bin/service.bat install</programlisting> 
      auf der Kommandozeile installiert.</para>
      
      <para>Die Konfiguration des Dienstes erfolgt einmalig über das Hilfsprogramm <filename>bin/tomcat6w.exe</filename>. Folgenden 
      Optionen müssen in diesem Konfigurationsdialog eingestellt werden:
     <table id="tab_install_tomcat_service">
       <title>Konfiguration des Tomcat-Dienstes</title>

       <tgroup cols="4">
         <colspec align="left" colwidth="1*" />
         <colspec align="left" colwidth="1*" />
         <colspec align="left" colwidth="1*" />
         <colspec align="left" colwidth="2*" />

         <thead>
           <row>
             <entry align="center">Register</entry>
             <entry align="center">Option</entry>
             <entry align="center">Einstellung</entry>
             <entry align="center">Bemerkung</entry>
           </row>
         </thead>

         <tbody>
           <row>
             <entry>General</entry>
             <entry>Display Name</entry>
             <entry>-beliebig-</entry>
             <entry>z.B. <quote>Tomcat Kalypso Prognosesystem</quote></entry>
           </row>

		<row>
             <entry></entry>
             <entry>Startup type</entry>
             <entry>Automatic</entry>
             <entry></entry>
           </row>

           <row vendor="sachsen">
             <entry>Log On</entry>
             <entry>This Account</entry>
             <entry>sm9</entry>
             <entry></entry>
           </row>

           <row vendor="sachsen">
             <entry>Logging</entry>
             <entry>Redirect Stdout</entry>
             <entry>D:\Programme\kalypso\Tomcat6.0.18\logs\kalypso.log</entry>
             <entry></entry>
           </row>

           <row vendor="sachsen">
             <entry></entry>
             <entry>Redirect Stderror</entry>
             <entry>D:\Programme\kalypso\Tomcat6.0.18\logs\kalypso.err</entry>
             <entry></entry>
           </row>

           <row vendor="sachsen">
             <entry>Java</entry>
             <entry>Java Options</entry>
             <entry></entry>
             <entry>Ändern der System-Property <filename>java.io.tmpdir</filename> in <filename>D:/Temp/Kalypso</filename></entry>
           </row>

           <row vendor="sachsen">
             <entry></entry>
             <entry>Maximm Memory Pool</entry>
             <entry>1024</entry>
             <entry></entry>
           </row>
           
         </tbody>
       </tgroup>
     </table>
     
     Abgesehen von diesen Änderungen müssen keine weiteren Anpassungen gegenüber der Standardeinstellung getätigt werden.
      </para>

	  <para>Nach der Konfiguration kann der Dienst entweder über <filename>tomcat6w.exe</filename> (im Register <quote>General</quote>)
	  oder über den Windows-Dienste Dialog gestartet werden.</para>
      
      <para>Nach dem Erstart (und im Fall von Problemen) sollte die Datei <filename>logs/kalpyos.log</filename> und die weiteren
      im selben Verzeichnis abgelegten Dateien kontrolliert werden.</para> 
    </section>

    <section id="install-server_services_config">
      <title>Konfiguration KALYPSO spezifisch</title>

      <indexterm>
        <primary>Installation und Konfiguration</primary>
        <secondary>Server</secondary>
        <tertiary>Konfiguration</tertiary>
      </indexterm>

	  <para>Die KALYPSO spezifische Konfiguraton des Servers erfolgt an zentraler Stelle über die
	  Datei <filename>Tomcat6.0.18/webapps/bridge/WEB-INF/eclipse/configuration/config.ini</filename> innerhalb der Installation. 
	  </para>

	  <para>In <xref linkend="tab_server_config_ini"></xref> sind die von Kalypso definierten
	  Konfigurationsparameter aufgelistet. Darüber hinaus enthlt die Datei Parameter des Basissystems Eclipse, 
	  diese sind in der Eclipse Online Hilfe unter dem Stichpunkt <filename>Eclipse Runtime Options</filename>
	  dokumentiert.</para>
      
      <!--PROFILING ANFANG - ROW-basiert-->
      <table id="tab_server_config_ini" vendor="sachsen;sachsen-anhalt">
        <title>Konfigurationsparameter - Client</title>

        <tgroup cols="3">
          <colspec align="left" colwidth="1*" />
          <colspec align="left" colwidth="1*" />
          <colspec align="left" colwidth="3*" />

          <thead>
            <row>
              <entry align="center">Parameter</entry>
              <entry align="center">Typ</entry>
              <entry align="center">Beschreibung</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry>org.kalypso.service.wps.service</entry>
              <entry>URL</entry>
              <entry>Endpoint des WebProcessingService (WPS). Der WPS stellt eine Reihe von Server-Diensten zur Verfügung, u.a. den 
              Berechnungsdienst.</entry>
            </row>
            <row>
              <entry>org.kalypso.service.wps.results</entry>
              <entry>Verzeichnispfad (UNC möglich)</entry>
              <entry>Ablageort der temporären Ergebnisdateien des WPS. Dieser Pfad muss auch von der Client Anwendung erreichbar sein.</entry>
            </row>
            <row>
              <entry>kalypso.hwv.observation.service.configuration.location</entry>
              <entry>URL</entry>
              <entry>Basisverzeichnis der Konfiguration des Zeitreihendienstes.</entry>
            </row>
            <row>
              <entry>kalypso.hwv.raster.database.location</entry>
              <entry>Verzeichnispfad (UNC möglich)</entry>
              <entry>Speichertort der prozessierten DWD-Rasterdaten (<quote>Rasterdatenbank</quote>)</entry>
            </row>
            <row>
              <entry>kalypso.hwv.dwd.interval</entry>
              <entry>Zeit (ms)</entry>
              <entry>Abrufintervall der DWD-Rasterdaten</entry>
            </row>
            <row>
              <entry>kalypso.hwv.dwd.source</entry>
              <entry>Verzeichnispfad (UNC möglich)</entry>
              <entry>Quellverzeichnis der DWD-Rasterdaten</entry>
            </row>
            <row>
              <entry>kalypso.hwv.dwd.lmk</entry>
              <entry>Dateimuster</entry>
              <entry>Dateimuster (regulärer Audruck) der LMK-Dateien</entry>
            </row>
            <row>
              <entry>kalypso.hwv.dwd.lm2</entry>
              <entry>Dateimuster</entry>
              <entry>Dateimuster (regulärer Audruck) der LM2-Dateien</entry>
            </row>
            <row>
              <entry>kalypso.hwv.dwd.snow</entry>
              <entry>Dateimuster</entry>
              <entry>Dateimuster (regulärer Audruck) der SNOW-Dateien</entry>
            </row>
            <row>
              <entry>kalypso.hwv.document.service.psidistdir</entry>
              <entry>Relativer Pfad</entry>
              <entry>Distributionspfad zur Ablage der Berichtsdokumente innerhalb der PSI Verzeichnisstruktur auf dem Server</entry>
            </row>
            <row>
              <entry>kalypso.psi.at.properties</entry>
              <entry>URL</entry>
              <entry>Konfigurationsdatei zur Definition zusätzlicher Abflusstafeln</entry>
            </row>
            <row>
              <entry>kalypso.psi.reinit</entry>
              <entry>Zeitintervall (ms)</entry>
              <entry>Reinitialisierungintervall der PSICompact-Schnittstelle. Nach Ablauf der angegebenen 
              Zeit wird die Verbindng mit PSICompact neu aufgebaut.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <!--PROFILING ENDE-->
      
    </section>
  </section>

  <!--PROFILING ANFANG sachsen-anhalt-->

  <section vendor="sachsen-anhalt">
    <title>Ausfallsicherheit</title>

    <indexterm>
      <primary>Ausfallsicherheit</primary>
    </indexterm>

    <para>Die Ausfallsicherheit wird sowohl durch die Hardware als auch durch
    die Software garantiert. Für die Einzelheiten der Hardware-Konfiguration
    verweisen wir Sie auf die entsprechende Dokumentation bei Ihrem
    System-Administrator. Hier gehen wir auf die durch KALYPSO angebotene
    Ausfallsicherheit ein.</para>

    <para vendor="sachsen-anhalt">Der KALYPSO-Server ist sowohl in Magdeburg
    (MD) als auch in Halle (HAL) installiert. Sollte ein Server komplett
    ausfallen, erlaubt diese Redundanz eine Umstellung auf den anderen
    Standort. Es ist zu beachten, dass das Netzwerk den sog.
    <quote>Single-Point-Of-Failure</quote> repräsentiert: ohne Netzwerk
    funktioniert das Gesamtsystem nicht. In diesem Fall kann der
    KALYPSO-Client trotzdem gestartet und benutzt werden. Abfrage der
    Benutzerberechtigung, Abruf und Zurückschreiben von Zeitreihen, Abgleich
    der Modelldaten und Speichern von Dokumenten nach IMS sind aber
    unzulässige Funktionen.</para>

    <para vendor="sachsen-anhalt">Folgende Tabelle (siehe <xref
    linkend="tbl_ausfall" />) listet mögliche Systemausfälle und die
    entsprechende Maßnahmen. <figure id="tbl_ausfall">
        <title>Maßnahmen gegen Systemausfälle</title>

        <mediaobject>
          <imageobject>
            <imagedata fileref="img/sst/sachsen-anhalt/ausfall.png"
                       format="PNG" scale="40" />
          </imageobject>
        </mediaobject>
      </figure></para>

    <section>
      <title>W/Q-Umrechnungsdaten</title>

      <indexterm>
        <primary>Ausfallsicherheit</primary>

        <secondary>W/Q-Umrechnungsdaten</secondary>
      </indexterm>

      <para>Um eine bessere Ausfallsicherheit gegen WISKI zu gewährleisten,
      wurde speziell für die W/Q-Tabellen ein Caching-Mechnismus entwickelt.
      Mehr Information dazu finden Sie in <xref
      linkend="wiski_wq_cache" />.</para>
    </section>
  </section>

  <!--PROFILING ENDE sachsen-anhalt-->
</chapter>