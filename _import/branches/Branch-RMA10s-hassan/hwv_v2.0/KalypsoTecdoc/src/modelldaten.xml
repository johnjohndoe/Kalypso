<?xml version="1.0" encoding="UTF-8"?>
<chapter id="modelldaten">
  <title>Modelldaten</title>

  <indexterm>
    <primary>Modelldaten</primary>
  </indexterm>

  <para>KALYPSO beruht auf drei Hauptdatengruppen:</para>

  <figure>
    <title>Datengruppen in KALYPSO</title>

    <mediaobject>
      <imageobject>
        <imagedata fileref="img/kap5/Datengruppen_Kalypso.png" />
      </imageobject>
    </mediaobject>
  </figure>

  <section id="abschn_5_1">
    <title>Modellstruktur</title>

    <indexterm>
      <primary>Modelldaten</primary>

      <secondary>Modellstruktur</secondary>
    </indexterm>

    <para>Alle Daten eines Modells werden innerhalb eines so genannten
    Projektes im Arbeitsbereich (<guilabel>Navigator</guilabel>) der Anwendung
    abgelegt. Die Ablage erfolgt dabei in einer, im Wesentlichen beliebigen,
    Verzeichnisstruktur.</para>

    <para>Zur besseren Übersicht empfehlen wir die Ablage nach einem festen
    Schema.</para>

    <para>Die <xref linkend="tbl_ModellStruktur" /> beschreibt die einzelnen
    Dateien und die von uns verwendete Verzeichnisstruktur, beginnend
    unterhalb des Projektverzeichnisses):</para>

    <!--PROFILING ANFANG sachsen-->

    <table id="tbl_ModellStruktur" vendor="sachsen">
      <title>Modellstruktur</title>

      <tgroup cols="4">
        <colspec align="left" colwidth="5*" />

        <colspec align="left" colwidth="4*" />

        <colspec align="left" colwidth="6*" />

        <colspec align="left" colwidth="2*" />

        <thead>
          <row>
            <entry align="center">Pfad</entry>

            <entry align="center">Datei</entry>

            <entry align="center">Erläuterung</entry>

            <entry align="center">Standort</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry><filename>/</filename></entry>

            <entry>.project</entry>

            <entry>Haupt-Projektdatei</entry>

            <entry>fest</entry>
          </row>

          <row>
            <entry><filename>/</filename></entry>

            <entry>.metadata</entry>

            <entry>modellspezifische Parameter</entry>

            <entry>fest</entry>
          </row>

          <row>
            <entry><filename>/</filename></entry>

            <entry>modell.gml</entry>

            <entry>Grunddaten des Modells</entry>

            <entry>frei</entry>
          </row>

          <row>
            <entry><filename>/.model/</filename></entry>

            <entry>calcCaseConfig.xml</entry>

            <entry>Konfiguration Rechenvariante</entry>

            <entry>fest</entry>
          </row>

          <row>
            <entry><filename>/.model/</filename></entry>

            <entry>calcWizard.xml</entry>

            <entry>Konfiguration Vorhersage-Wizard</entry>

            <entry>fest</entry>
          </row>

          <row>
            <entry><filename>/.model/</filename></entry>

            <entry>Modelspec.xml</entry>

            <entry>Eingangsdaten für Rechen-Plugin</entry>

            <entry>fest</entry>
          </row>

          <row>
            <entry><filename>/.model/dwd</filename></entry>

            <entry>dwdZmlConf.xml</entry>

            <entry>Konfigurationsdatei für DWD-Rasterdaten</entry>

            <entry>fest</entry>
          </row>

          <row>
            <entry><filename>/.model/launch</filename></entry>

            <entry>build.xml, *.launch</entry>

            <entry>ANT-Skripte und Eclipse-Launches</entry>

            <entry>fest</entry>
          </row>

          <row>
            <entry><filename>/.model/observationConf</filename></entry>

            <entry>*.gml</entry>

            <entry>Zuordnungsdateien zwischen Modelldaten und PSICompact
            IDs</entry>

            <entry>fest</entry>
          </row>

          <row>
            <entry><filename>/.prognose/</filename></entry>

            <entry>*.*</entry>

            <entry>Ablage der Vorhersage-Varianten</entry>

            <entry>fest</entry>
          </row>

          <row>
            <entry><filename>/.settings/</filename></entry>

            <entry>*.prefs</entry>

            <entry>Interne Konfigurationsdatei</entry>

            <entry>fest</entry>
          </row>

          <row>
            <entry><filename>/.styles/</filename></entry>

            <entry>*.sld</entry>

            <entry>Style-Definitionsdateien für GIS-Darstellung</entry>

            <entry>frei</entry>
          </row>

          <row>
            <entry><filename>/.templates/</filename></entry>

            <entry>*.odt, *.ott, *.gmt, *.gtt</entry>

            <entry>Vorlagendateien für Rechenvarianten und
            Vorhersage-Wizard</entry>

            <entry>frei</entry>
          </row>

          <row>
            <entry><filename>/Grunddaten/</filename></entry>

            <entry>*.shp, *.*</entry>

            <entry>Weitere feste Grunddaten wie <abbrev>z. B.</abbrev>
            Shape-Dateien, Rasterdaten etc.</entry>

            <entry>frei</entry>
          </row>

          <row>
            <entry><filename>/Karten/</filename></entry>

            <entry>*.gmt</entry>

            <entry>Kartenvorlagen für Modelldaten</entry>

            <entry>frei</entry>
          </row>

          <row>
            <entry><filename>/Tabellen/</filename></entry>

            <entry>*.gtt</entry>

            <entry>Tabellenvorlagen für Modelldaten</entry>

            <entry>frei</entry>
          </row>

          <row>
            <entry><filename>/Rechenvarianten/</filename></entry>

            <entry>*.*</entry>

            <entry>Ablageverzeichnis für Rechenvarianten</entry>

            <entry>frei</entry>
          </row>
        </tbody>
      </tgroup>
    </table>

    <!--PROFILING ENDE sachsen-->

    <!--PROFILING ANFANG sachsen-anhalt-->

    <table id="tbl_ModellStruktur" vendor="sachsen-anhalt">
      <title>Modellstruktur</title>

      <tgroup cols="4">
        <colspec align="left" colwidth="5*" />

        <colspec align="left" colwidth="4*" />

        <colspec align="left" colwidth="6*" />

        <colspec align="left" colwidth="2*" />

        <thead>
          <row>
            <entry align="center">Pfad</entry>

            <entry align="center">Datei</entry>

            <entry align="center">Erläuterung</entry>

            <entry align="center">Standort</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry><filename>/</filename></entry>

            <entry>.project</entry>

            <entry>Haupt-Projektdatei</entry>

            <entry>fest</entry>
          </row>

          <row>
            <entry><filename>/</filename></entry>

            <entry>.metadata</entry>

            <entry>modellspezifische Parameter</entry>

            <entry>fest</entry>
          </row>

          <row>
            <entry><filename>/</filename></entry>

            <entry>modell.gml</entry>

            <entry>Grunddaten des Modells</entry>

            <entry>frei</entry>
          </row>

          <row>
            <entry><filename>/.model/</filename></entry>

            <entry>calcWizard.xml</entry>

            <entry>Konfiguration Vorhersage-Assistent</entry>

            <entry>fest</entry>
          </row>

          <row>
            <entry><filename>/.model/dwd</filename></entry>

            <entry>dwdZmlConf.xml</entry>

            <entry>Konfigurationsdatei DWD-Rasterdaten</entry>

            <entry>fest</entry>
          </row>

          <row>
            <entry><filename>/.model/launch</filename></entry>

            <entry>build.xml, *.launch</entry>

            <entry>ANT-Skripte und Eclipse-Launches</entry>

            <entry>fest</entry>
          </row>

          <row>
            <entry><filename>/.model/wizardhtml</filename></entry>

            <entry>*.html</entry>

            <entry>HTML-Dateien der Navigation im Assistenten</entry>

            <entry>frei</entry>
          </row>

          <row>
            <entry><filename>/.prognose/</filename></entry>

            <entry>*.*</entry>

            <entry>Ablage der Vorhersage-Varianten</entry>

            <entry>fest</entry>
          </row>

          <row>
            <entry><filename>/.settings/</filename></entry>

            <entry>*.prefs</entry>

            <entry>Interne Konfigurationsdatei</entry>

            <entry>fest</entry>
          </row>

          <row>
            <entry><filename>/.styles/</filename></entry>

            <entry>*.sld</entry>

            <entry>Style-Definitionsdateien für GIS-Darstellung</entry>

            <entry>frei</entry>
          </row>

          <row>
            <entry><filename>/.templates/</filename></entry>

            <entry>*.odt, *.ott, *.gmt, *.gtt</entry>

            <entry>Vorlagendateien für Rechenvarianten und
            Vorhersage-Assistenten</entry>

            <entry>frei</entry>
          </row>

          <row>
            <entry><filename>/.shapes/</filename></entry>

            <entry>*.shp, *.*</entry>

            <entry>Weitere feste Grunddaten wie <abbrev>z. B.</abbrev>
            Shape-Dateien, Rasterdaten etc.</entry>

            <entry>frei</entry>
          </row>

          <row>
            <entry><filename>/Rechenvarianten/</filename></entry>

            <entry>*.*</entry>

            <entry>Ablageverzeichnis für Rechenvarianten</entry>

            <entry>frei</entry>
          </row>
        </tbody>
      </tgroup>
    </table>

    <!--PROFILING ENDE sachsen-anhalt-->

    <para>Mit Punkt <emphasis>.</emphasis> beginnende Verzeichnisse blendet
    der Expertenmodus von KALYPSO normalerweise aus. Der Menüpunkt
    <guimenu>Filter</guimenu> des Navigators blendet den Navigatorfilter ein.
    Der Navigatorfilter definiert, welche Daten ausgeblendet werden.</para>
  </section>

  <section id="abschn_5_2">
    <title>GIS-Daten</title>

    <indexterm>
      <primary>Modelldaten</primary>

      <secondary>GIS-Daten</secondary>
    </indexterm>

    <para>Die Modellierung von Modellen in KALYPSO Enterprise basiert auf den
    Standards des OpenGeospatial-Konsortiums (OGC, <ulink
    url="http://www.opengeospatial.org">http://www.opengeospatial.org</ulink>)
    und des World-Wide-Web-Konsortiums (W3C, <ulink
    url="http://www.w3c.org">http://www.w3c.org</ulink>).</para>

    <para>Die Formatierung der Modelldaten ist in der vom OGC spezifizierten
    Geography Markup Language (GML) realisiert. GML ist eine XML-Codierung zum
    Transport und Speichern von geographischen Informationen.</para>

    <para>Die GML-Spezifikationen werden vom OGC veröffentlicht und sind über
    die Internet-Seite des OGC in englischer Sprache verfügbar (PDF).</para>

    <para>Die in KALYPSO Enterprise unterstützte Version ist GML2.</para>
  </section>

  <section>
    <title>Zeitreihen</title>

    <indexterm>
      <primary>Modelldaten</primary>

      <secondary>Zeitreihen</secondary>
    </indexterm>

    <para>Das Zeitreihenformat (ZML) ähnelt dem OGC-Observation-Schema (siehe
    <ulink
    url="http://www.opengeospatial.org/docs/03-022r3.pdf">http://www.opengeospatial.org/docs/03-022r3.pdf</ulink>
    für mehr Information), ist aber einfacher aufgebaut. Zum Zeitpunkt der
    Realisierung gab es noch keine Implementierung dieses Standards.</para>

    <para>Das ZML-Schema befindet sich im KalypsoCore-Projekt unter:
    <filename>etc/schemas/zml/observation.xsd</filename>.</para>

    <para>ZML ist besonders für große Datenmengen geeignet. Die
    Implementierung unterstützt drei Arten von Datenintegration:</para>

    <itemizedlist>
      <listitem>
        <para>inline</para>
      </listitem>

      <listitem>
        <para>linked</para>
      </listitem>

      <listitem>
        <para>block-inline</para>
      </listitem>
    </itemizedlist>

    <para>Die Unterschiede zwischen diesen Variationen werden in den nächsten
    Abschnitten näher erläutert.</para>

    <section>
      <title>ZML-inline</title>

      <para>Dieses Format orientiert sich am stärksten am OGC-Schema. Die
      Daten werden direkt in das <quote>valueArray</quote>-Element des
      <quote>axis</quote>-Elements geschrieben (siehe <xref
      linkend="abb_ZML_inline" />).</para>

      <figure id="abb_ZML_inline">
        <title>Beispiel ZML-inline</title>

        <mediaobject>
          <imageobject>
            <imagedata fileref="img/kap5/ZML_inline.png" scale="70" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>

    <section>
      <title>ZML-linked</title>

      <para>Dieses Format dient der Flexibilität. Wenn Zeitreihen als
      ASCII-Datei schon vorhanden sind, bietet das ZML-Schema die Möglichkeit,
      diese Daten aus der ZML-Datei zu verlinken. Eine Umformatierung der
      Ausgangsdateien ist nicht erforderlich (siehe <xref
      linkend="abb_ZML_linked" />).</para>

      <figure id="abb_ZML_linked">
        <title>Beispiel ZML-linked</title>

        <mediaobject>
          <imageobject>
            <imagedata fileref="img/kap5/ZML_linked.png" scale="70" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>

    <section id="sec_modelldaten_ZML_block_inline">
      <title>ZML-block-inline</title>

      <para>Als Alternative zum ZML-linked Format bietet sich das
      ZML-block-inline Format an. Die Daten werden <quote>en bloc</quote>
      direkt in die ZML-Datei gespeichert (siehe <xref
      linkend="abb_ZMLblock_inline" />).</para>

      <figure id="abb_ZMLblock_inline">
        <title>Beispiel ZML-block-inline</title>

        <mediaobject>
          <imageobject>
            <imagedata fileref="img/kap5/ZML_block_inline.png" scale="70" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
  </section>
</chapter>