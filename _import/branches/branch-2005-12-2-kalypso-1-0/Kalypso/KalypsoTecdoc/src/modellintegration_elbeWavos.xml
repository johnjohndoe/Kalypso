<?xml version="1.0" encoding="UTF-8"?>
<section id="modell-elbepolte" vendor="sachsen">
  <title>Modellintegration Elbe - WAVOS</title>

  <indexterm>
    <primary>Modellintegration</primary>

    <secondary>Elbe - WAVOS</secondary>
  </indexterm>

  <para>Das Wasserstandstandsvorhersagemodell der Elbe beruht auf dem Programm
  WAVOS, das von der Bundesanstalt für Gewäserkund, Koblenz (BfG) entwicklelt
  wurde und gepflegt wird.</para>

  <para>Zur Integration der Modelle in KALYPSO-Enterprise wurde das bestehende
  Programm durch die BfG so angepasst, dass ein oberflächenloser Betrieb des
  Rechenkerns möglich ist. Es entstand ein angepasster Rechenkern für KALYPSO
  (dr_wavos_kalypso.exe).</para>

  <para>Dieser Rechenkern ist serverseitig als Modell-Plugin in KALYPSO
  integriert. Zur clientseitigen Integration wurde eine GML-basierte
  Modellspezifikation erstellt.</para>

  <para>Die zur Integration des Modells nötige Programmierung ist innerhalb
  der Programmquellen vollständig im Projekt
  <filename>KalypsoModelWavos</filename> zusammengefasst. Neben der
  Implementierung des Rechendienstes befinden sich dort die für die Berechnung
  benötigten ausführbaren Dateien
  (<filename>wavosElbeSachsenBin.zip</filename>) und Konfigurationsdateien
  (<filename><filename>wavosElbeSachsenData.zip</filename></filename>).</para>

  <para>Alle Daten zur clientseitigen Modellierung, also Modellspezifikation,
  Modelldaten usw., befinden sich im Datenprojekt
  <filename>KalypsoElbeWavosSachsen</filename> der Programmquellen. Das
  gleiche Projekt dient als Modellprojekt unter dem Namen
  <quote>ElbeWavosSachsen</quote> als Vorhersagemodell der eigentlichen
  Installation.</para>

  <section id="sec_modelSpecElbeWavos">
    <title>Modellspezifikation und Grunddaten</title>

    <indexterm>
      <primary>Modellspezifikation und Grunddaten</primary>

      <secondary>Elbe - WAVOS</secondary>
    </indexterm>

    <para>Die Verzeichnisstruktur des Modellprojekts
    <filename>KalypsoElbeWavosSachsen</filename> ist gemäß <xref
    linkend="abschn_5_1" /> aufgebaut. Über die Standard-Struktur hinaus wurde
    das Verzeichnis <filename>.Rechenvarianten_Test</filename> angelegt,
    welches Testdatensätze als fertige Rechenvarianten enthält.</para>

    <para>Die GML-Applikationsschemata wurden wie empfohlen in den
    Programmquellen des Modell-Plugins im Paket
    <filename>org/kalypso/model/wavos/schemata</filename> abgelegt.</para>

    <para>Das Grundmodell wurde unter dem Namen
    <filename>modell.gml</filename> im Hauptverzeichnis des Modellprojektes
    gespeichert. Durch Doppelklick auf die GML-Datei kann man sich einen
    Überblick über die Struktur der Modelldaten in Form einer Baumansicht
    verschaffen. Nach dem Öffnen der Ansicht erscheint eine (Baum-)
    Strukturansicht des Modells, welche unter anderem auch das Bearbeiten der
    einzelnen Modellelemente erlaubt (siehe <xref
    linkend="fig_modellintegration_elbewavos_ueberblick" os="" />).</para>

    <figure id="fig_modellintegration_elbewavos_ueberblick">
      <title>Überblick Modelldaten Elbe - WAVOS</title>

      <mediaobject>
        <imageobject>
          <imagedata fileref="img/modellintegration/sachsen/elbewavos/modellbaum.png"
                     scale="60" />
        </imageobject>
      </mediaobject>
    </figure>

    <para>Zusätzlich zu den allgemeinen Modellparametern besteht das
    Elbe-Modell aus zwei Listen (Collections), welche unterhalb des
    Wurzelelements (root) angeordnet sind:</para>

    <itemizedlist>
      <listitem>
        <para>Die Liste der Pegel (pegelMember) enthält die im Modell
        abgebildeten Elbe- und Zuflusspegel und deren Parameter.</para>
      </listitem>

      <listitem>
        <para>Die Liste der Polder (bauwerkMember) enthält die im Modell
        abgebildeten Polder und deren Parameter.</para>
      </listitem>
    </itemizedlist>

    <para>Im Folgenden werden die einzelnen Modellparameter und Spalten der
    Modelltabellen erläutert. Die Eingabe der Parameter erfolgt über die
    entsprechenden Ansichten im KALYPSO-Modeler (Expertenmodus) oder im
    Vorhersage-Assistenten. Die Bedeutung der rechenkernbezogenen Parameter
    ist der Modell-Dokumentation zu entnehmen.</para>

    <table>
      <title>Allgemeine Modellparameter</title>

      <tgroup cols="3">
        <colspec align="left" colwidth="7*" />

        <colspec align="left" colwidth="3*" />

        <colspec align="left" colwidth="7*" />

        <thead>
          <row>
            <entry align="center">Parameter</entry>

            <entry align="center">Einheit</entry>

            <entry align="center">Bedeutung</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry>Name</entry>

            <entry>-</entry>

            <entry>Name des Modells</entry>
          </row>

          <row>
            <entry>Beschreibung</entry>

            <entry>-</entry>

            <entry>Beschreibung des Modells</entry>
          </row>

          <row>
            <entry>Modellgebiet</entry>

            <entry>-</entry>

            <entry>Flussgebiet, das durch das Modell abgedeckt wird</entry>
          </row>
        </tbody>
      </tgroup>
    </table>

    <table>
      <title>allgemeine Parameter der Pegel für die Elbe - WAVOS</title>

      <tgroup cols="3">
        <colspec align="left" colwidth="5*" />

        <colspec align="left" colwidth="2*" />

        <colspec align="left" colwidth="5*" />

        <thead>
          <row>
            <entry align="center">Parameter</entry>

            <entry align="center">Einheit</entry>

            <entry align="center">Bedeutung</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry>Lage</entry>

            <entry>-</entry>

            <entry>Lage des Pegels</entry>
          </row>

          <row>
            <entry>Pegelname</entry>

            <entry>-</entry>

            <entry>(Anzeige-) Name des Pegels</entry>
          </row>

          <row>
            <entry>Beschreibung</entry>

            <entry>-</entry>

            <entry>Beschreibung des Pegels</entry>
          </row>

          <row>
            <entry>Pegel-ID</entry>

            <entry>-</entry>

            <entry>Pegel-ID, Messstellennummer</entry>
          </row>

          <row>
            <entry>Lage am Fluss [km]</entry>

            <entry>-</entry>

            <entry>Flusskilometer [km]</entry>
          </row>

          <row>
            <entry>Pegelnullpunkt [m ü. NHN]</entry>

            <entry>-</entry>

            <entry>Pegelnullpunkt [m ü. NHN]</entry>
          </row>

          <row>
            <entry>interne Kennzeichnung</entry>

            <entry>-</entry>

            <entry>Kennzeichnung, die für die Generierung der Eingangsdaten
            des Rechenkerns verwendet wird (Spaltenüberschrift,
            Pegel-Kennung)</entry>
          </row>

          <row>
            <entry>interne laufende Nummer</entry>

            <entry>-</entry>

            <entry>Laufende Nummer, die für die Generierung der Eingangsdaten
            des Rechenkerns verwendet wird</entry>
          </row>

          <row>
            <entry>Gewässer</entry>

            <entry>-</entry>

            <entry>Gewässer an dem der Pegel liegt</entry>
          </row>

          <row>
            <entry>Typ der Datenübergabe</entry>

            <entry><quote>W</quote> oder <quote>Q</quote></entry>

            <entry>Datenart, die für diesen Pegel an den Rechenkern zu
            übergeben ist (W/Q)</entry>
          </row>

          <row>
            <entry>AT-Datei erzeugen</entry>

            <entry>boolean</entry>

            <entry>soll für diesen Pegel eine AT-Datei generiert und an den
            rechenkern übergeben werden? Ist z.B. für Zwischengebiete nicht
            nötig, dann wird die Standard-AT-Datei des Rechenkerns
            verwendet</entry>
          </row>

          <row>
            <entry>Projektion erlaubt</entry>

            <entry>boolean</entry>

            <entry>ist für diesen Pegel die Auswahl von Projektion
            (<quote>diffuse Zuflüsse</quote>) möglich?</entry>
          </row>

          <row>
            <entry>Empfehlung Projektion</entry>

            <entry><quote>0</quote>, <quote>W</quote> oder
            <quote>Q</quote></entry>

            <entry>Empfehlung für die Projektion</entry>
          </row>

          <row>
            <entry>Projektion</entry>

            <entry><quote>0</quote>, <quote>W</quote> oder
            <quote>Q</quote></entry>

            <entry>Auswahl für die Projektion</entry>
          </row>

          <row>
            <entry>Zuflussvorhersage vorhanden</entry>

            <entry>boolean</entry>

            <entry>enthalten die Zeitreihendaten auch eine
            Zuflussvorhersage?</entry>
          </row>

          <row>
            <entry>Reserveganglinie 1-4</entry>

            <entry>Zeitreihenlinks</entry>

            <entry>vier Reserve-Zeitreihenlinks</entry>
          </row>
        </tbody>
      </tgroup>
    </table>

    <table>
      <title>zusätzliche Parameter der Elbepegel für die Elbe - WAVOS</title>

      <tgroup cols="3">
        <colspec align="left" colwidth="5*" />

        <colspec align="left" colwidth="2*" />

        <colspec align="left" colwidth="5*" />

        <thead>
          <row>
            <entry align="center">Parameter</entry>

            <entry align="center">Einheit</entry>

            <entry align="center">Bedeutung</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry>Mess- und Vorgabewerte</entry>

            <entry>Zeitreihenlink</entry>

            <entry>Verknüpfung mit Gesamtganglinie (Messung ggf. kombiniert
            mit tschechischer Vorhersage)</entry>
          </row>

          <row>
            <entry>Ganglinie (zur Information)</entry>

            <entry>Zeitreihenlink</entry>

            <entry>Verknüpfung mit Gangline der tschechischen Vorhersage
            (Pegel Usti)</entry>
          </row>

          <row>
            <entry>Vorhersagewerte</entry>

            <entry>Zeitreihenlink</entry>

            <entry>Verknüpfung mit Ganglinie der berechneten
            Vorhersage</entry>
          </row>

          <row>
            <entry>untere Umhüllende</entry>

            <entry>Zeitreihenlink</entry>

            <entry>Verknüpfung mit unterer Umhüllenden der
            Vorhersagewerte</entry>
          </row>

          <row>
            <entry>obere Umhüllende</entry>

            <entry>Zeitreihenlink</entry>

            <entry>Verknüpfung mit oberer Umhüllenden der
            Vorhersagewerte</entry>
          </row>

          <row>
            <entry>Vorhersagewerte (ohne Verschiebung)</entry>

            <entry>Zeitreihenlink</entry>

            <entry>Verknüpfung mit Ganglinie der berechneten Vorhersage (ohne
            Verschiebung)</entry>
          </row>

          <row>
            <entry>untere Umhüllende (ohne Verschiebung)</entry>

            <entry>Zeitreihenlink</entry>

            <entry>Verknüpfung mit unterer Umhüllenden der Vorhersagewerte
            (ohne Verschiebung)</entry>
          </row>

          <row>
            <entry>obere Umhüllende (ohne Verschiebung)</entry>

            <entry>Zeitreihenlink</entry>

            <entry>Verknüpfung mit Ganglinie der berechneten Vorhersage (ohne
            Verschiebung)</entry>
          </row>

          <row>
            <entry>Vorhersagegenauigkeit</entry>

            <entry>[%/(60h)]</entry>

            <entry>Genauigkeit der Vorhersage in % pro 60 Stunden zur
            Berechnung der Umhüllenden (Parameter Wasserstand)</entry>
          </row>
        </tbody>
      </tgroup>
    </table>

    <table>
      <title>zusätzliche Parameter der Zuflusspegel für die Elbe -
      WAVOS</title>

      <tgroup cols="3">
        <colspec align="left" colwidth="4*" />

        <colspec align="left" colwidth="3*" />

        <colspec align="left" colwidth="7*" />

        <thead>
          <row>
            <entry align="center">Parameter</entry>

            <entry align="center">Einheit</entry>

            <entry align="center">Bedeutung</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry>Abfluss-Ganglinie</entry>

            <entry>Zeitreihenlink</entry>

            <entry>Verknüpfung mit Ganglinie der Mess- und Vorgabewerte für
            den Zufluss</entry>
          </row>
        </tbody>
      </tgroup>
    </table>

    <table>
      <title>Parameter der Polder für die Elbe - WAVOS</title>

      <tgroup cols="3">
        <colspec align="left" colwidth="1*" />

        <colspec align="left" colwidth="1*" />

        <colspec align="left" colwidth="4*" />

        <thead>
          <row>
            <entry align="center">Parameter</entry>

            <entry align="center">Einheit</entry>

            <entry align="center">Bedeutung</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry>Lage</entry>

            <entry>-</entry>

            <entry>Lage des Polders</entry>
          </row>

          <row>
            <entry>Poldername</entry>

            <entry>-</entry>

            <entry>Name des Polders</entry>
          </row>

          <row>
            <entry>Beschreibung</entry>

            <entry>-</entry>

            <entry>Beschreibung des Polders</entry>
          </row>

          <row>
            <entry>interne Kennzeichnung</entry>

            <entry>-</entry>

            <entry>Kennzeichnung, die für die Generierung der Eingangsdaten
            des Rechenkerns verwendet wird (Spaltenüberschrift,
            Polder-Kennung)</entry>
          </row>

          <row>
            <entry>interne laufende Nummer</entry>

            <entry>-</entry>

            <entry>Laufende Nummer, die für die Generierung der Eingangsdaten
            des Rechenkerns verwendet wird</entry>
          </row>

          <row>
            <entry>Gewässer</entry>

            <entry>-</entry>

            <entry>Gewässer an dem der Polder liegt</entry>
          </row>

          <row>
            <entry>Polderöffnung</entry>

            <entry>Zeitreihenlink</entry>

            <entry>Verknüpfung mit Ganglinie der Werte zur
            Poldersteuerung</entry>
          </row>
        </tbody>
      </tgroup>
    </table>
  </section>

  <section>
    <title>Spezifikation der Rechenvarianten</title>

    <indexterm>
      <primary>Spezifikation der Rechenvarianten</primary>

      <secondary>Elbe - WAVOS</secondary>
    </indexterm>

    <para>Die Rechenvarianten wurden gemäß <xref
    linkend="sec-modellintegration-allgemein" /> angelegt und konfiguriert.
    <xref linkend="tab-modellintegration-elbewavos-rechenvariante" /> zeigt
    den konkreten Aufbau für die Elbe (WAVOS).</para>

    <table id="tab-modellintegration-elbewavos-rechenvariante">
      <title>Aufbau einer Rechenvariante des Elbe-Modells (WAVOS)</title>

      <tgroup cols="3">
        <colspec align="left" colwidth="3*" />

        <colspec align="left" colwidth="6*" />

        <colspec align="left" colwidth="7*" />

        <thead>
          <row>
            <entry align="center">Pfade relativ zur Rechenvariante</entry>

            <entry align="center">Beschreibung</entry>

            <entry align="center">Entstehung</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry><filename>Steuerparameter.gft</filename></entry>

            <entry>Ansichtsvorlage für die Steuerparameter</entry>

            <entry>Kopie aus
            <filename>/KalypsoElbeWavosSachsen/.templates</filename></entry>
          </row>

          <row>
            <entry><filename>Gesamtansicht.gmt</filename></entry>

            <entry>Karte des Gesamtgebiets mit allen Modellelementen</entry>

            <entry>Kopie aus
            <filename>/KalypsoElbeWavosSachsen/.templates</filename></entry>
          </row>

          <row>
            <entry><filename>calcCase.log</filename></entry>

            <entry>Log-Datei zur Erstellung der Rechenvariante, insbesondere
            Meldungen zur Gültigkeit der Zeitreihenwerte</entry>

            <entry>KALYPSO-Rechendienst</entry>
          </row>

          <row>
            <entry><filename>.calculation</filename></entry>

            <entry>Steuerparameter der Berechnung</entry>

            <entry>Kopie der Datei
            <filename>/KalypsoElbeWavosSachsen/.model/.calculation.template</filename>
            unter Ersetzung/Bearbeitung der Parameter.</entry>
          </row>

          <row>
            <entry><filename>calcCase.gml</filename></entry>

            <entry>GML-Datei der Modelldaten der Rechenvariante</entry>

            <entry>Kopie der Grunddaten des Modells
            (<filename>/KalypsoElbeWavosSachsen/modell.gml</filename>)</entry>
          </row>

          <row>
            <entry><filename>Anfangswerte/awerte.zip</filename></entry>

            <entry>bei fortgesetzten Rechenvarianten (Übernahme der
            Handeingaben) enthält die ZIP-Datei die berechneten Anfangswerte,
            ansonsten eine Platzhalter-Datei</entry>

            <entry>Kopie der berechneten Anfangswerte aus der fortgesetzen
            Rechenvariante (dort
            <filename>Ergebnisse/Anfangswerte/awerte.zip</filename>)</entry>
          </row>

          <row>
            <entry><filename>Zeitreihen/*.zml</filename></entry>

            <entry>Eingangszeitreihen der Berechnung</entry>

            <entry>KALYPSO-Zeitreihendienst</entry>
          </row>

          <row>
            <entry><filename>Zeitreihen/*.ott</filename></entry>

            <entry>tabellarische Übersichten über Eingangszeitreihen</entry>

            <entry>Kopien von
            <filename>/KalypsoElbeWavosSachsen/.templates/Zeitreihen/*.ott</filename></entry>
          </row>

          <row>
            <entry><filename>Ergebnisse/*</filename></entry>

            <entry>Ergebnisse einer Berechnung</entry>

            <entry>KALYPSO-Rechendienst</entry>
          </row>

          <row>
            <entry><filename>Ergebnisse/Log-Datei/elbeWavosSachsen.log</filename></entry>

            <entry>Log-Datei der Berechnung</entry>

            <entry>KALYPSO-Rechendienst</entry>
          </row>

          <row>
            <entry><filename>Ergebnisse/Anfangswerte/awerte.zip</filename></entry>

            <entry>berechnete Anfangswerte</entry>

            <entry>KALYPSO-Rechendienst</entry>
          </row>

          <row>
            <entry><filename>Ergebnisse/.native</filename></entry>

            <entry>Modelldaten im Format des Rechenkerns sind zu Prüfzwecken
            hier abgelegt</entry>

            <entry>KALYPSO-Rechendienst</entry>
          </row>

          <row>
            <entry><filename>Ergebnisse/Zeitreihen/*.zml</filename></entry>

            <entry>Eigentliche Berechnungsergebnisse in Form von
            Zeitreihen</entry>

            <entry>KALYPSO-Rechendienst</entry>
          </row>

          <row>
            <entry><filename>Ergebnisse/Zeitreihen/*.ott</filename></entry>

            <entry>tabellarische Übersichten über Ergebniszeitreihen</entry>

            <entry>Kopien von
            <filename>/KalypsoElbeWavosSachsen/.templates/Ergebnisse/Zeitreihen/*.ott</filename></entry>
          </row>

          <row>
            <entry><filename>Ergebnisse/Zeitreihen_ohneVerschiebung/*.zml</filename></entry>

            <entry>Eigentliche Berechnungsergebnisse in Form von Zeitreihen,
            vor Verschiebung</entry>

            <entry>KALYPSO-Rechendienst</entry>
          </row>

          <row>
            <entry><filename>Ergebnisse/Zeitreihen_ohneVerschiebung/*.ott</filename></entry>

            <entry>tabellarische Übersichten über Ergebniszeitreihen, vor
            Verschiebung</entry>

            <entry>Kopien von
            <filename>/KalypsoElbeWavosSachsen/.templates/Ergebnisse/Zeitreihen_ohneVerschiebung/*.ott</filename></entry>
          </row>
        </tbody>
      </tgroup>
    </table>

    <section>
      <title>Launches und ANT-Skripte</title>

      <para>Der Modellablauf wird mit Hilfe der in der Datei
      <filename>/KalypsoElbeWavosSachsen/.model/launch/build.xml</filename>
      enthaltenen ANT-Targets gesteuert.</para>

      <para>Die bereitgestellten ANT-Targets umfassen die in <xref
      linkend="sec-modellintegration-allgemein" /> beschriebenen vier Launches
      (Erstellen einer neuen Rechenvariante, Aktualisieren einer
      Rechenvariante, Berechnung einer Rechenvariante und Ablage der
      Prognosezeitreihen).</para>

      <section>
        <title>Erstellen einer Rechenvariante
        (<filename>createCalcCase.launch</filename>)</title>

        <para>Es werden alle (Grund-)Daten der Rechenvariante erstellt
        (kopiert), d.h. alle Daten außer den Zeitreihendaten. Die Datei der
        Steuerparameter <filename>.calculation</filename> (siehe <xref
        linkend="sec_modellintegration_elbewavos_pktCalculation" />) wird mit
        Standardwerten belegt. Die eigentlichen Modelldaten befinden sich in
        der Datei <filename>calcCase.gml</filename> und stellen eine reine
        Kopie der Grunddaten
        (<filename>/KalypsoElbeWavosSachsen/modell.gml</filename>) dar.</para>
      </section>

      <section>
        <title>Aktualisieren einer Rechenvariante
        (<filename>updateCalcCase.launch</filename>)</title>

        <para>Es werden alle Zeitreihendaten der Rechenvariante wie folgt
        zusammengestellt:</para>

        <informaltable>
          <tgroup cols="2">
            <colspec align="left" colwidth="4*" />

            <colspec align="left" colwidth="6*" />

            <thead>
              <row>
                <entry align="center">Datenart</entry>

                <entry align="center">Herkunft</entry>
              </row>
            </thead>

            <tbody>
              <row>
                <entry>Wasserstände an den Elbepegeln</entry>

                <entry>PSICompact (Messwerte; Usti: Kombination aus Messwerten
                und tschechischen Vorhersagen)</entry>
              </row>

              <row>
                <entry>tschechische Vorhersage für Usti</entry>

                <entry>PSICompact</entry>
              </row>

              <row>
                <entry>Zwischengebietsabflüsse</entry>

                <entry>PSICompact</entry>
              </row>

              <row>
                <entry>Poldersteuerung / Polderöffnung</entry>

                <entry>Standard-Zeitreihen
                (<quote>geschlossen</quote>)</entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>

        <para>Die Zuordnung zwischen Zeitreihen der Rechenvariante und
        Zeitreihen in PSICompact bzw. Zeitreihen in Dateien auf dem Server
        befindet sich in den Zuordnungsdateien
        <filename>/KalypsoElbeWavosSachsen/.model/observationConf/*.gml</filename>.</para>
      </section>

      <section>
        <title>Berechnung einer Rechenvariante
        (<filename>runCalculation.launch</filename>)</title>

        <para>Die vom Rechenkern benötigten Daten werden zusammengestellt und
        an den Berechnungsdienst gesandt. Die zurückgebenen Ergebnisse werden
        in die Rechenvariante übernommen, vorher werden ggf. bereits
        bestehende Ergebnisse gelöscht.</para>
      </section>

      <section>
        <title>Ablage der Prognosezeitreihen
        (<filename>exportVorhersagen.launch</filename>)</title>

        <para>Entsprechend der Zuordnungen in den Dateien
        <filename>/KalypsoElbeWavosSachsen/.model/observationConf/VorhersageMapping*.gml</filename>
        werden Prognosezeitreihen nach PSICompact geschrieben.</para>
      </section>
    </section>

    <section id="sec_modellintegration_elbewavos_pktCalculation">
      <title>Die Datei <filename>.calculation</filename></title>

      <para>Die Steuerdatei <filename>.calculation</filename> wird durch das
      serverseitig abgelegte GML-Schema <filename>control.xsd</filename>
      (Speicherort siehe <xref linkend="sec_modelSpecElbeWavos" />)
      spezifiziert und enthält neben dem Simulationszeitraum (Start der
      Vorhersage, Simulationszeitraum [d], Vorhersagezeitraum [h]) noch
      weitere Metadaten, um eine Rechenvariante ausführlich beschreiben zu
      können. Diese sind:</para>

      <itemizedlist>
        <listitem>
          <para>der Ersteller der Rechenvariante (Default-Wert ist der
          Login-Name)</para>
        </listitem>

        <listitem>
          <para>das Erstellungsdatum der Rechenvariante (Default-Wert ist die
          Systemzeit bei Anlegen der Rechenvariante)</para>
        </listitem>

        <listitem>
          <para>eine Kurzbeschreibung der Rechenvariante</para>
        </listitem>

        <listitem>
          <para>eine Langbeschreibung der Rechenvariante</para>
        </listitem>
      </itemizedlist>

      <para>Zur Steuerung der Rechnung kann die Verwendung von Anfangswerten
      ausgewählt werden. Die Verwendung dieser Option ist nur sinnvoll, wenn
      auch tatsächlich Anfangswerte für den Simulationszeitraum
      vorliegen.</para>

      <para>Um eine ansprechende Darstellung der Steuerparameter und Metadaten
      im Dialog <menuchoice>
          <guilabel>Rechenvariante</guilabel>

          <guimenuitem>Neu</guimenuitem>
        </menuchoice> sowie im Vorhersage-Assistenten zu erhalten, wurde eine
      Ansichtsvorlage für die Steuerdatei unter
      <filename>/KalypsoElbeWavosSachsen/.model/.calculation.view</filename>
      abgelegt. Sie hat den gleichen Aufbau wie die Vorlagendatei
      <filename>Steuerparameter.gft</filename> im Verzeichnis der
      Rechenvariante.</para>

      <tip>
        <para>Zum Erstellen der Kopiervorlagen für die Ansichten der
        Rechenvariante (<abbrev>z. B.</abbrev>
        <filename>Steuerparameter.gft</filename> oder
        <filename>Streckenparameter.gtt</filename>) wurde im Verzeichnis
        <filename>/KalypsoElbeWavosSachsen/.templates/calcCase/</filename> die
        Daten einer konkreten Rechenvariante abgelegt. Dadurch konnten die
        Vorlagen mit relativem Pfad auf diese Daten komfortabel erstellt
        werden und können ohne Anpassung in jede neue Rechenvariante kopiert
        werden.</para>
      </tip>
    </section>
  </section>

  <section>
    <title>Modell-Plugin</title>

    <indexterm>
      <primary>Modell-Plugin</primary>

      <secondary>Elbe - WAVOS</secondary>
    </indexterm>

    <para>Das Anstoßen der serverseitigen Berechnung wird wie oben beschrieben
    über ein ANT-Skript (<filename>runCalculation.launch</filename>)
    bewerkstelligt. Es werden alle Dateien der Rechenvariante bis auf die
    Vorlagen übertragen.</para>

    <para>Zur Berechnung wird der KALYPSO-Berechnungsdienst mit der Typ-ID des
    Modells (hier <quote>org.kalypso.model.wavos.elbe.sachsen.v1</quote>)
    angestoßen. Der Dienst aktiviert anhand der ID die entsprechende
    Implementierung des Interface
    <interfacename>org.Kalypso.services.calculation.job.ICalcJob</interfacename>.
    Für die Elbe - WAVOS
    <interfacename>org.kalypso.model.wavos.WavosCalcJob</interfacename>.</para>

    <para>Diese Klasse liegt im Projekt <filename>KalypsoModelWavos</filename>
    der Programmquellen. Wie oben bereits beschrieben wurde, sind alle für die
    Elbe spezifischen Programmierungen und die für das Anstoßen des jeweiligen
    Rechenkerns benötigten Daten in diesem Projekt zusammengefasst.</para>

    <para>Der implementierte Berechnungsdienst geht für jede Berechnung wie
    folgt vor:</para>

    <itemizedlist>
      <listitem>
        <para>Es wird ein temporäres Verzeichnis <quote>native</quote>
        angelegt.</para>
      </listitem>

      <listitem>
        <para>Es werden das ausführbare Programm und die Daten in das
        temporäre Verzeichnis kopiert. Diese finden sich im Paket
        <filename>/KalypsoModelWavos/src/org/kalypso/model/wavos/elbe/lhwzsachsen/resources</filename>.</para>
      </listitem>

      <listitem>
        <para>Die vom Client übergebenen Daten der Rechenvariante werden in
        die Formate des Rechenkerns konvertiert und im temporären Verzeichnis
        abgelegt.</para>
      </listitem>

      <listitem>
        <para>Die ausführbare Datei
        (<filename>dr_wavos_kalypso.exe</filename>) wird gestartet.</para>
      </listitem>

      <listitem>
        <para>Die Berechnungsergebnisse werden in einem
        <quote>_save</quote>-Ordner gesichert (zur späteren zusätzlichen,
        informativen Anzeige).</para>
      </listitem>

      <listitem>
        <para>Die Verschiebung der Rechenergebnisse an die Messwerte
        (<filename>shiftvor.exe</filename>) wird gestartet.</para>
      </listitem>

      <listitem>
        <para>Die Ergebnisdaten der Berechnung, welche sich jetzt ebenfalls im
        temporären Verzeichnis befinden, werden in die vom Client benötigten
        Formate übertragen und können jetzt vom Client abgerufen
        werden.</para>
      </listitem>
    </itemizedlist>

    <para>Neben den konvertierten Daten (Zeitreihendaten) werden auch die
    nativen, vom Rechenkern verarbeiteten Daten zurück zum Client übertragen,
    was eine eventuelle Fehlersuche erleichtert. Insbesondere können diese
    direkt von der ursprünglichen Version des Rechenprogramms (mit Oberfläche)
    clientseitig verarbeitet und kontrolliert werden.</para>
  </section>

  <section>
    <title>Konfiguration des Vorhersage-Assistenten</title>

    <indexterm>
      <primary>Vorhersage-Assistent</primary>

      <secondary>Konfiguration</secondary>

      <tertiary>Elbe</tertiary>
    </indexterm>

    <para>Die Konfiguration des jeweiligen Vorhersage-Assistenten befindet
    sich wie in <xref linkend="sec_konfigAssi" /> gefordert in der Datei
    <filename>/KalypsoElbeWavosSachsen/.model/calcWizard.xml</filename>. Der
    Ablauf der Assistenten ist im Benutzerhandbuch beschrieben und in der
    Konfigurationsdatei kommentiert.</para>

    <para>Die Konfigurationsdatei <filename>calcWizard.xml</filename> verweist
    ihrerseits auf eine Reihe von Ansichtsvorlagen zur Darstellung der
    Modelldaten innerhalb des Assistenten. Diese sind sämtlich im Verzeichnis
    <filename>/KalypsoElbeWavosSachsen/.templates/calcCase</filename>
    abgelegt.</para>
  </section>
</section>