<?xml version="1.0" encoding="UTF-8"?>
<chapter id="grafische_oberflaeche">
  <title>Grafische Oberfläche</title>

  <indexterm>
    <primary>Grafische Oberfläche</primary>

    <secondary>Expertenmodus</secondary>
  </indexterm>

  <para>Im vorliegenden Kapitel wird die grafische Benutzeroberfläche (GUI)
  für den KALYPSO Modeler (Expertenmodus) erläutert. Die KALYPSO Modeler
  Perspektive kann entweder über das vorhandene Symbol in der Auswahlleiste
  oder über das Menü <guimenuitem>Fenster</guimenuitem> geöffnet
  werden.</para>

  <figure>
    <title>KALYPSO Modeler Perspektive öffnen</title>

    <mediaobject>
      <imageobject>
        <imagedata align="center" fileref="img/gui/perspektive_modeler.png"
                   scale="70" />
      </imageobject>
    </mediaobject>
  </figure>

  <section id="allgemeines_zur_gui">
    <title>Allgemeines zu Ansichten</title>

    <para id="dummy6">Die grafische Benutzeroberfläche im Expertenmodus
    besteht im Wesentlichen aus folgenden Ansichten:</para>

    <itemizedlist>
      <listitem>
        <para><emphasis role="bold">Navigator</emphasis>: Der Navigator
        ermöglicht die Ansicht auf das lokale Arbeitsverzeichnis und die dort
        vorliegende Datenstruktur.</para>
      </listitem>

      <listitem>
        <para><emphasis role="bold">Karten-Ansicht</emphasis>: Mit Hilfe der
        Karten-Ansicht können vorab definierte Kartenvorlagen - einschließlich
        der in der Vorlage referenzierten Geo-Informationen - im Lageplan
        visualisiert werden. Die Karten-Ansicht eignet sich für die
        Darstellung von geografischen Modelldaten (z.B. Einzugsgebietsgrenzen)
        sowie relevanten Hintergrundkarten (z.B. topografische
        Grundkarten).</para>
      </listitem>

      <listitem>
        <para><emphasis role="bold">Baumansicht</emphasis>: Die Baumansicht
        stellt eine Gesamtübersicht der betrachteten Daten in Baumform bereit.
        Innere Abhängigkeiten sind so editierbar.</para>
      </listitem>

      <listitem>
        <para><emphasis role="bold">Feature-Ansicht</emphasis>: Die Feature
        Ansicht ermöglicht den Zugriff auf alle Daten des selektierten
        Elementes.</para>
      </listitem>

      <listitem>
        <para><emphasis role="bold">Tabellen-Ansicht</emphasis>: Die
        Tabellen-Ansicht erlaubt den Zugriff auf Modellparameter bzw.
        geografische Attribute, welche gleichzeitig mit der Kartenvorlage
        verknüpft sind. Ebenfalls sind Zeitreihenwerte mit der Tabellenansicht
        darstellbar und veränderbar.</para>
      </listitem>

      <listitem>
        <para><emphasis role="bold">Diagramm-Ansicht (QuickView)</emphasis>:
        Anhand der Diagramm-Ansicht werden Zeitreihen (z.B.
        Wasserstandsganglinien oder Niederschlagsmessreihen) als Ganglinie
        oder Blockdiagramm dargestellt. In der Diagramm-Ansicht können mehrere
        Zeitreihen zugleich angezeigt werden. Zur Bearbeitung von Zeitreihen
        wird das Grafikprogramm benutzt.</para>
      </listitem>

      <listitem>
        <para><emphasis role="bold">Grafikprogramm</emphasis>: Das
        Postprocessing von Berechnungsergebnissen erfordert i.d.R. komplexe
        Operationen an Zeitreihen. Hierfür steht das Grafikprogramm zur
        Verfügung, wo u.a. mehrere Zeitreihen gleichzeitig dargestellt,
        Zeitreihen mit unterschiedlichen Ordinaten-Achsen behandelt sowie
        Zeitreihenwerte verändert werden können.</para>
      </listitem>
    </itemizedlist>

    <para>Die Ergonomie und Logik der Oberfläche ist ähnlich wie bei gängigen
    GIS-Softwareprodukten - jedoch ergänzt durch generelle Funktionen zur
    Bearbeitung und Verwaltung hydrologischer / hydraulischer Modelle (siehe
    <xref linkend="grundfunktionen" />).</para>

    <para>I.d.R. beinhaltet jede der oben genannten Ansichten ein spezifisches
    Untermenü bzw. Werkzeuge in Form von Toolbars. Z.B. umfasst die
    Karten-Ansicht Menüpunkte zum Ein- und Ausblenden von Themen oder zum
    Zoomen innerhalb der Ansicht (siehe <xref
    linkend="ansichtssteuerung" />).</para>

    <section id="gui-oeffnen_ansichten">
      <title>Öffnen einzelner Ansichten</title>

      <para>Der Navigator öffnet sich automatisch beim Start des Expertenmodus
      und zeigt die lokal verfügbaren Modelle an.</para>

      <para>Die Ansichten für Karten, Tabellen, Diagramme, Modellbäume und
      Modellelemente werden geöffnet, indem die jeweilige Datei - d.h.
      Kartenvorlage (*.gmt), GIS-Tabelle (*.gtt), Diagramm (*.odt) oder
      Zeitreihentabelle (*.ott), Baumvorlage (*.gmv) oder Elementvorlage
      (*.gft) - im Navigator ausgewählt wird. Wenn dabei die rechte Maustaste
      gedrückt wird, kann über <guimenuitem>Öffnen mit</guimenuitem> ein für
      den Dateityp speziell konfigurierter Editor gewählt werden. Z.B. ist
      dies im Falle der Karten-Ansicht der KALYPSO Karten-Editor (siehe <xref
      linkend="gis_view_editor" />) und bei Tabellen der KALYPSO
      Tabellen-Editor.</para>

      <figure id="gis_view_editor">
        <title>Öffnen einer Karte anhand des Karten-Editors</title>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="img/gui/GISviewEditor.png"
                       scale="50" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>Zusätzlich zum jeweils speziell konfigurierten Editor stehen auch
      Editoren zur Verfügung, welche das Editieren des ursprünglichen XML-
      bzw. GML-Formats erlauben. Neben dem einfachen Texteditor kann eine
      Gesamtübersicht der Inhalte einer GML-Datei mit der KALYPSO Standard
      Baumansicht oder dem KALYPSO Standard Feature Editor erreicht
      werden.</para>

      <para>Bei Doppelklick mit der linken Maustaste auf die zu öffnende Datei
      wird derjenige Editor zum Öffnen benutzt, mit dem die Datei zuletzt
      aufgerufen wurde. Bei bestimmten Dateitypen (z.B. Zeitreihen (*.zml))
      wird bei Doppelklick auf die Datei ein Vorlagenauswahl-Fenster geöffnet.
      Hier besteht die Möglichkeit, die Datei unterschiedlich zu visualisieren
      (Tabelle, Diagramm).</para>

      <para><emphasis role="bold">Hinweis</emphasis>: Eine Datei kann nur
      einmal geöffnet werden und folglich nicht parallel mit unterschiedlichen
      Editoren bearbeitet werden.</para>
    </section>

    <section id="arbeiten_mit_ansichten">
      <title>Arbeiten mit mehreren Ansichten</title>

      <para>Zur Bearbeitung von Modelldaten oder Zeitreihen ist das Arbeiten
      mit mehreren Ansichten sinnvoll, sodass z.B. die geografischen
      Informationen und Modelldaten in der Karten-Ansicht simultan mit der
      Tabellen-Ansicht angezeigt werden können. Dabei sind die Ansichten
      gekoppelt, d.h., der in der Tabelle selektierte Bezugspunkt bzw. das
      Gebiet wird gleichzeitig in der Karte markiert und umgekehrt. Somit
      lässt sich in der Modellbearbeitung permanent ein Lagebezug
      herstellen.</para>

      <figure id="gis_view_multi">
        <title>Parallele Ansicht von Karte und Tabelle</title>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="img/gui/Mehrere_Ansichten.png"
                       scale="50" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>Karten und Tabellen können in der Gesamtansicht parallel wie folgt
      angezeigt werden:</para>

      <itemizedlist>
        <listitem>
          <para>Karte und Tabelle nacheinander mit KALYPSO Karten-Editor und
          Tabellen-Editor öffnen. Karte und Tabelle werden sich danach
          überlagern. Zwischen den Ansichten kann durch Mausklick auf den
          Karten- oder Tabellennamen in der oberen Leiste des Ansichtsfensters
          gewechselt werden.</para>
        </listitem>

        <listitem>
          <para>Durch Klick mit der linken Maustaste auf den Karten- oder
          Tabellennamen in der oberen Leiste des Ansichtsfensters und
          nachfolgendem Ziehen des Cursors - linke Maustaste dabei gedrückt
          halten - auf die seitlichen Berandungen des Ansichtsfensters oder in
          Nachbaransichten hinein, lassen sich die Ansichten beliebig vertikal
          oder horizontal zueinander anordnen. Die Anordnung wird vollzogen,
          sobald die linke Maustaste losgelassen wird.</para>
        </listitem>
      </itemizedlist>

      <para>Geöffnete Ansichten werden durch Mausklick in das jeweilige
      Ansichtsfenster aktiviert. Die aktive Ansicht wird durch farbliche
      Hervorhebung des Ansichtsnamens (und des -rahmens) in der oberen
      Ansichtsleiste markiert.</para>

      <para>Die geöffneten Ansichten können geschlossen werden, indem z.B. mit
      der Maus auf das Kreuz neben dem Ansichtsnamen in der oberen
      Ansichtsleiste geklickt wird.</para>

      <para id="menu_fenster">Generell können die Ansichtsfenster auch über
      das Menü <guimenu>Fenster</guimenu> im Hauptmenü von KALYPSO gesteuert
      werden (siehe <xref linkend="fenster" />).</para>

      <figure id="fenster">
        <title>Menü Fenster zur Ansichtsteuerung</title>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="img/gui/expert_fenster.png"
                       scale="50" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>Zum Verständnis der Funktionen im Menü <guimenu>Fenster</guimenu>
      muss der Unterschied zwischen Perspektive und Sicht erläutert werden.
      Perspektive ist der Oberbegriff. Die Gesamtansicht des KALYPSO Modeler
      (Expertenmodus) definiert beispielsweise eine Perspektive. Auch die
      Hochwasser-Vorhersage und die Zeitreihen-Ablage repräsentieren jeweils
      eine Perspektive. Die einzelnen Perspektiven setzen sich aus mehreren
      (An)Sichten zusammen.</para>

      <para>Mit dieser Begriffserläuterung ist das Menü
      <guimenu>Fenster</guimenu> selbsterklärend. Damit lassen sich
      Perspektiven und Sichten beliebig Ergänzen, Maximieren, Speichern,
      Schließen, etc.</para>
    </section>
  </section>

  <section id="ansichtssteuerung">
    <title>KALYPSO-Ansichten</title>

    <indexterm>
      <primary>KALYPSO-Ansichten</primary>
    </indexterm>

    <para id="para2">Die verschiedenen Ansichten in KALYPSO beinhalten
    generell Untermenüs, die u.a. die Navigation innerhalb der Ansicht
    ermöglichen. Die wichtigsten und speziell auf die Darstellung und
    Bearbeitung hydrologischer / hydraulischer Modelle zielenden Ansichten und
    ihre Anpassungsmöglichkeiten werden nachfolgend erläutert.</para>

    <section>
      <title>Ansicht-Vorlagen</title>

      <para>Das Arbeiten mit unterschiedlichen Ansichten setzt Kenntnisse über
      das Arbeiten mit Ansicht-Vorlagen voraus. Prinzipiell ist in KALYPSO
      vorgesehen, nicht auf die Originaldaten zurückzugreifen und diese zu
      editieren, sondern mit Vorlagen zu arbeiten, die Informationen über die
      Darstellungsweise bestimmter Modell-Dateien enthalten. In KALYPSO sind
      Vorlagen definiert, die das Visualisieren von Modelldaten in Form von
      Karten, Diagrammen und Tabellen ermöglichen. Im Einzelnen existieren
      folgende Vorlagen:</para>

      <itemizedlist>
        <listitem>
          <para>Kartenvorlage <xref linkend="menu_karte" /> (*.gmt)</para>

          <para>Diese Vorlage dient zum Visualisieren von Modelldaten in einer
          Kartendarstellung.</para>
        </listitem>

        <listitem>
          <para>Tabellenvorlage (*.gtt)</para>

          <para>Modelldaten werden in Form von Tabellen dargestellt.</para>
        </listitem>

        <listitem>
          <para>Baumvorlage (*.gmv)</para>

          <para>Diese Vorlage visualisiert die Modelldaten in Form eines
          Baumes. Innere Abhängigkeiten sind so editierbar.</para>
        </listitem>

        <listitem>
          <para>Feature(Element)vorlage (*.gft)</para>

          <para>Diese Vorlage dient der Ansicht einzelner Elemente. Sie stellt
          eine Gesamtübersicht der Daten eines Elementes dar.</para>
        </listitem>

        <listitem>
          <para>Zeitreihentabelle (*.ott)</para>

          <para>Die Werte von Zeitreihen im ZML-Format werden in Form einer
          Tabelle dargestellt. Die Werte sind in der Tabelle
          editierbar.</para>
        </listitem>

        <listitem>
          <para>Zeitreihendiagramm (*.odt)</para>

          <para>Zeitreihen im ZML-Format werden in einem Diagramm angezeigt.
          Optional kann auch die Bearbeitung der Zeitreihe mit Hilfe des
          Grafikprogramms erfolgen.</para>
        </listitem>
      </itemizedlist>

      <para>Die Vorlagen sind teilweise durch den Benutzer editierbar, sodass
      eine Erstellung und Änderung von Formatvorlagen nach eigenen
      Erfordernissen möglich ist. In den folgenden Abschnitten sind die
      Darstellungsmöglichkeiten beschrieben, die sich aus den einzelnen
      Formatvorlagen ergeben.</para>
    </section>

    <section id="menu_karte">
      <title>Karten-Ansicht</title>

      <para>Sobald eine Kartenvorlage (*.gmt) mit dem Karten-Editor geöffnet
      wird, erscheint im Hauptmenü zwischen den Menüpunkten
      <guimenu>Modell</guimenu> und <guimenu>Fenster</guimenu> ein
      zusätzlicher Menüpunkt <guimenu>Karte</guimenu> (siehe <xref
      linkend="navigation_karten_ansicht" />). Die Funktionen im Menü
      <guimenu>Karte</guimenu> sind erst ausführbar, wenn eine Karten-Ansicht
      aktiviert bzw. in diese hinein geklickt wird (Kartenname wird farblich
      hervorgehoben).</para>

      <para>Anhand der verfügbaren Funktionen kann die Darstellung vergrößert
      oder verkleinert (Zoom), der Bildausschnitt maximiert und verschoben
      (Pan) werden.</para>

      <para>Im Menü <guimenu>Karte</guimenu> kann die Editierfunktion
      (<guimenuitem>Objekt Editieren</guimenuitem>) aktiviert werden. Um
      Elemente in der Karte zu selektieren und ggf. Attribute zu verändern,
      muss zuvor das gewünschte Thema in der Gliederung-Ansicht ausgewählt und
      aktiviert werden. Die Aktivierungsfunktion befindet sich im Submenü in
      der Ansichtsleiste Gliederung.</para>

      <para>Die Gliederung-Ansicht öffnet sich i.d.R. zusammen mit der
      Karten-Ansicht, sofern dies bei der letzten Arbeitssitzung so
      eingestellt wurde (Workspace). Andernfalls kann die Gliederung über das
      Menü <menuchoice>
          <guimenu>Fenster</guimenu>

          <guimenuitem>Sicht anzeigen</guimenuitem>
        </menuchoice> geöffnet werden. In der Gliederung-Ansicht werden die
      Themen der Kartenvorlage gelistet. In Anlehnung an übliche
      GIS-Funktionalitäten können die Themen einzeln in der Karten-Ansicht an-
      und ausgeblendet werden (Häkchen vor dem Thema aktivieren bzw.
      deaktivieren), die Darstellungsreihenfolge der Themen kann verändert
      oder Themen gänzlich gelöscht werden. Letztere Funktionen sind im
      Submenü in der Ansichtsleiste Gliederung verfügbar.</para>

      <figure id="navigation_karten_ansicht">
        <title>Navigation in der Karten-Ansicht</title>

        <screenshot>
          <mediaobject>
            <imageobject>
              <imagedata align="center"
                         fileref="img/img_Sachsen/gis_karte2.png" format="PNG"
                         scale="45" />
            </imageobject>
          </mediaobject>
        </screenshot>
      </figure>

      <para>Mit Hilfe des grünen Plus-Symbols in der Werkzeugleiste der
      Gliederung kann einer Karte ein neues Thema hinzugefügt werden. Die
      Auswahl des neu hinzuzufügenden Themas wird durch einen Wizard
      vereinfacht. Es besteht die Möglichkeit im Projekt vorhandene
      (importierte) ESRI Shape Dateien, Geometriedaten aus einer GML-Instanz,
      Rasterdaten oder Daten von einem Web Feature Service bzw. Web Map
      Service hinzuzufügen. Durch einen Doppelklick auf die gewünschte
      Datenform wird der spezifische Assistent zum Datenimport gestartet
      (siehe <xref linkend="gui-layer_hinzufuegen" />).</para>

      <para>Das Layout der Karten-Ansicht bzw. der Kartenvorlage wird anhand
      des Style-Editors angepasst (siehe <xref linkend="style_editor" />).
      Dazu wird in der Gliederung-Ansicht ein Thema ausgewählt, für welches
      die Darstellung verändert werden soll. Beim Klicken auf das Plus-Symbol
      vor dem Themennamen erscheint eine Untergliederung unter dem
      Themennamen. I.d.R. gibt es unter dem Themennamen nur eine
      Untergliederung mit einer identischen Bezeichnung wie der Themenname.
      Sofern die Untergliederung mit Mausklick aktiviert wird, erscheint in
      der Ansichtsleiste Gliederung die Funktion <guimenu>Style
      ändern</guimenu>. Nur diese ist jetzt in der Ansichtsleiste verfügbar -
      alle anderen sind Grau hinterlegt. Alternativ zur Ansichtsleiste kann
      anhand Rechtsklick mit der Maus (Untergliederung des Themas muss aktiv
      sein) ein Untermenü geöffnet werden, wo <guimenu>Style
      verändern</guimenu> ausgewählt werden kann, sodass sich die
      Style-Editor-Ansicht öffnet. Mit dem Style-Editor können
      Symboldarstellungen, Farben, Fonts, etc. interaktiv verändert werden.
      Damit die Veränderungen für die Kartenvorlage wirksam werden, ist der
      veränderte Style entsprechend zu speichern.</para>

      <figure id="style_editor">
        <title>Veränderung der Karten-Ansicht / Kartenvorlage mit dem
        Style-Editor</title>

        <screenshot>
          <mediaobject>
            <imageobject>
              <imagedata align="center"
                         fileref="img/img_Sachsen/style_editor.png"
                         format="PNG" scale="45" />
            </imageobject>
          </mediaobject>
        </screenshot>
      </figure>

      <para>Die vorgenommenen Änderungen an der Karten-Ansicht werden in der
      aufgerufenen Kartenvorlage aktualisiert, sobald die Speicherung
      durchgeführt wird, sodass die Änderungen an der Ansicht für spätere
      Aufrufe der Kartenvorlage wirksam sind.</para>

      <para>Eine neue Karte kann im Projekt durch den Menüpunkt <menuchoice>
          <guimenu>Datei</guimenu>

          <guisubmenu>Neu</guisubmenu>

          <guimenuitem>Andere</guimenuitem>
        </menuchoice> hinzugefügt werden. Hierzu ist der Assistent GisMapView
      unter dem Ordner Andere auszuwählen (siehe <xref
      linkend="pic_neue_karte" />). Mit Hilfe des Assistenten kann der
      Speicherort sowie der Name der neuen Karte bestimmt werden.<figure
          id="pic_neue_karte">
          <title>Neue Karte erzeugen</title>

          <mediaobject>
            <imageobject>
              <imagedata align="center" fileref="img/gui/gis_neue_karte.png"
                         scale="60" />
            </imageobject>
          </mediaobject>
        </figure></para>

      <section id="gui-layer_hinzufuegen">
        <title>Layer hinzufügen</title>

        <para>In einer neuen oder auch bestehenden Karte kann ein Layer mit
        Hilfe des plus Symbols hinzugefügt werden.</para>

        <figure>
          <title>Button Layer hinzufügen</title>

          <mediaobject>
            <imageobject>
              <imagedata align="center"
                         fileref="img/gui/Button-Layer_hinzufuegen.png"
                         scale="80" />
            </imageobject>
          </mediaobject>
        </figure>

        <para>Der neue Layer kann hierbei aus verschiedenen
        Informationsquellen innerhalb des Arbeitsverzeichnisses oder durch
        Anbindung eines Web Services eingebunden werden. Hierzu ist der
        entsprechende Assistent durch Doppelklick im Auswahlfenster zu
        starten. Im dann folgenden quellspezifischen Dialog wird die
        Datenquelle eingebunden.</para>

        <figure>
          <title>Auswahl der Datenquelle</title>

          <mediaobject>
            <imageobject>
              <imagedata align="center"
                         fileref="img/gui/layer_import_auswahl.png" scale="80" />
            </imageobject>
          </mediaobject>
        </figure>
      </section>
    </section>

    <section>
      <title>Baumansicht</title>

      <para>Sobald eine Baumvorlage (*.gmv) mit dem Baum-Editor oder eine
      GML-Datei mit Hilfe der Standard Baumansicht geöffnet wird , erscheint
      im Hauptmenü zwischen den Menüpunkten <guimenu>Modell</guimenu> und
      <guimenu>Fenster</guimenu> ein zusätzlicher Menüpunkt
      <guimenu>Baum</guimenu> (siehe <xref
      linkend="navigation_tabellen_ansicht" />). Die Funktionen im Menü
      <guimenu>Baum</guimenu> sind erst ausführbar, wenn eine Baum-Ansicht
      aktiviert bzw. in diese hinein geklickt wird (Baumname wird farblich
      hervorgehoben).</para>

      <figure>
        <title>Navigation in der Baumansicht</title>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="img/gui/gui-navi_baum.png"
                       scale="45" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>Die Baumansicht dient dem allgemeinen Überblick der gesamten
      Projektverknüpfung. Sie stellt die Verbindungen, Ableitungen und
      Verknüpfungen im Modell in einer geordneten abwärts gerichteten
      Baumstruktur dar. Primäre Funktionen im Baum sind das Hinzufügen und
      Löschen von Elementen (Features), welche durch Klicken der rechten
      Maustaste im Kontextmenü verfügbar werden. Zudem wird durch die Funktion
      <guimenuitem>Feature editieren</guimenuitem> eine direkte Bearbeitung
      der Einzelelemente durch die Verknüpfung mit dem Feature Editor
      möglich.</para>

      <figure>
        <title>Kontextmenu in der Baumansicht</title>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="img/gui/gui-baum_menue.png"
                       scale="80" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>

    <section>
      <title>Feature (Element) Ansicht</title>

      <para>Die Feature Ansicht ist eine flexibel gestaltete Ansicht zur
      Betrachtung einzelner Elemente oder Elementgruppen. Das Öffnen der
      Ansicht ist aufgrund der Flexibilität durch verschiedenste Optionen
      möglich, welche im Folgenden aufgeführt werden:</para>

      <itemizedlist>
        <listitem>
          <para>Öffnen einer GML-Datei mit Hilfe des Standard Feature
          Editors</para>
        </listitem>

        <listitem>
          <para>Öffnen einer *.gft Datei mit dem Feature Editor</para>
        </listitem>

        <listitem>
          <para>Ansicht der selektierten Elemente (Karte, Tabelle) in der
          geöffneten Feature View Ansicht</para>
        </listitem>
      </itemizedlist>

      <figure>
        <title>Öffnen der Feature View Ansicht auf selektierte
        Elemente</title>

        <mediaobject>
          <imageobject>
            <imagedata align="center"
                       fileref="img/gui/gui-featureview_karte.png" scale="55" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>

    <section id="menu_tabelle">
      <title>Tabellen-Ansicht (Modellparameter)</title>

      <para>Sobald eine Tabellenvorlage (*.gtt) mit dem Tabellen-Editor
      geöffnet wird, erscheint im Hauptmenü zwischen den Menüpunkten
      <guimenu>Modell</guimenu> und <guimenu>Fenster</guimenu> ein
      zusätzlicher Menüpunkt <guimenu>Tabelle</guimenu> (siehe <xref
      linkend="navigation_tabellen_ansicht" />). Die Funktionen im Menü
      <guimenu>Tabelle</guimenu> sind erst ausführbar, wenn eine
      Tabellen-Ansicht aktiviert bzw. in diese hinein geklickt wird
      (Tabellenname wird farblich hervorgehoben).</para>

      <figure id="navigation_tabellen_ansicht">
        <title>Navigation in der Tabellen-Ansicht (Modellparameter)</title>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="img/img_Sachsen/tabelle2.png"
                       scale="45" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>Die wesentliche Funktion zur Steuerung der Tabellen-Ansicht
      besteht darin, Spalten der Tabelle ein- und auszublenden. Durch Drücken
      der rechten Maustaste in der Tabelle wird eine Auswahlliste geöffnet,
      welche alle verfügbaren Parameter aufführt. Spalten können ein- und
      ausgeblendet werden, indem die darzustellenden Spalten per Mausklick
      ausgewählt und aktiviert (Häkchen an) bzw. deaktiviert werden
      können.</para>

      <para>Die vorgenommenen Änderungen an der Tabellen-Ansicht werden in der
      aufgerufenen Tabellenvorlage aktualisiert, sobald die Speicherung
      durchgeführt wird, sodass die Änderungen an der Ansicht für spätere
      Aufrufe der Tabellenvorlage wirksam sind.</para>

      <para>Zum Speichern von geänderten Daten innerhalb einer Tabelle muss
      der Menüpunkt <menuchoice>
          <guimenu>Tabelle</guimenu>

          <guimenuitem>Daten speichern</guimenuitem>
        </menuchoice> gewählt werden. Alternativ kann auch die entsprechende
      Schaltfläche in der Menü-Leiste benutzt werden (siehe <xref
      linkend="pic_tabelle_button" />).</para>

      <figure id="pic_tabelle_button">
        <title>Schaltflächen in der Tabellen-Ansicht</title>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="img/gui/Button-Tabelle.png"
                       scale="50" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>

    <section>
      <title>Tabellen-Ansicht (Zeitreihen)</title>

      <para>Zeitreihen im ZML-Format (*.zml) können in der KALYPSO-Oberfläche
      als Tabelle oder Diagramm geöffnet werden (siehe <xref
      linkend="navigation_ansichtsauswahl" />). Durch Doppelklick auf eine
      Zeitreihe und Auswahl von <guimenu>Standard Tabellen Editor</guimenu>
      wird die Zeitreihe in der Tabellen-Ansicht dargestellt (siehe <xref
      linkend="navigation_tabelle_zml" />).</para>

      <figure id="navigation_ansichtsauswahl">
        <title>Ansichtsauswahl beim Öffnen einer Zeitreihe</title>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="img/gui/ansichtsauswahl.png"
                       scale="50" />
          </imageobject>
        </mediaobject>
      </figure>

      <figure id="navigation_tabelle_zml">
        <title>Navigation in der Tabellen-Ansicht (Zeitreihen)</title>

        <mediaobject>
          <imageobject>
            <imagedata align="center"
                       fileref="img/gui/tabellen-ansicht_zml.png" scale="30" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>In der Tabellen-Ansicht können die Werte einer Zeitreihe editiert
      werden (Doppelklick in eine Zelle). Über das Plus- bzw. Minus-Symbol in
      der Werkzeugleiste können der Tabelle Zeilen hinzugefügt bzw. wieder
      entfernt werden.</para>

      <para>Wenn bereits eine Zeitreihe in der Tabellen-Ansicht geöffnet ist,
      können über Drag and Drop (linke Maustaste) aus dem Navigator in die
      Gliederung-Ansicht mehrere Zeitreihen dargestellt werden. Dies ist auch
      möglich, wenn es sich um Zeitreihen mit unterschiedlichen Einheiten
      handelt (Niederschlag, Abfluss, Wasserstand). Zusätzlich ist es in der
      Gliederung-Ansicht möglich, einzelne Datensätze einer Zeitreihe (z.B.
      Wasserstands- und Abflusswerte eines Pegels) individuell darstellen zu
      lassen oder in der Ansicht auszuschalten (Aktivieren bzw. Deaktivieren
      des Häkchens).</para>

      <para>Zum Speichern von geänderten Daten innerhalb einer Tabelle muss
      der Menüpunkt <menuchoice>
          <guimenu>Tabelle</guimenu>

          <guimenuitem>Daten speichern</guimenuitem>
        </menuchoice> gewählt werden. Alternativ kann auch die entsprechende
      Schaltfläche in der Menü-Leiste benutzt werden (siehe <xref
      linkend="pic_tabelle_button" />). Alle Änderungen in den Zeitreihen
      betreffen ausschließlich die lokal gespeicherte ZML-Datei.</para>

      <section id="tabellen_bearbeiten">
        <title>Bearbeiten von Tabellenwerten</title>

        <para>In der KALYPSO-Oberfläche sind einige Werkzeuge zur Bearbeitung
        von Tabellenwerten implementiert. Sie geben dem Anwender eine
        Hilfestellung beim Ausfüllen von Messlücken oder beim Einfügen von
        Werten aus externen Programmen. Die hier beschriebenen
        Bearbeitungsmöglichkeiten gelten sowohl für die Tabellen-Ansicht im
        Expertenmodus als auch im Vorhersage-Wizard (vgl. <xref
        linkend="vorhersage_wizards" />). Die Bearbeitungsfunktionen stehen in
        Form eines Kontextmenüs durch Rechtsklick auf die Tabelle zur
        Verfügung (<xref linkend="kontextmenu_tabellen" />).</para>

        <figure id="kontextmenu_tabellen">
          <title>Kontextmenü zur Bearbeitung von Tabellenwerten</title>

          <mediaobject>
            <imageobject>
              <imagedata fileref="img/img_Sachsen/kontextmenu_zeitreihen.png"
                         scale="40" />
            </imageobject>
          </mediaobject>
        </figure>

        <para>Das Bearbeiten von Tabellenwerten setzt in den meisten Fällen
        die Markierung einer oder mehrerer Zellen voraus. Zu unterscheiden ist
        hierbei zwischen dem selektierten Bereich (gelb gefärbte Zellen) und
        der gerade aktiven Zelle (graue Einfärbung).</para>

        <itemizedlist>
          <listitem>
            <para><emphasis role="bold">Alle Werte setzen</emphasis></para>

            <para>Alle Werte in einer Spalte werden durch den Wert der aktiven
            Zelle ersetzt.</para>
          </listitem>

          <listitem>
            <para><emphasis role="bold">Selektierte Werte
            setzen</emphasis></para>

            <para>Die Werte der selektierten Zellen werden durch den Wert der
            aktiven Zelle ersetzt.</para>
          </listitem>

          <listitem>
            <para><emphasis role="bold">Werte unterhalb
            setzen</emphasis></para>

            <para>Alle Tabellenwerte, die sich unterhalb der aktiven Zelle
            befinden, werden durch den Wert der aktiven Zelle ersetzt.</para>
          </listitem>

          <listitem>
            <para><emphasis role="bold">Werte oberhalb
            setzen</emphasis></para>

            <para>Alle Tabellenwerte, die sich oberhalb der aktiven Zelle
            befinden, werden durch den Wert der aktiven Zelle ersetzt.</para>
          </listitem>

          <listitem>
            <para><emphasis role="bold">Werte interpolieren</emphasis></para>

            <para>Es erfolgt eine Interpolation der Werte zwischen der
            obersten und untersten Zelle einer Auswahl. <emphasis>(Bspw.:
            Selektiert wird ein Bereich von 4 Zellen. Der Wert in der obersten
            Zelle beträgt 7, in der untersten Zelle 10. Die beiden
            dazwischenliegenden Zellen werden mit den Werten 8 und 9
            versehen).</emphasis></para>
          </listitem>

          <listitem>
            <para><emphasis role="bold">Kopieren</emphasis></para>

            <para>Die markierten Tabellenwerte werden in die Zwischenablage
            kopiert und können an anderer Stelle wieder eingefügt werden. Dies
            betrifft auch den Austausch mit anderen Programmen (z.B. Microsoft
            Excel). Die Auswahl ist spaltenübergreifend möglich.</para>
          </listitem>

          <listitem>
            <para><emphasis role="bold">Einfügen</emphasis></para>

            <para>In der Zwischenablage befindliche Werte werden an der
            markierten Position eingefügt. Der Einfügepunkt ("oben links")
            wird immer durch die aktive Zelle markiert.</para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>Entfernen / Hinzufügen von Zeilen</title>

        <para>Mit Hilfe der zwei Schaltflächen neben dem Diskettensymbol
        können einer Zeitreihen-Tabelle Zeilen hinzugefügt bzw. aus dieser
        entfernt werden. Beim Einfügen einer Zeile erscheint ein
        Eingabedialog, in dem das gewünschte Datum mit Uhrzeit angegeben wird.
        Die Zeile wird dann anhand dieser Angaben in die Tabelle eingeordnet
        und kann anschließend mit Werten belegt werden.</para>
      </section>

      <section id="zeitreihen_export">
        <title>Speichern / Exportieren von Zeitreihen</title>

        <para>Zum <emphasis role="bold">Speichern</emphasis> von geänderten
        Daten innerhalb einer Tabelle muss der Menüpunkt <menuchoice>
            <guimenu>Tabelle</guimenu>

            <guimenuitem>Daten speichern</guimenuitem>
          </menuchoice> gewählt werden. Alternativ kann auch die entsprechende
        Schaltfläche in der Menü-Leiste benutzt werden (siehe <xref
        linkend="pic_tabelle_button" />). Durch diesen Vorgang werden alle
        Änderungen einer Zeitreihe in der lokalen ZML-Datei
        gespeichert.</para>

        <para>Beim <emphasis role="bold">Export</emphasis> der Tabelle in das
        Berichtswesen über die entsprechende Schaltfläche (siehe <xref
        linkend="pic_export_zeitreihe" />) wird die Zeitreihe im CSV-Format in
        der Dokumentenstruktur abgelegt. Vom Anwender sind Metadaten
        vorzugeben, die zusammen mit den Tabellenwerten abgelegt werden.
        Optional ist wählbar, ob die gesamte Tabelle oder nur die gerade
        markierten Zeilen exportiert werden sollen.</para>

        <figure id="pic_export_zeitreihe">
          <title>Schaltfläche zum Export von Zeitreihen in das
          Berichtswesen</title>

          <mediaobject>
            <imageobject>
              <imagedata fileref="img/img_Sachsen/icon_bericht.png" />
            </imageobject>
          </mediaobject>
        </figure>
      </section>

      <section id="tabellen_kennzeichnung">
        <title>Kennzeichnung von Tabellenwerten</title>

        <para>Beim Aufruf von Zeitreihen über den KALYPSO Zeitreihendienst,
        d.h. bei der HVZ Bereitstellung der Zeitreihendaten über den WISKI
        Data Provider, werden die Werte einer Zeitreihe mit einem internen
        Status versehen. Dieser ist abhängig von den Attributen aus WISKI, die
        in der Technischen Dokumentation beschrieben sind. Beim Öffnen einer
        Zeitreihe in KALYPSO mit der Tabellen-Ansicht wird der Status durch
        ein Symbol visualisiert. Die einzelnen Symbole sind mit den
        dazugehörigen Status in einer Matrix in <xref
        linkend="zeitreihensymbole" /> dargestellt. Wird kein Symbol vor dem
        Wert angezeigt, besitzt der Wert innerhalb von KALYPSO den Status
        <quote>OK</quote>.</para>

        <table id="zeitreihensymbole">
          <title>Symbole in Zeitreihen-Tabellen</title>

          <tgroup cols="3">
            <thead>
              <row>
                <entry align="center">Symbol</entry>

                <entry>Status KALYPSO</entry>

                <entry>Status WISKI</entry>
              </row>
            </thead>

            <tbody>
              <row>
                <entry></entry>

                <entry>OK</entry>

                <entry>good,estimated,unchecked,complete</entry>
              </row>

              <row>
                <entry><graphic
                fileref="img/img_Sachsen/icon_write.png" /></entry>

                <entry>Vom Benutzer geändert</entry>

                <entry></entry>
              </row>

              <row>
                <entry><graphic
                fileref="img/img_Sachsen/icon_warning.png" /></entry>

                <entry>Wert auf Gültigkeit prüfen</entry>

                <entry>suspect,missing,incomplete</entry>
              </row>

              <row>
                <entry><graphic
                fileref="img/img_Sachsen/conflict.png" /></entry>

                <entry>Wert nicht ableitbar (z.B. W/Q-Fehler)</entry>

                <entry></entry>
              </row>
            </tbody>
          </tgroup>
        </table>
      </section>
    </section>

    <section id="gui-zml_diagramm_ansicht">
      <title>Diagramm-Ansicht (Zeitreihen)</title>

      <para>Durch Doppelklick auf eine Zeitreihe (*.zml) und Auswahl von
      <guimenu>Standard Diagramm Editor</guimenu> wird die Zeitreihe in der
      Diagramm-Ansicht dargestellt (siehe <xref
      linkend="navigation_diagramm_ansicht" />).</para>

      <para>Die Diagramm-Ansicht dient ausschließlich der schnellen Übersicht
      und Darstellung von Zeitreihen. Die Möglichkeit der
      Zeitreihenbearbeitung ist mit dem Werkzeug nicht vorgesehen. Zur
      komplexen Zeitreihenbearbeitung mittels Zeitreihen-Vorlagen (*.odt)
      steht das Grafikprogramm (siehe <xref
      linkend="zeitreihen_bearbeiten" />) zur Verfügung.</para>

      <para>Wenn bereits eine Zeitreihe in der Diagramm-Ansicht dargestellt
      ist, dann können über Drag and Drop (linke Maustaste) aus dem Navigator
      in die Gliederung-Ansicht mehrere Zeitreihen dargestellt werden.
      Voraussetzung ist allerdings, dass die Zeitreihen die gleiche Einheit
      auf der Ordinaten-Achse vorweisen. Zusätzlich ist es in der
      Gliederung-Ansicht möglich, einzelne Datensätze einer Zeitreihe (z.B.
      Wasserstands- und Abflusswerte eines Pegels) individuell darstellen zu
      lassen oder in der Ansicht auszuschalten (Aktivieren bzw. Deaktivieren
      des Häkchens).</para>

      <para>Zum Entfernen einer Zeitreihe aus der Diagramm-Ansicht dient das
      rote Kreuz oben rechts in der Gliederung-Ansicht.</para>

      <figure id="navigation_diagramm_ansicht">
        <title>Navigation in der Diagramm-Ansicht (QuickView)</title>

        <mediaobject>
          <imageobject>
            <imagedata fileref="img/gui/diagramm.png" scale="50" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>Innerhalb der Diagramm-Ansicht steht eine Zoom-Funktion zur
      Verfügung. Um einen Abschnitt der Zeitreihe vergrößert darzustellen, ist
      der entsprechende Abschnitt durch Aufspannen eines Rechteckes mit der
      linken Maustaste zu markieren. Nach Setzen des ersten Zaun-Eckpunktes
      (obere linke Ecke) wird die linke Maustaste beim Aufspannen des Zaunes
      gedrückt gehalten. Um auf den Gesamtausschnitt zu zoomen, wird
      entgegengesetzt (von rechter unteren Ecke nach links oben)
      gezoomt.</para>
    </section>
  </section>

  <section>
    <title>Zeitreihenbearbeitung</title>

    <indexterm>
      <primary>Zeitreihenbearbeitung</primary>
    </indexterm>

    <para>In der KALYPSO-Oberfläche wird als Zeitreihenformat ausschließlich
    das ZML-Format unterstützt. Andere Textformate können jedoch problemlos
    über einen Import-Wizard in das ZML-Format überführt werden.</para>

    <para><emphasis role="bold">Hinweis</emphasis>: Die nachfolgend
    beschriebenen Funktionen zur Bearbeitung von Zeitreihen betreffen allein
    die lokale Datenhaltung. Ein Speichern der editierten Zeitreihen evtl. in
    ein externes Datenbanksystem (z.B. WISKI oder PSICompact) ist nicht
    vorgesehen.</para>

    <section>
      <title>Importieren von Zeitreihen</title>

      <para>Liegt eine externe Zeitreihe im Dateisystem vor, so kann diese im
      Navigator durch die Importfunktion, welche durch das Menü der rechten
      Maustaste bereitgestellt wird, in das ZML-Format konvertiert werden.
      Hierzu ist als Importquelle <guimenuitem>Zeitreihen aus externen
      Dateien</guimenuitem> auszuwählen (siehe <xref
      linkend="gui_zml-import" />). Die Quellzeitreihe wird mit Speicherort
      und Format festgelegt und dann abhängig vom Format (Datentyp &amp;
      Datenformat) in die Zielzeitreihe (ZML-Zeitreihe) konvertiert.</para>

      <figure id="gui_zml-import">
        <title id="zeitreihenimport">Zeitreihenimport</title>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="img/gui/gui-zml_import.png"
                       scale="70" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>Zurzeit werden hierbei folgende Ausgangsformate
      unterstützt:</para>

      <itemizedlist>
        <listitem>
          <para>"grap"-Format</para>

          <para>Datentyp: Niederschlag - N, Abfluss - Q, Temperatur - T,
          Verdunstung - E, Wasserstand - W, Volumen - V</para>

          <para>Datenformat: Wertepaare mit Datum, Uhrzeit (sekundengenau) und
          Wert (durch Punkt getrennt).</para>

          <para>dd MM yyyy HH mm ss Wert1 dd MM yyyy HH mm ss Wert2</para>

          <para>Beispiel:</para>

          <para>01.01.1971 07:30:00 0.100 02.01.1971 07:30:00 0.000 03.01.1971
          07:30:00 0.000</para>
        </listitem>

        <listitem>
          <para>"csv"-Format</para>

          <para>Datentyp: Niederschlag - N, Abfluss - Q</para>

          <para>Datenformat: Wertepaare mit Datum, Uhrzeit (minutengenau) und
          Wert (durch Komma getrennt).</para>

          <para>dd MM yyyy HH mm Wert1 dd MM yyyy HH mm Wert2</para>

          <para>Beispiel:</para>

          <para>02.06.2002 16:30;0,0010 02.06.2002 17:30;0,0005</para>
        </listitem>

        <listitem>
          <para>"dat"-Format</para>

          <para>Datentyp: Abfluss - E</para>

          <para>Datenformat: Wertepaare mit Datum, Uhrzeit (sekundengenau) und
          Wert (durch Komma getrennt).</para>

          <para>dd MM yyyy HH mm ss Wert1 dd MM yyyy HH mm ss Wert2</para>

          <para>Beispiel:</para>

          <para>01.01.1971 07:30:00 0,1 02.01.1971 07:30:00 0 03.01.1971
          07:30:00 0</para>
        </listitem>

        <listitem>
          <para>"ex2"-Format</para>

          <para>Datentyp: Verdunstung - E</para>

          <para>Datenformat: Wertepaare mit Datum, Stunde und Wert (durch
          Punkt getrennt).</para>

          <para>dd MM yyyy HH Wert1 dd MM yyyy HH Wert2</para>

          <para>Beispiel:</para>

          <para>01 01 1971 12 0.127 02 01 1971 12 0.302 03 01 1971 12
          0.136</para>
        </listitem>
      </itemizedlist>

      <para><emphasis role="bold">Hinweis</emphasis>: Bei der Funktion
      Zeitreihenimport handelt es sich in erster Linie um ein
      Konvertierungs-Werkzeug, das die Sicht auf beliebige Zeitreihen
      innerhalb von KALYPSO erlaubt. Für einen weiter gehenden Import bzw. die
      tatsächliche Verknüpfung von Zeitreihen mit dem hydrologischen /
      hydraulischen Modell bedarf es jedoch weiterer Arbeitsschritte (siehe
      <xref linkend="zeitreihen_repository" /> ).</para>
    </section>

    <section id="zeitreihen_bearbeiten">
      <title>Bearbeiten von Zeitreihen (Grafikprogramm)</title>

      <para>Neben der Darstellung der Zeitreihen in der Diagramm-Ansicht
      beinhaltet die Oberfläche von KALYPSO auch ein Werkzeug zum Bearbeiten
      von Zeitreihen. Das Grafikprogramm bietet vielfältige Möglichkeiten zur
      Visualisierung, Bearbeitung und Auswertung von Zeitreihen. Für
      weitergehende Informationen wird an dieser Stelle auf die Online-Hilfe
      des Grafikprogramms verwiesen.</para>

      <para>Um das Grafikprogramm aus der KALYPSO-Oberfläche zu starten,
      können die zu öffnenden Zeitreihen direkt mit dem Grafikprogramm
      geöffnet oder in einer Diagramm-Vorlage (*.odt) abgespeichert werden.
      Dies kann unter <menuchoice>
          <guimenu>Datei</guimenu>

          <guimenuitem>Speichern unter</guimenuitem>
        </menuchoice> bei aktivierter Diagramm-Ansicht geschehen.
      Diagramm-Vorlagen können in einem beliebigen Ordner im lokalen
      Arbeitsbereich gespeichert werden. Zu beachten ist, dass die Dateiendung
      *.odt beim Speichern mit angegeben werden muss.</para>

      <para>Wird eine Diagramm-Vorlage im Navigator-Fenster markiert,
      erscheint in der Werkzeug-Leiste die Schaltfläche zum Öffnen der Vorlage
      im Grafikprogramm (siehe <xref linkend="button_grafik_programm" />
      ).</para>

      <figure id="button_grafik_programm">
        <title>Schaltfläche zum Öffnen des Grafikprogramms</title>

        <mediaobject>
          <imageobject>
            <imagedata fileref="img/gui/button-grafik.png" scale="50" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>Durch Klick auf die Schaltfläche öffnet sich das Grafikprogramm
      mit den in der Diagramm-Vorlage abgespeicherten Zeitreihen.</para>
    </section>
  </section>
</chapter>