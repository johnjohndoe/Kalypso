<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Workflow URI="org.kalypso.model.flood.WF_KalypsoFlood"
	xmlns="http://www.renew.de/workflow/base"
	xmlns:con="http://www.renew.de/workflow/contexts"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<Help>NONE</Help>
	<Name>KalypsoFlood-Workflow</Name>

	<TaskGroup URI="org.kalypso.model.flood.DataLoad">
		<Help><![CDATA[Grunddaten importieren und verwalten.]]></Help>
		<Name>Daten verwalten</Name>
		
	<!--		
		<Task context="ImportBaseMap"
			URI="org.kalypso.model.flood.ImportBackgroundData">
			<Help><![CDATA[Grunddaten anderer Projekte in die Karte importieren]]></Help>
			<Name><![CDATA[Grunddaten anderer Projekte in die Karte importieren]]></Name>
		</Task>
	-->
	
		<Task context="ImportBaseMap"
			URI="org.kalypso.model.flood.ImportBackgroundData">
			<Help><![CDATA[Hier können Sie Hintergrunddaten (topographische Karten u.ä.) importieren.]]></Help>
			<Name>Hintergrunddaten importieren</Name>
		</Task>
		<Task context="FloodMap"
			URI="org.kalypso.model.flood.ManageWaterlevelData">
			<Help><![CDATA[Hier können Sie Wasserspiegeldaten einladen und verwalten.]]></Help>
			<Name>Wasserspiegeldaten verwalten</Name>
		</Task>
		<Task context="CoverageTheme"
			URI="org.kalypso.model.flood.ImportDTMData">
			<Help><![CDATA[Hier können Sie Geländedaten (Raster) einladen und verwalten.]]></Help>
			<Name>Geländedaten verwalten</Name>
		</Task>
	</TaskGroup>

	<TaskGroup type="SYNCHRONOUS" context="FloodMap" 
		URI="org.kalypso.model.flood.PolygonEditing">
		<Help><![CDATA[Hier können Sie die hydraulisch ermittelten Überschwemmungsgebiete anpassen.]]></Help>
		<Name>Überschwemmungsgebiete anpassen</Name>
	</TaskGroup>

	<TaskGroup context="ProcessFloodModel"
		URI="org.kalypso.model.flood.ProcessFloodModel">
		<Help><![CDATA[Startet das Prozessieren der Fließtiefen.]]></Help>
		<Name>Fließtiefen generieren</Name>
	</TaskGroup>

	<TaskGroup URI="org.kalypso.model.flood.Postprocessing">
		<Help><![CDATA[Ergebnisauswertung]]></Help>
		<Name>Ergebnisauswertung</Name>
		<Task context="FloodMap"
			URI="org.kalypso.model.flood.ExportRasterData">
			<Help><![CDATA[Hier können Sie sich die generierten Fließtiefen anzeigen lassen.]]></Help>
			<Name>Fließtiefen anzeigen</Name>
		</Task>
	</TaskGroup>

	<Perspectives>
		<con:PerspectiveContext id="ContextFloodModelling"
			perspectiveId="org.kalypso.kalypso1d2d.pjt.perspective.Perspective">
			<!-- perspectiveId="org.kalypso.flood.perspective.Perspective"> -->

			<con:ViewContext id="FeatureView"
				partId="org.kalypso.ui.views.featuretemplateview"
				parent="ContextFloodModelling">
				<con:ExtensionContext id="LanduseDatabase"
					parent="FeatureView"
					handlerFactoryId="kalypsoContextHandlerFactory">
					<con:Parameter name="type"
						value="featureViewInputContext" />
					<con:Parameter name="input"
						value="templates/landuse.gft" />
				</con:ExtensionContext>
				<con:ExtensionContext id="AssetValuesDatabase"
					parent="FeatureView"
					handlerFactoryId="kalypsoContextHandlerFactory">
					<con:Parameter name="type"
						value="featureViewInputContext" />
					<con:Parameter name="input"
						value="templates/assetValues.gft" />
				</con:ExtensionContext>
				<con:ExtensionContext id="DamageFunctionsDefinition"
					parent="FeatureView"
					handlerFactoryId="kalypsoContextHandlerFactory">
					<con:Parameter name="type"
						value="featureViewInputContext" />
					<con:Parameter name="input"
						value="templates/damageFunctions.gft" />
				</con:ExtensionContext>
			</con:ViewContext>

			<con:WorkbenchSiteContext id="MapContext"
				parent="ContextFloodModelling">
				<con:ViewContext id="MapOutlineView"
					partId="org.kalypso.ui.views.outline" parent="MapContext" />
				<con:ViewContext id="MapView"
					partId="org.kalypso.ui.views.mapView" parent="MapContext">
					<con:ExtensionContext id="BaseMap"
						parent="MapContext"
						handlerFactoryId="kalypsoContextHandlerFactory">
						<con:WizardContext id="ImportBaseMap"
							wizardId="org.kalypso.ui.wizards.imports.baseMap.ImportBaseMapWizard"
							wizardType="NEW_WIZARD" parent="BaseMap" />
						<con:Parameter name="type"
							value="mapViewInputContext" />
						<con:Parameter name="input"
							value="maps/base.gmt" />
					</con:ExtensionContext>

					<con:ExtensionContext id="FloodMap"
						parent="MapContext"
						handlerFactoryId="kalypsoContextHandlerFactory">
						<con:Parameter name="type"
							value="mapViewInputContext" />
						<con:Parameter name="input"
							value="maps/flood.gmt" />

						<con:ExtensionContext id="CoverageTheme"
							parent="FloodMap"
							handlerFactoryId="kalypsoContextHandlerFactory">
							<con:Parameter name="type"
								value="themeContext" />
							<con:Parameter name="input"
								value="{http://www.opengis.net/gml}_Coverage" />
						</con:ExtensionContext>

					</con:ExtensionContext>
				</con:ViewContext>

			</con:WorkbenchSiteContext>

			<con:ViewContext id="FeatureSelectionView"
				partId="org.kalypso.featureview.views.FeatureView"
				parent="ContextFloodModelling" />

		</con:PerspectiveContext>
	</Perspectives>
</Workflow>