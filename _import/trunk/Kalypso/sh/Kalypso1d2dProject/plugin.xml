<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
   
   <extension
         id="org.kalypso.kalypso1d2d.pjt.Kalypso1d2dProjectPlugin"
         point="org.eclipse.core.runtime.applications">
      <application>
         <run
               class="org.kalypso.kalypso1d2d.pjt.Kalypso1d2dProjectPlugin">
         </run>
      </application>
   </extension>
   
   
   <!-- Project extensions -->
   <extension
      point="org.eclipse.core.resources.natures"
      id="org.kalypso.kalypso1d2d.pjt.Kalypso1D2DProjectNature"
      name="Kalypso1D2DProjectNature">
      <runtime>
         <run class="org.kalypso.kalypso1d2d.pjt.Kalypso1D2DProjectNature"/>
      </runtime>
   </extension>

	<extension
       point="org.eclipse.ui.newWizards">
		<category
            id="org.kalypso.wizard"
            name="K1d2dPjt"
            parentCategory="org.kalypso.ui.newwizards.kalypso"/>
		<wizard name="Kalypso1D2DNewProjectWizard"
		icon="icons/kalypso1d2d.png"
		class="org.kalypso.kalypso1d2d.pjt.Kalypso1D2DNewProjectWizard"
		project="true"
		id="org.kalypso.kalypso1d2d.pjt.Kalypso1D2DNewProjectWizard">
		<description>
				Creates a new project
		</description>
		</wizard>
		<wizard
            class="org.kalypso.ui.wizards.imports.baseMap.ImportBaseMapWizard"
            icon="icons/kalypso_gmt.gif"
            id="org.kalypso.ui.wizards.imports.baseMap.ImportBaseMapWizard"
            name="BaseMap"
            project="false"/>
	</extension>
	
	<!-- perspectives-->
	<extension
         point="org.eclipse.ui.perspectives">
      <perspective
            class="org.kalypso.kalypso1d2d.pjt.perspective.Perspective"
            icon="icons/kalypso1d2d.png"
            id="org.kalypso.kalypso1d2d.pjt.perspective.Perspective"
            name="Kalypso 1d2d">
      </perspective>      
   </extension>
   
   <extension
         name="Workflow Views"
         point="org.eclipse.ui.views">
      <view
            allowMultiple="false"
            class="org.kalypso.kalypso1d2d.pjt.views.SimulationModelDBView"
            icon="icons/tree.gif"
            id="org.kalypso.kalypso1d2d.pjt.views.SimulationModelDBView"
            name="Szenarien"/>
       <view
             allowMultiple="false"
             class="org.kalypso.kalypso1d2d.pjt.views.WorkflowView"
             icon="icons/nuvola_select/loop.png"
             id="org.kalypso.kalypso1d2d.pjt.views.WorkflowView"
             name="AktivitÃ¤ten"/>         
   </extension>
   
   	
   	<extension
    	point = "org.eclipse.ui.viewActions">
    	<viewContribution 
    		id="org.kalypso.kalypso1d2d.pjt.views.SimulationModelDBViewActionsContrib" 
    		targetID="org.kalypso.kalypso1d2d.pjt.views.SimulationModelDBView">
    		<action
	            icon="icons/nuvola_select/edit_add.png"
	            id="org.kalypso.kalypso1d2d.pjt.actions.AddNewSimulationModelActionDelegate"
	            label="AddSM"
	            menubarPath="1d2d"
	            toolbarPath="1d2d"
	            tooltip="Add simulation modell"> 
	            <class class="org.kalypso.ui.GenericCommandActionDelegate">
	            	<parameter name="commandId" 
                         value="org.kalypso.kalypso1d2d.pjt.actions.AddScenario"/>
	            </class>
             </action>
             <action	            
	            icon="icons/nuvola_select/edit_remove.png"
	            id="org.kalypso.kalypso1d2d.pjt.actions.RemoveWorkflowData"
	            label="Remove model Data"
	            menubarPath="1d2d"
	            toolbarPath="1d2d"
	            tooltip="Remove model data"> 
	            <class class="org.kalypso.ui.GenericCommandActionDelegate">
	            	<parameter name="commandId" 
                         value="org.kalypso.kalypso1d2d.pjt.actions.RemoveScenario"/>
	            </class>
             </action>
        </viewContribution>
     </extension>
     
     <extension point="org.eclipse.ui.handlers">
     
     <!--*** Element2D context handler ***-->
		 <handler
		       class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler"
		       commandId="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand#Element2D">
		    <activeWhen>   
		       <with variable="activeContexts">
		          <iterate operator="or">
		             <equals value="{http://www.tu-harburg.de/wb/kalypso/schemata/1d2d}Element2D"/>
		          </iterate>
		       </with>
		     </activeWhen>
		 </handler>
		 
     <!--*** Element1D context handler ***-->
		 <handler
		       class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler"
		       commandId="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand#Element1D">
		    <activeWhen>   
		       <with variable="activeContexts">
		          <iterate operator="or">
		             <equals value="{http://www.tu-harburg.de/wb/kalypso/schemata/1d2d}Element1D"/>
		          </iterate>
		       </with>
		    </activeWhen>
		 </handler>
		 
     <!--*** _FlowRelationship (Parameters1D) context handler ***-->		 
		 <handler
	           class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler"
	           commandId="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand#Parameters1D">
		     <activeWhen>
		         <with variable="activeContexts">
		            <iterate operator="or">
		               <equals value="{http://www.tu-harburg.de/wb/kalypso/schemata/simulationbase}_FlowRelationship"/>
		            </iterate>
		         </with>
		     </activeWhen>
		 </handler>
	
	 <!--*** BoundaryCondition context handler ***-->	 
		 <handler
		       class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler"
         commandId="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand#NodalBCDef">
              <activeWhen>
                 <with variable="activeContexts">
                    <iterate operator="or">
                       <equals value="{http://www.tu-harburg.de/wb/kalypso/schemata/operationalmodel}BoundaryCondition"/>
                    </iterate>
                 </with>
              </activeWhen>
         </handler>
		 <handler
		       class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler"
		       commandId="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand#ContinuityLine">
		    <activeWhen>   
		        <with variable="activeContexts">
		          <iterate operator="or">
		             <equals value="{http://www.tu-harburg.de/wb/kalypso/schemata/1d2d}ContinuityLine"/>
		          </iterate>
		       </with>
		    </activeWhen>
		 </handler>

 	 <!--*** handlers for scenario management ***-->			   
	     <handler
	           class="org.kalypso.kalypso1d2d.pjt.actions.AddScenarioHandler"
	           commandId="org.kalypso.kalypso1d2d.pjt.actions.AddScenario"/>
	     <handler
	           class="org.kalypso.kalypso1d2d.pjt.actions.RemoveScenarioHandler"
	           commandId="org.kalypso.kalypso1d2d.pjt.actions.RemoveScenario"/>	     

 	 <!--*** import handlers ***-->
 	 	 <handler 
	           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#DataLoad">
	        <class class="org.kalypso.kalypso1d2d.pjt.actions.OpenMapViewCommandHandler">
	           <parameter
	                 name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.resource"
	                 value="maps/base.gmt"/>
	           <parameter
	                 name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.layer"
	                 value="NO_LAYER"/>
	        </class>
	     </handler>
	     <handler
	           class="org.kalypso.kalypso1d2d.pjt.actions.ImportBaseMapHandler"
	           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#MapLoad"/>
	     <handler
	           class="org.kalypso.kalypso1d2d.pjt.actions.ImportElevationHandler"
	           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#ElevLoad"/>			   	           
	     <handler
	           class="org.kalypso.kalypso1d2d.pjt.actions.ImportRoughnessHandler"
	           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#RoughLoad"/>
	     <handler
	           class="org.kalypso.kalypso1d2d.pjt.actions.ImportObservationHandler"
	           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#TimeSerLoad"/>
	     <handler
	           class="org.kalypso.kalypso1d2d.pjt.actions.ImportLineShpHandler"
	           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#ShapeImport"/>	           

 	 <!--*** general net editing handler ***-->	     
	     <handler
	           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#NetCstr">
	        <class class="org.kalypso.kalypso1d2d.pjt.actions.OpenMapViewCommandHandler">
	           <parameter
	                 name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.resource"
	                 value="maps/fenet.gmt"/>
	           <parameter
	                 name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.layer"
	                 value="NO_LAYER"/>
	        </class>
	     </handler>
	     
 	 <!--*** 1D-editing handlers ***-->	     
	     <handler commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#Net1DRivGroup">
	        <class class="org.kalypso.kalypso1d2d.pjt.actions.OpenMapViewCommandHandler">
	           <parameter
	                 name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.resource"
	                 value="maps/fenet.gmt"/>
	           <parameter
	                 name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.layer"
	                 value="NO_LAYER"/>
	        </class>
	     </handler>
	     <handler
	           class="de.renew.workflow.NullWorkflowCommandHandler"
	           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#Net1DImport"/>
	     <handler
	           class="org.kalypso.kalypso1d2d.pjt.actions.ImportWSPMHandler"
	           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#Net1DImportWspm"/>
	     <handler
               class="org.kalypso.kalypso1d2d.pjt.actions.AddProfileToMapHandler"
               commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#AddProfileNetworkToMap"/>	           	           
	     <handler
	     	   commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#Edit1DNet">
         	<class class="org.kalypso.kalypso1d2d.pjt.actions.OpenMapViewCommandHandler">
	            <parameter
	                  name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.resource"
	                  value="maps/fenet.gmt"/>
	            <parameter
	                  name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.layer"
	                  value="{http://www.tu-harburg.de/wb/kalypso/schemata/1d2d}Element1D"/>
	        </class>
      	 </handler>
	     <handler commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#Edit1DNetParameters">
	        <class class="org.kalypso.kalypso1d2d.pjt.actions.OpenMapViewCommandHandler">
	            <parameter
	                  name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.resource"
	                  value="maps/fenet.gmt"/>
	            <parameter
	                  name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.layer"
	                  value="{http://www.tu-harburg.de/wb/kalypso/schemata/simulationbase}_FlowRelationship"/>
	        </class>
	     </handler>
	     
 	 <!--*** 2D-editing handlers ***-->	     
	     <handler
	           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#Net2DGroup">
	        <class class="org.kalypso.kalypso1d2d.pjt.actions.OpenMapViewCommandHandler">
	           <parameter
	                 name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.resource"
	                 value="maps/fenet.gmt"/>
	           <parameter
	                 name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.layer"
	                 value="{http://www.tu-harburg.de/wb/kalypso/schemata/1d2d}Element2D"/>
	        </class>
	     </handler>
	     <handler
	           class="org.kalypso.kalypso1d2d.pjt.actions.ImportDiscreatisationModel1D2DHandler"
	           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#Net2DImport"/>	           
	     <handler
	           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#Chan2DGen">
           <class class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler">
	           <parameter
	                 name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.widget"
	                 value="org.kalypso.kalypsomodel1d2d.ui.map.channeledit.CreateMainChannelWidget"/>
	           <parameter
	                 name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.plugin"
	                 value="org.kalypso.model1d2d"/>
           </class>
	     </handler>
	     <handler
	           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#BandGen">
           <class class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler">
	           <parameter
	                 name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.widget"
	                 value="org.kalypso.kalypsomodel1d2d.ui.map.grid.CreateGridWidget"/>
	           <parameter
	                 name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.plugin"
	                 value="org.kalypso.model1d2d"/>
           </class>
	     </handler>
	     <handler
	     	   commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#AssignElevs">
           <class class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler">
	           <parameter
	                 name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.widget"
	                 value="org.kalypso.kalypsomodel1d2d.ui.map.temsys.ApplyElevationWidget"/>
	           <parameter
	                 name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.plugin"
	                 value="org.kalypso.model1d2d"/>
           </class>
	     </handler>

 	 <!--*** 1D/2D transition handlers ***-->	     	     	     	     	     	     	     
	     <handler commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#SetEltLineTrans">
	           <class class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler">
		           <parameter
		                 name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.widget"
		                 value="org.kalypso.kalypsomodel1d2d.ui.map.junction1d2d.CreateJunctionFromClAnd1DEleWidget"/>
		           <parameter
		                 name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.plugin"
		                 value="org.kalypso.model1d2d"/>
	        </class>
	     </handler>	     
	     <handler commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#SetEltEltTrans">
	           <class class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler">
		           <parameter
		                 name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.widget"
		                 value="org.kalypso.kalypsomodel1d2d.ui.map.junction1d2d.CreateJunctionFromSelectedEdges"/>
		           <parameter
		                 name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.plugin"
		                 value="org.kalypso.model1d2d"/>
	        </class>
	     </handler>
	     
 	 <!--*** roughness handlers ***-->	     	     	     	     	     	     
	     <handler commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#ZoneDefGroup">
	        <class class="org.kalypso.kalypso1d2d.pjt.actions.OpenMapViewCommandHandler">
	            <parameter
	                  name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.resource"
	                  value="maps/roughness.gmt"/>
	            <parameter
	                  name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.layer"
	                  value="{http://www.tu-harburg.de/wb/kalypso/schemata/1d2d}RoughnessPolygon"/>
	        </class>
	     </handler>
	     <handler commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#ClassDefGroup">
	    	  <class class="org.kalypso.kalypso1d2d.pjt.actions.OpenFeatureViewCommandHandler">
	          	 <parameter
	                   name="org.kalypso.kalypso1d2d.pjt.OpenFeatureViewCommand.resource"
	                   value="templates/roughness.gft"/>           
		       </class>
	     </handler>
	     
 	 <!--*** boundary conditions handlers ***-->	     	     	     	     	     	     	     
	     <handler commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#BCDef">
	        <class class="org.kalypso.kalypso1d2d.pjt.actions.OpenMapViewCommandHandler">
	            <parameter
	                  name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.resource"
	                  value="maps/fenet.gmt"/>
	            <parameter
	                  name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.layer"
	                  value="{http://www.tu-harburg.de/wb/kalypso/schemata/1d2d}BoundaryCondition"/>
	        </class>
	     </handler>   

 	 <!--*** calculation handlers ***-->	     	     	     	     	     	     	     
	     <handler commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#CalcSet">
	    	  <class class="org.kalypso.kalypso1d2d.pjt.actions.OpenFeatureViewCommandHandler">
	          	 <parameter
	                   name="org.kalypso.kalypso1d2d.pjt.OpenFeatureViewCommand.resource"
	                   value="templates/control.gft"/>           
		       </class>
	     </handler>     
	</extension>
    
   <extension
           point="org.eclipse.ui.intro.configExtension">
        <configExtension
              configId="org.kalypso.model.product.configId"
              content="content/ext.xml"/>
   </extension>
</plugin>
