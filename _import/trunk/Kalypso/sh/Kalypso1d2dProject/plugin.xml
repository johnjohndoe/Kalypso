<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
   
   <extension
         id="org.kalypso.kalypso1d2d.pjt.Kalypso1d2dProjectPlugin"
         point="org.eclipse.core.runtime.applications">
      <application>
         <run
               class="org.kalypso.kalypso1d2d.pjt.Kalypso1d2dProjectPlugin">
         </run>
      </application>
   </extension>
   
   
   <!-- Project extensions -->
   <extension
      point="org.eclipse.core.resources.natures"
      id="org.kalypso.kalypso1d2d.pjt.Kalypso1D2DProjectNature"
      name="Kalypso1D2DProjectNature">
      <runtime>
         <run class="org.kalypso.kalypso1d2d.pjt.Kalypso1D2DProjectNature"/>
      </runtime>
   </extension>

	<extension
       point="org.eclipse.ui.newWizards">
		<category
            id="org.kalypso.wizard"
            name="K1d2dPjt"
            parentCategory="org.kalypso.ui.newwizards.kalypso"/>
		<wizard name="Kalypso1D2DNewProjectWizard"
		icon="icons/kalypso1d2d.png"
		class="org.kalypso.kalypso1d2d.pjt.Kalypso1D2DNewProjectWizard"
		project="true"
		id="org.kalypso.kalypso1d2d.pjt.Kalypso1D2DNewProjectWizard">
		<description>
				Creates a new project
		</description>
		</wizard>
	</extension>
	
	<!-- perspectives-->
	<extension
         point="org.eclipse.ui.perspectives">
      <perspective
            name="Kalypso 1d2d"
            class="org.kalypso.kalypso1d2d.pjt.perspective.Perspective"
            id="org.kalypso.kalypso1d2d.pjt.perspective.Perspective">
      </perspective>      
   </extension>
   
   <extension
         name="Workflow Views"
         point="org.eclipse.ui.views">
      <view
            allowMultiple="false"
            class="org.kalypso.kalypso1d2d.pjt.views.SimulationModelDBView"
            id="org.kalypso.kalypso1d2d.pjt.views.SimulationModelDBView"
            name="Szenarien"/>
      <view
            allowMultiple="false"
            class="org.kalypso.kalypso1d2d.pjt.views.ActivitiesView"
            id="org.kalypso.afgui.views.ActivitiesView"
            name="Workflow Activities View"/>
       <view
            allowMultiple="false"
            class="org.kalypso.kalypso1d2d.pjt.views.TasksView"
            id="org.kalypso.afgui.views.TasksView"
            name="Workflow Task View"/>
       <view
            allowMultiple="false"
            class="org.kalypso.kalypso1d2d.pjt.views.WorkflowView"
            id="org.kalypso.kalypso1d2d.pjt.views.WorkflowView"
            name="AktivitÃ¤ten"/>
       <view
            allowMultiple="false"
            class="org.kalypso.kalypsomodel1d2d.ui.viewer.RoughnessClsCollectionView"
            id="org.kalypso.kalypsomodel1d2d.ui.viewer.RoughnessClsCollectionView"
            name="Roughness Modeller View"/>
            
   </extension>
   
   	
   	<extension
    	point = "org.eclipse.ui.viewActions">
    	<viewContribution 
    		id="org.kalypso.kalypso1d2d.pjt.views.SimulationModelDBViewActionsContrib" 
    		targetID="org.kalypso.kalypso1d2d.pjt.views.SimulationModelDBView">
    		<action
	            icon="icons/nuvola_select/edit_add.png"
	            id="org.kalypso.kalypso1d2d.pjt.actions.AddNewSimulationModelActionDelegate"
	            label="AddSM"
	            menubarPath="1d2d"
	            toolbarPath="1d2d"
	            tooltip="Add simulation modell"> 
	            <class class="org.kalypso.ui.GenericCommandActionDelegate">
	            	<parameter name="commandId" 
                         value="org.kalypso.kalypso1d2d.pjt.actions.AddScenario"/>
	            </class>
             </action>
             <action	            
	            icon="icons/nuvola_select/edit_remove.png"
	            id="org.kalypso.kalypso1d2d.pjt.actions.RemoveWorkflowData"
	            label="Remove model Data"
	            menubarPath="1d2d"
	            toolbarPath="1d2d"
	            tooltip="Remove model data"> 
	            <class class="org.kalypso.ui.GenericCommandActionDelegate">
	            	<parameter name="commandId" 
                         value="org.kalypso.kalypso1d2d.pjt.actions.RemoveScenario"/>
	            </class>
             </action>
        </viewContribution>
     </extension>
     
     	 <extension
      point="org.eclipse.ui.handlers">
		   <handler
		         class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler"
		         commandId="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand#Element2D">
		      <activeWhen>   
		         <with variable="activeContexts">
		            <iterate operator="or">
		               <equals value="{http://www.tu-harburg.de/wb/kalypso/schemata/1d2d}Element2D"/>
		               <!--equals value="{http://www.tu-harburg.de/wb/kalypso/schemata/1d2d}PolyElement"/-->
		            </iterate>
		         </with>
		      </activeWhen>
		   </handler>
		   <handler
		         class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler"
		         commandId="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand#Element1D">
		      <activeWhen>   
		         <with variable="activeContexts">
		            <iterate operator="or">
		               <equals value="{http://www.tu-harburg.de/wb/kalypso/schemata/1d2d}Element1D"/>
		            </iterate>
		         </with>
		      </activeWhen>
		   </handler>
		   <handler
		         class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler"
		         commandId="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand#ContinuityLine">
		      <activeWhen>   
		         <with variable="activeContexts">
		            <iterate operator="or">
		               <!--equals value="{http://www.tu-harburg.de/wb/kalypso/schemata/1d2d}ContinuityLine"/-->
		               <equals value="{http://www.tu-harburg.de/wb/kalypso/schemata/1d2d}Element2D"/>
		            </iterate>
		         </with>
		      </activeWhen>
		   </handler>
     <handler
           class="org.kalypso.kalypso1d2d.pjt.actions.AddScenarioHandler"
           commandId="org.kalypso.kalypso1d2d.pjt.actions.AddScenario"/>
     <handler
           class="org.kalypso.kalypso1d2d.pjt.actions.RemoveScenarioHandler"
           commandId="org.kalypso.kalypso1d2d.pjt.actions.RemoveScenario">
     </handler>
     <handler
           class="org.kalypso.kalypso1d2d.pjt.actions.ImportBaseMapHandler"
           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#MapLoad"/>
     <handler
           class="org.kalypso.kalypso1d2d.pjt.actions.ImportRoughnessHandler"
           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#RoughLoad"/>
     <handler
           class="org.kalypso.kalypso1d2d.pjt.actions.ImportWSPMHandler"
           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#Net1DImport"/>
     <handler
           class="org.kalypso.kalypso1d2d.pjt.actions.ImportDiscreatisationModel1D2DHandler"
           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#Net2DImport"/>
     <handler
           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#Edit2DElts">
        <class class="org.kalypso.kalypso1d2d.pjt.actions.OpenMapViewCommandHandler">
           <parameter
                 name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.resource"
                 value="maps/fenet.gmt"/>
           <parameter
                 name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.layer"
                 value="{http://www.tu-harburg.de/wb/kalypso/schemata/1d2d}Element2D"/>
        </class>
     </handler>
     <handler commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#Edit1DRivElts">
        <class class="org.kalypso.kalypso1d2d.pjt.actions.OpenMapViewCommandHandler">
           <parameter
                 name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.resource"
                 value="maps/fenet.gmt"/>
           <parameter
                 name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.layer"
                 value="{http://www.tu-harburg.de/wb/kalypso/schemata/1d2d}Element1D"/>
        </class>
     </handler>
     <handler commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#RBLineDef">
        <class class="org.kalypso.kalypso1d2d.pjt.actions.OpenMapViewCommandHandler">
           <parameter
                 name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.resource"
                 value="maps/fenet.gmt"/>
           <parameter
                 name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.layer"
                 value="{http://www.tu-harburg.de/wb/kalypso/schemata/1d2d}ContinuityLine"/>
        </class>
     </handler>
     <handler
           class="org.kalypso.kalypso1d2d.pjt.actions.ImportElevationHandler"
           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#ElevLoad"/>
     <handler
           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#BandGen">
           <class class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler">
           <parameter
                 name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.widget"
                 value="org.kalypso.kalypsomodel1d2d.ui.map.grid.CreateGridWidget"/>
           <parameter
                 name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.plugin"
                 value="org.kalypso.model1d2d"/>
	       <activeWhen>   
	         <with variable="activeContexts">
	            <iterate operator="or">
	               <equals value="{http://www.tu-harburg.de/wb/kalypso/schemata/1d2d}Element2D"/>
	            </iterate>
	         </with>
	      </activeWhen>
        </class>
     </handler>
     
      <handler
           commandId="http://www.tu-harburg.de/wb/kalypso/kb/workflow/test#AssignElevs">
           <class class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler">
           <parameter
                 name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.widget"
                 value="org.kalypso.kalypsomodel1d2d.ui.map.temsys.ApplyElevationWidget"/>
           <parameter
                 name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.plugin"
                 value="org.kalypso.model1d2d"/>
           <activeWhen>   
	       		<with variable="activeContexts">
		       		<iterate operator="or">
		       			<equals value="{http://www.tu-harburg.de/wb/kalypso/schemata/1d2d}Node"/>
		       		</iterate>
	       		</with>
	       </activeWhen>
        </class>
     </handler>
     
	</extension>
        <extension
         point="org.eclipse.ui.commands">
      <category
            id="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommands"
            name="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommands"/>
      <command
            categoryId="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommands"
            defaultHandler="org.kalypso.kalypso1d2d.pjt.actions.OpenMapViewCommandHandler"
            description="Opens the map view on a resource"
            id="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand"
            name="Open map">
         <commandParameter
               id="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.resource"
               name="Resource"
               optional="false"/>
         <commandParameter
               id="org.kalypso.kalypso1d2d.pjt.OpenMapViewCommand.layer"
               name="Layer"
               optional="true"/>
      </command>
   </extension>
    <extension
          id="KalypsoEnterpriseSH"
          point="org.eclipse.core.runtime.products">
       <product
             application="org.kalypso.afgui.AFGUIApplication"
             name="KalypsoEnterpriseSH"/>
    </extension>
    
         <extension
           point="org.eclipse.ui.intro.configExtension">
        <configExtension
              configId="org.kalypso.model.product.configId"
              content="content/ext.xml"/>
     </extension>
</plugin>
