Modulhistory von wspmap.exe
---------------------------

Die jeweilige Überschrift bezeichnet das CVS-Tag.
Der Tag hat jeweils die Form: wspmap.exe-%fileverson%

CVSStart
--------
Tag für den Import-Branch


wspmap-1-4-5-1
--------------
Tag für die Import-Revision. Ab jetzt CVS-Verwaltung

wspmap-1-4-5-2
--------------
- Bugfixes bei Buhnendarstellung ( Buhnenfuss statt Buhnenkopf in der Karte )
- Projekte verschiebbar
- beim schliessen von Karte/Projekt speichern ohne Nachfrage

wspmap-exe-1-5-0-0
------------------
- alle Menus einzeln ausblendbar
- Toolbars gesplittet und einzeln ausblendbar
- nimmt Kommandos vom Projektmanager entgegen und bearbeiteet sie ( z.b. Karte öffnen )
- Automatisches aktualisieren des Projektes aus der Karte, automatischer Export ( beides Optional )
- Standardlayout: CDockState der CChildFrame DockBars wird gespeichert, allerdings werden die
    Fenstergrössen nicht richtig wiederhergestellt.
- Informatoolbar mit Riesenknöpfen

wspmap-exe-1-5-1-0
------------------
- nicht mehr benötigte Shapes im Map-Verzeichnis werden gelöscht
- externe Shapes können nicht mehr gelöscht werden
- wieder richtiges Icon für wspmap.exe
- neue Triangulationsroutine mit Zwangslinie und 'Quality'-Meshing
- setzen der Wasserspiegel ans Ende der Profillinien
- BCEHmo überarbeitet und importfilter repariert ( z.B. Fehler in ungenerated tin )

wspmap-exe-1-5-2-0
--------------
- erstellen von Zuordnungstabellen ( Nutzungsklassen )
- verschneiden mit ProfilPunkten möglich, mithilfe der Nutzungsklassen
- Speicherndialog geändert: kein Zuweisen von Rauheiten etc. mehr möglich; jetzt wird nur noch gefragt, welche
			Datenblöcke geändert/erstelt werden sollen
-> Kartenvorlage hat sich geändert ( kompatibel )
-> neue Option ( Meunu-Extras )

wspmap-exe-1-5-2-1
--------------
- Bugfixes bei Nutzungsklassen: - nicht zugeordnete Werte verändern vorhandene nicht
								- Kommentar für jede Zeile
								- Bezeichnungen: AX statt AXM etc.


wspmap-exe-1-6-0-0
--------------
- neues Tool 'Profil-Generieren':
	- Benutzer kann eine einzelne Linie ( welcher er selbst zieht ) mit einem DGM verschneiden
	- das erzeugte Profil wird in einer Vorschau angezeigt
	- in der Vorschau können noch ein Paar Einstellungen getätigt werden ,dann wird das Profil erzeugt,
		als Profildatei gespeichert und in die Karte geladen

- neues Tool 'Profil verlängern'
	- Benutzer zieht eine Linie vom Endpunkt eines Profils aus
	- die Linie wird mit Geländemodell verschnitten und dem Profil hinzugefügt
	- eine Profilvorschau wird angezeigt
- Bugfix: beim Verschneiden eines leeren Linien/Polygon-Themas kam eine kryptische MapObjects Fehlermeldung
- Generierung des WSP-Netzes: alle neu
- Profil-Markieren: Mehrfeldbrücken werden als Einheit selektiert; beim Laden/löschen/verändern von Profilen wird
					Markierung entsprechend geändert
- Profil-Editor: Mehrfeldbürcken werden als Einheit angewzeigt, durch schwarze Trennbalken voneinander getrennt

Hängt ab von:
- wspprj-dll-1-2-5-1
- wspdlg-dll-1-2-1-1
- tincut-exe-1-6-1

wspmap-exe-1-6-1-0
------------------
- Änderungen wegen Veränderungen bei TinCut: Fortschrittsbalken und Abbruchmöglichkeit
- Änderungen bei Triangulation der Wasseroberfläche: Winkel kleiner ( wg. Probleme im Triangulationstool ),
	Anpassungen an verzweigte Systeme
- Thema mit Profillinien verschneiden:
		- Fortschrittsanzeige
		- neue Option 'Inhalt des Themas löschen'
- Profilbezogene Datne können auch eine max. Punktzahl im Profil haben
- bestimmte profilbezogene Daten erhalten stets einen Profilpunkt dazu ( bei Thema verschneiden / Objekt hinzufügen )
- Datencheck beim Rausschreiben der Daten
- Daten werden immer konsistenz gehalten ( obige Punkte + Punkte verschieben ( z.B. die Höhe )


Hängt ab von
	wspprj-dll-1-2-5-3
	wspdlg-dll-1-2-1-3
	bce-lib-1-0-0-0

wspmap-exe-1-6-1-1 15.2.2002
------------------
- neues Kompilat wegen Bugfix in bce.lib
- Anpassungen an neuen FeatureMng
- kleinere Anpassung wegen neuer Organisation des MapObject Codes

Hängt ab von 
	bce-lib-1-1-0-0 
	wspprj-dll-1-2-5-3
	wspdlg-dll-1-2-2-0

wspmap-exe-1-6-2-0 21.2.20002
------------------
- Änderung bei "Verschneiden mit Profillinien": statt "Thema leeren" jetzt
	"Punkte ersetzen"; Modellgrenzen und Buhnen tauchen nicht mehr auf
-> CMapDoc::CutWithProfillines in kleinere Funktionen zerlegt ( -> nach CMapLayer )

Hängt ab von 
	bce-lib-1-1-0-0
	wspprj-dll-1-2-5-3
	wspdlg-dll-1-2-2-0

wspmap-exe-1-6-3-0 25.2.2002
------------------
- einen Haufen kleiner Bugfixes beim Generieren von Profilen:
	-> Auswahl zwischen versch. VZK möglich
- das Kartenübersichtsfenster funktioniert jetzt wieder
- Editieren der Nutzungsklassen: Zeilen löschen, Spalten löschen und Einfügen möglich
- Verschneiden anhand von Nutzungsklassen: Attribute lassen sich jetzt auch nur teilweise zuordnen
- Anpassung an CommonMfc.lib

Hängt ab von 
	bce-lib-1-1-0-0
	wspprj-dll-1-2-5-5
	wspdlg-dll-1-2-2-2

wspmap-exe-1-7-0-0
------------------
- Drucklayout komplett neu implementiert
- die LayerDaten werden nicht mehr in der Kartenvorlage gespeichert ( Updates dadurch einfacher,
 keine Fehler mehr durch falsche Kartenvorlagen )
- die Höhen werden nur noch bei ausgesuchten Layern angepasst und nicht mehr bei allen ( z.B. wsp-Höhe wurde beim
Verschieben auf Geländehöhe gesetzt )
- Der aktuelle Kartenauschnitt wird mitgespeichert
- Beim Einladen von HMOs gibts Fehlermeldungen falls das erzeugen der HMO nicht gelingt
- Hängt nicht mehr von wspdlg.dll ab, weil Projektmanager jetzt in wspprj.dll

Hängt ab von
	bce-lib-1-1-0-1
	common-lib-1-0-2-0
	wspprj-dll-1-2-6-0
	
wspmap-exe-1-7-1-0 4.6.2002
------------------
- WspPrj.dll in statische Lib umgewandelt
- Sichtbarkeit der Übersichtskarte wird beim Programmende gespeichert und beim nächsten Start 
wiederhergestellt
- Löschen von Profilen aus der Karte und aus dem Strang möglich
- Drucklayout: 
		- Ändern der Grösse der Druckrechtecke jetzt möglich
		- Anzeige des Maßstabs als Text im Kartenrechteck
		- Fehlerhafte Icons repariert

wspmap-exe-1-7-2-0 16.7.2002
------------------
- DDE Mechanism aus dem MainFrame in IDDEWnd aus CommonMfc.lib ausgelagert
- Hilfe ruft jetzt die WspMap.pdf auf
- MapLayout: die beiden Rechtecke 'Image' und 'Legende' haben zusätzlich die Eigenschaft 'Originalgrösse beibehalten'
- Versionsnummer wird jetzt aus der .Exe ausgelesen

wspprj-lib-1-3-2-0
common-lib-1-0-4-0
bce-lib-1-1-0-2

wspmap-exe-2-a-0-0 8.10.2002
------------------
- Anpassungen an Änderungen der Klassen Rect und Point aus der commonMfc in Templates
- Neukompilation wg. Änderungen in wspprj und commonMfc
- Handbuch überarbeitet und verlinkt

Hängt ab von
	common-lib-2-a-0-1
	wspprj-lib-2-a-0-1

wspmap-exe-2-a-1-0 16.11.2002
------------------
- neues Thema Flussachse möglich
- wird ein benutzerdefiniertes Thema kopiert, so kann als Typ des neuen Themas zwischen benutzerdefiniert und flussachse gewählt werden.
Es wird überprüft, ob das Thema die Spezifikation erfüllt.
- bei der Erzeugung von neuen Profilen anhand eines Geländemodels wird ein Thema 'Flusslinie', falls vorhanden, berücksichtigt.
- Durch Auswählen eines Linienthemas können jetzt mehrere Profile gleichzeitig generiert werden. die Lage entspricht des
Objekten des Linienthemas; Zustand wird abgefragt; Station aus LinienShape gelesen; VZK aus Flusslinie gelesen. Ein evtl vorhandener Text
wird als Kommentar zum Profil hinzugefügt. Das ganze ist Optional (Schlüssel map_profile_generieren)
- Dialog Thema Neu; Beschriftung korrigiert
- das Optionsmanagement findet jetzt über die Klasse BCE::RegKey::BitKey statt.
- Thema Böschung reaktiviert (sollte besser Bordvoll heissen)
- Es lassen sich durch verschneiden mit Profillinien jetzt auch WSPs erzeugen, diese werden auch gespeichert (optional: map_wsp_speichern)

Hängt ab von
	bce-lib-1-1-1-0
	common-lib-2-a-0-3
	wspprj-lib-2-a-1-0

wspmap-exe-2-0-0-0  22.1.2003
-------------------
- Bugfix: Profile generieren: wenn kein Flussschlauch existiert, kommt die entsprechende Meldung nur einmal und die Aktion 
wird komplett abgebrochen
- Drucklayout: zur bisherigen Legendendarstellung kommt eine zweite, verbesserte. Dort wird die Schrift 
dynamisch an die Grösse des Druckrechteckes angepasst. Allerdings unterstützt diese bisher nur
'Single Symbol'.
- Bugfix: Drucklayout: beim anpassen des Massstabs wurde die Massstabsbezeichnung der Karte nicht gleich angepasst
- Handbuch angepasst: Kapitel Ausgabemöglichkeiten
- Bugfix beim Profile generieren: Performance war echt mies, jetzt werden beim automatischen generieren nicht mehr die Nachbarprofile gesucht
- Bugfix: löschen von Profilen: beim zweiten gabs nen Absurtz
- Bugfix: Bordvollpunkte wurden nicht importiert
- Bugfix: Bordvollpunkte und Modellgrenzen: in die yKoordinate wird nicht die Höhe, sondern die Lage geschrieben
- Bugfix: Löschen von Karten: es wird jetzt auch die .wpm Datei sowie die _pivot-Shapes gelöscht
- neuer Menupunkt Karte->Speichern, löst sofortiges speichern der Karte aus
- auch nach Pan wird der Ausschnitt im Übersichtsfenster neu gesetzt

Hängt ab von
	bce-lib-1-1-2-0
	common-lib-2-0-0-0
	wspprj-lib-2-0-0-0
	
wspmap-exe-2-0-0-1 4.2.2003
------------------
- Bugfix: bei WSP-Triangulation für TinCut sollte doch kein 'Qualitäts'-Mesh generiert werden, da dies zu oft nicht klappt

Hängt ab von
	bce-lib-1-1-2-1
	common-lib-2-0-0-1
	wspprj-lib-2-0-0-0

wspmap-exe-2-0-2-0   18.3.2003
------------------
- Kartenvorschau:
	- bei Schliessen des Fensters wieder Wechsel in normale Ansicht und nicht schliessen des ganzen Fensters
	- Probleme mit dem Maßstab verbessert durch dirty hack, aber immer noch nicht perfekt, Probleme mit MapObjects
- schreibt die Wasserspiegel shapes jetzt mit einem Namenszusatz (Berechnungsvariante) raus
- beim Laden der Profile gibts jetzt ne Meldung, wenn nicht alle geladen werden konnten
- Copyright Datum ist das Änderungsdatum der .exe
- Absturz beim Laden von nicht mehr vorhandenen Raster-Themen

wspmap-exe-2-1-a 11.2.2004
----------------
- beim Verlängern von Profilen werden diese immer ausgedünnt (nur optional)
- bemi Generieren von Profilen werden diese immer ausgedünnt (nur optional)
- Die Shape Datei der WLinien ließ sich nicht in ArcView öffnen, da kein Attribut mit Ihr verknüpft war -> DummyAttribut eingeführt
- manchmal Absturz, wenn kein Drucker am Rechner installiert war
- Obskurer Absturz bei Öffnen vom Hilfsmenu in Win2000/XP Systemen gelöst
- Triangulation des WSP für Fliesstiefen bzw. TinCut berücksichtigt jetzt besser die Profilkontur, da die durchst. Bereiche und
Trennflächen als Hilfspunkte mitgenommen werden
- Bugfix: Flackern des Profilfensters bei Neuzeichnen behoben
- Cursor in der Profilview zeigt jetzt auch die Hoehe an
- Profileditor-automatik: wurde in zwei Knöpfe aufgeteilt: Profileditorautomatik + Profilcursor getrennt
- nach 'Object neu' wird das neue Objekt auch schon während des Attributeingabedialogs gezeigt
- Bugfix: bei Datenimport werden Dateien nicht mehr exclusiv geöffnet -> kein Absturz mehr bei schreibgeschützten Dateien!
- Dateimport D50: Referenzierung auf Profilnullpunkt korrigiert
- alle Tools überarbeitet:
	- Rechtsklick immer ZoomOut
	- Mausrad Zoom
	- rechter Drag Pan,
- Bugfix: Aktualisierung der Kartenübersicht nach 'Zoom to Layer'
- Bugfix: Übersichtsfenster wird jetzt korrekt aktualisiert nach Änderungen in der Karte (Kartenausschnitt, Thema sichtbar)
- Bugfix: Thema entfernen: falls Dateien gelöscht werden sollen, werden jetzt auch .sbn und .sbx Dateien gelöscht
- Bugfix: Karte löschen: auch die _wlines... und _wlevel... Dateien der Karte werden aus dem /map Verzeichnis gelöscht
- Bugfix: auch Rasterdaten im /map Verzeichnis werden jetzt mit relativem Pfad gespeichert -> falls Projekt verschoben werden
Daten wieder gefunden
- Bugfix: wurde ein Projekt nicht nur verschoben sondern auch umbenannt, wurden keine Karten mehr gefunden
- Bugfix: auch .hmo Dateien im /map Verzeichnis werden jetzt relativ gespeichert -> .hmo werden nach Projekt verschieben wieder gefunden
- Bugfix: relativ gespeicherte Rasterdaten (d.h. untern dem /map) Verzeichnis werden nach dem Profjektverschieben wieder gefunden
- Beim erneuten Laden der Karte wird jetzt überprüft, ob noch alle geladenen Profile im Strang vorhanden sind. Ist dies nicht der Fall, werden die Profile automatisch aus der Karte gelöscht.
- Profilauswahl: 
	- Tooltips der Knöpfe wurden etwas ausführlicher
	- Warnhinweise bei Überschreiben/Löschen von Karteninhalten bzw. Profildateien
	- bei Laden von Profilen in Karte: falls misslungen (z.B. keine Georef.), werden die Profile als nicht geladen markiert
- Themeneigenschaften:
	- bei Rasterdaten (Bilder) wird der Dateiname des Themas mit angezeigt
	- bei Vektordaten wird der Dateiname in der Titelzeile des Eigenschaftendialogs angezeigt
	- auch bei 'Einzelnes Symbol' können jetzt für Punkte und Polygone der Rand festgelegt werden (Rand an/aus, Randfarbe)
	- Bugfix: manchmal Abstürze bei 'Abgestuftes Symbol'
	- Bugfix: bei 'Standard-Label' wird die Textgrösse jetzt richtig gesetzt
	- Bugfix: Ausrichtungen bei 'Standard Label' waren vertauscht (rechts/links) (oben/unten)
	- Bugfix: bei 'erweitertes Label': Auswahl 'unterhalb', 'oberhalb', 'auf' repariert
- Profil verlängern: der y-Bezug des Profils wurde nicht richtig geändert, dadurch z.B. falsche Anzeige des Cursors im Profilfenster
- Bugfix: Thema mit Profillinien schneiden: eingefügte Punkte ergaben manchmal Rücksprünge
- Themeneigenschaften: können jetzt als separate Eigenschaften gespeichert und wieder geladen werden
- bei jeder Änderung der Karte (Themen hinzufügen, neu, löschen, eigenschaften) wird die Karte gespeichert. Ebenso wird beim anlegen und löschen einer Karte das Projekt gespeichert. Das Risiko eines Datenverlustes wird somit minimiert.

wspmap-exe-2-1-0 5.4.2004
----------------
- Bugfix: Profilcursor war manchmal nicht sichtbar
- Bugfix: Profilansicht geht auf, auch wenn keine Profile da sind
- Bugfix: falls bei Profil-generieren keine Flussachse vorhanden, wurden Profilthemen (Punkte/Linien) trotzdem schon angelegt und erst dann abgebrochen
- Projektmanager: Drucken - Funktion funktioniert jetzt
- Menüeinträge 'Tools - Auschnitt verkleinern' und '...-verschieben' sind weggefallen
- Bugfix: Bordvoll-Punkte werden in Profilansicht angezeigt
- Bugfix: Projektmanager: bei Profile spiegeln wurde die 'Lage' bei Trennflächen und BV-Punkten vertauscht
- Profile generieren: falls die Profillagen kein Attribut 'Station' haben wird wie beim normalen 'Profil generieren' verfahren
- Bugfix: Problem mit 'hängendem' Cursor nach Pan und Doppelklick behoben
- Fehlermeldung und Programmende wenn MapObjects nicht installiert ist

wspmap-exe-2-1-1-0 24.1.2005
------------------
- Registry-Schlüssel überarbeitet (siehe wspwin-exe)
- Bugfix: falls kein Drucker installiert, gabs Probleme beim Karten öffnen, speichern etc.
- Bessere Fehlermeldung, wenn beim Fliestiefenermitteln das Geländemodell nicht mehr richtig mit der HMO verknüpft ist
- Der Mapper schreibt jetzt bei jedem Start den Installationspfad in die Registry -> sollte dadurch besser durch WspWin gefunden werden
- bessere Fehlermeldung, wenn Start der Fliesstiefenermittlung fehlschlägt

wspmap-exe-2-1-2 15.8.2005 wurde zeitweise als Version 2.2 bezeichnet
--------------------------
- Fliesstiefenermittlung wurde überarbeitet:
	- das Gesamtvolumen wird immer ermittelt
	- die Volumina der Teilflächen auf Wunsch
	- GUI besser
- Neue Funktion 'Extras->Profilabstände ermitteln' zum Berechnen der Strangabstände
- Beim Erzeugen der Shape-Dateinamen (Profildaten, Ergebnisse Fliesstiefenermittlung etc.) werden jetzt so angelegt, dass diese in ArcView direkt geöffnet werden können (z.B. kein . im Dateinamen erlaubt)
- Bugfix: der Fenstertitel der Karten wurde bei jedem Speichern der Karte (z.B.=bei jedem neuen ) auf den Dateinamen gestzt (als map00001.wpt) statt auf den Kartennamen. Seiteneffenkt: neu angelegte shapedateien wurden falsch bennant (sollten als prefix den Kartennamen bekommen)
- Bugfix: Hilfsmenu heisst jetzt wieder 'Hilfe' statt 'Help'
- Bugfix: Bei losgelöster Legende ('floating') war das Kontextmenü immer deaktiviert
- Bugfix: Mapper Demoprojekt (MapDemo) war Schrott
- Profile verlängern: Die Anzeige aktualisiert sich jetzt schon beim Tippen des Grenzwertes, vorher nur bei Focusverlust -> viele Nutzer habens sonst nicht kapiert
- neues Werkzeug 'Profil spiegeln' in der Karte. Vorsicht: Sonderbauwerke werden nicht mitgespiegelt! 

wspmap-exe-2-1-3 21.2.2006
--------------------------
- Bugfix: Fehlerhafte Berücksichtigung der Trennflächen und Bordvollpunkte bei verschneidung des WSP mit DGM. Dadurch Absturz bzw. Meldung Triangulation konnte nicht durchgeführt werden.

wspmap-exe-XXXXXX
-----------------
- Bugfix: Bei 'Profilabstände ermitteln' gabs eine Endlosschleife, wenn nicht alle Profile des Strangs in der Karte waren