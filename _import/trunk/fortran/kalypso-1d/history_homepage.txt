Version 273   Juni 2004
-----------------------
1.)  Bordvollberechnung stationär-ungleichförmig: die Fehlerhafte Ausgabe der Längsschnitte bei
     Berechnungen von mehr als 53 Profilen wurde korrigiert

                                            Wolf Plöger, Juni 2004


Version 274 20.7.2004
---------------------
1.)  Bordvollberechnung stationär-ungleichförmig:
	- Eingabeparameter (qmax, qmin, qstep) werden beim Einlesen wieder auf die Konsole ausgegeben
	- die Dateien für die W/Q Beziehung bzw. die einzelnen WSP-Berechnungen werden jetzt mit
     ausreichend Stellen benamt, so dass
         a) Abflüsse > 1000 m3 möglich sind und
         b) keine Dateien mehr gleich benamt werden

                                            Wolf Plöger, 20. Juli 2004

Kalypso 0.9.2  28.07.2004
-------------------------
1.)  Umwandlung des codes in FORTRAN90

                                            Wolf Plöger, 28. Juli 2004


Kalypso 0.9.3  28.07.2004
-------------------------
1.)  Behebung einiger Übergabefehler.

2.)  Behebung einer Reihe von FORTRAN-Standard Verletzungen.

                                            Wolf Plöger, 28. Juli 2004

Kalypso 1.0  12.08.2004
-------------------------
1.)  Das Programm KALYPSO-1D und alle seine Subroutinen wurden unter die
     GNU Lesser General Public License gestellt und sind damit offene Codes!

                                            Wolf Plöger, 12. August 2004

Kalypso 1.0.1 19.10.2004
------------------------
1.)  Fehler beim Lesen der Kommentarzeile (Subroutine READCOMMENT in proep.f90)
     in Profildateien wurde behoben. Fehler ist aufgetreten bei deutschen Sonderzeichen, 
     die FORTRAN nicht lesen kann. Durch Verwendung von IOSTAT in READ-Befehl konnte
     dieser abgefangen werden.
                                            Wolf Plöger 19. Oktober 2004

Kalypso 1.0.2 13.01.2005
------------------------
1.)  Anpassungen beim Einlesen der Kreisprofile.

                                            Wolf Plöger 13. Januar 2005

Kalypso 1.0.3 02.02.2005
------------------------
1.)  Erhöhung der maximal möglichen Profile auf 500. Weitere Erhöhungen sind
     ab sofort ohne Probleme möglich.

                                            Wolf Plöger 02. Februar 2005



Kalypso 1.0.4 28.02.2005
------------------------
1.)  Als Kennung fuer den Block mit den Rauhigkeitswerten ist jetzt neben
     'RAUHIGKEIT' auch 'RAUHEIT' erlaubt. 
     (Problem ist aufgetreten, weil der WSPWIN Mapper beim Einlesen des Triple-Formats
     nur die Kennung 'RAUHEIT KS' erlaubt. Somit werden durch den Mapper teilweise
     Profildateien erzeugt, die statt RAUHIGKEIT die Kennung RAUHEIT aufweisen.)

                                            Wolf Plöger 28. Februar 2005

Kalypso 1.0.5  April 2005
-------------------------
1.)  Einige Änderungen in der Programmstruktur:

2.)  Erweiterung des Codes, so dass im DATH-Ordner die Datei "laengsschnitt.txt" erzeugt wird.
     Diese beinhaltet den gleichen Längsschnitt, wie die standardmäßig ausgegebenen WSPWin-Datei,
     allerdings in einer einfachen Tabellenform, die leicht in EXCEL importiert werden kann!
    
3.)  Änderung der Subroutine PROE_PRO (siehe Version 1.0.1). Jetzt können auch Kommentare 
     mit mehr als einer Zeile verarbeitet werden, wenn Sie nicht am Ende der Profildatei stehen.

                                              Wolf Plöger, 21.04.2005


Kalypso 1.0.6  02.05.2005
-----------------------------
A C H T U N G:  In der Vorgängerversion 1.0.5 haben sich zwei kleine Bugs eingeschlichen, 
deshalb bitte ab sofort nur noch die Version 1.0.6 benutzen!

A C H T U N G:  Durch die erhöhte Genauigkeit kann die Berechnung teils deutlich
länger dauern. Auch die Ergebnisse können teilweise leicht von den Ergebnissen
der Vorgängerversionen abweichen!

1.)  Erhöhung der Genauigkeit bei der iterativen Berechnung.

2.)  Umbenennung der Kontrolldatei von "Kontroll" nach "Kontroll.log". 

3.)  Änderung der Ausgabe in der MS-DOS Box. Statt der Uhrzeit, des Datums und der Versionsnummer
     erscheint nun das aktuell berechnete Profil.

                                                Wolf Plöger 02.05.2005


Kalypso 1.0.7  11.05.2005
-----------------------------
1.)  Problem bei Brückenberechnung behoben (Es kam vor, dass im Querprofil weitere Punkte 
     interpoliert wurden, dort wurde in einem speziellen Fall verkehrt interpoliert).

                                                Wolf Plöger 11.05.2005


Kalypso 1.0.8  Mai.05.2005
-----------------------------

1.)  Einige Bereinigungsarbeiten am Code, ohne die Berechnungsergebnisse zu verändern.

                                                    Wolf Plöger, 25.05.2005


Kalypso 1.0.9  Mai.05.2005
-----------------------------
1.)  Erhöhung der maximalen Zeichenlänge auf 250. Dies funktioniert nun auf
     FORTRAN-Seite, allerdings kann die Oberfläche WSPWin 8.0.3 diese langen 
     Dateinamen noch nicht verarbeiten.

                                                    Wolf Plöger, 30.05.2005

Kalypso 1.0.10   Juli 2005
--------------------------
1.)  Bug-Fix bei der Lambdawert Berechnung für kleine Wassertiefen.

2.)  Bug-Fix bei der Berechnung des Formbeiwertes nach MARCHI (BWK, Merkblatt 1, 1999, S. 20). 

3.)  Änderung des Formates der Tabellenausgabe. Formbeiwert wird nun mit ausgegeben.

4.)  Zusätzlich Berechnung der Sohlschubspannung für den Flussschlauch:

       tau = lambda_fl/8 * rho * v_fl^2

     Dieser Wert nun in Laengsschnitt.txt ausgegeben.

5.)  Überarbeitung der Ausgabedatei LAENGSSCHNITT.TXT. 

                                                    Wolf Plöger, 13.07.2005

Kalypso 1.0.11  Juli 2005
-------------------------
1.)  Berechnung wird unterbrochen, wenn bestimmte Fehler auftreten. Es 
     öffnet sich nun ein Pop-Up Fenster mit weiteren Informationen. Der 
     Benutzer kann wählen, ob die Berechnung fortgesetzt werden soll 
     (z.B. ohne Wehre) oder ob die Berechnung beendet werden soll.

                                                    Wolf Plöger, 19.07.2005

Kalypso 1.0.12  August 2005
---------------------------
1.)  Bei der Berechnung von Kalinin-Miljukow-Parametern wird nun zusätzlich
     für jede Profildatei eine Datei mit der Endung *.km erzeugt und in den
     /PROF/ Ordner abgelegt. Diese beinhaltet die berechnete WQ-Beziehung
     für jedes Profil des berechneten Strangs.
     (Hinweis: Die Berechnung der Kalinin-Miljukow-Parameter soll in Zukunft
     in ein eigenständiges Programm ausgegliedert werden, wahrscheinlich
     in KALYPSO-NA Oberfläche.)

2.)  Nicht behobener BUG bei der Brückenberechnung: Wenn auf dem Vorland neben
     der eigentlichen Brücke eine Senke auftritt kann es bei einem hohen
     Unterwasserstand zu Berechnungsproblemen kommen.
     -> Die Senke auf dem Vorland muss mindestens auf die Höhe des 
        Schnittpunktes zwischen Brückenoberkante und Gelände angehoben 
        werden.
     -> Fehlermeldung bei diesem BUG wurde verbessert.

                                                    Wolf Plöger, 19.07.2005

Kalypso 1.0.13  08.11.2005
--------------------------
1.)  Tabelle der KM-Ausgabedatei bekommt neuen und leichter verständlichen Kopf.

2.)  Bei der Berechnung von Sonderprofilen wird der Formbeiwert nicht mehr
     berücksichtigt.

                                                    Wolf Plöger, 08.11.2005

Kalypso 1.0.14     08.12.2005
-----------------------------
1.)  Es wird eine neue Datei (lambda_i.txt in /DATH/) angelegt, in der die 
     einzelnen berechneten Lambdawerte der Rauhigkeitsabschnitte im Flussschlauch
     ausgegeben werden. Für die Vorländer werden die mittleren Werte ausgegeben.
     Zusätzlich wird für die einzelnen Knoten die jeweilige mittlerer 
     Fließgeschwindigkeit des Abschnittes (Vorland links, rechts, Flussschlauch)
     ausgegeben.

5.)  Verbesserung der Fehlerausgabe, wenn keine Grundrauheit angegeben
     wurde (z.B. fehlerhafte Verschneidung im WSPWIN Mapper).

                                                    Wolf Plöger, 08.12.2005

Kalypso 1.0.15   Januar 2006
----------------------------
1.)  Bugfix bei der Berechnung von extrem komplexen Brücken.
 
                                                    Wolf Plöger, 17.01.2006


Kalypso 1.0.16   Februar 2006
-----------------------------
1.)  Zusätzliche Prüfung der eingegebenen Bewuchsparameter. Bewuchs zwischen den
     Trennflächen wird direkt gelöscht, Inkonsistente Dateieneingabe, z.B.
     ax= 5.0,  ay = 5.0,  dp = 0.0 wird geprüft und dann Bewuchs an dieser Stelle
     entfernt. Warnhinweise werden in error2.log geschrieben.

2.)  Verbesserung der Iteration zur Bestimmung der Trennflächenrauhigkeit.

                                                    Wolf Plöger, 02.02.2006


Kalypso 1.0.17   März 2006
--------------------------
1.)  BUG-Fix bei der Ausgabe der *.km Dateien.

2.)  "Verschönerung" der Ausgabe in MS-DOS Box und in error2.log.

3.)  Neue verbesserte Fehlerausgabe, wenn bei Bordvollberechung kein Abfluss
     berechnet wurde.

4.)  Datei mit Kontrollausgaben KONTROLL.LOG wird ab sofort immer ausgegeben.

                                                    Wolf Plöger, 13.03.2006


Kalypso 1.0.18   April 2006
---------------------------
1.)  Erhöhung der Anzahl der maximal möglichen Abflussänderungen in einem Flusslauf von 10 auf 50.

2.)  Erweiterung der Ausgabe in "laengsschnitt.txt"

                                                    Wolf Plöger, 26.04.2006


Kalypso 1.1 und folgende (a-g),  April-Juni 2006
------------------------------------------------
1.)  Umstellung des Codes auf neue Konfigurationsdatei für KALYPSO-Oberfläche.



Kalypso 1.2 RC1   11. Dezember 2006
-----------------------------------
1.)  Neue Berechnungsmethode für den Verzögerungsverlust hinzugefügt.
     Dieser Verlust wurde bisher über die Verfahren DVWK, Björnsen oder DFG
     bestimmt. Hierbei wurde die Verlusthöhe teilweise deutlich überschätzt.
     Neues Verfahren wird nach BWK Merkblatt 1, 1999 (S.28f) implemetiert.
     Bei alter WSPWIN-Oberfläche wird bei Wahl der Option DFG intern nun
     nach BWK gerechnet! 
     Bei KALYPSO-Oberfläche wird DFG-Option durch BWK-Option ersetzt.

                                                    Wolf Plöger, 11.12.2006

Kalypso 1.3    14. Febvruar 2007
--------------------------------
1.)  Umstieg auf freien G95 Compiler.

                                                    Wolf Plöger, 14.02.2007

                                                    
Kalypso 1.3.1      04. April 2007
-----------------------------------
1.)  Generierung der Längsschnitt.txt auch fuer die stat. ungleichförmige 
     Berechnung (=Abfluss-Steigergung):      

2.)  Ueberarbeitung und BUG-Fix der Wehrberechnung	 
	   					    Monika Donner, 04.04.2007
                                               
                                                   
Kalypso 1.3.1.2     26. April 2007
-----------------------------------    
1.)  Ueberarbeitung und BUG-Fix der Wehrberechnung für rund- & scharfkronige Wehre
						    Monika Donner, 26.04.2007

Kalypso 2.0.0        04. Mai 2007
-----------------------------------
1.)  Einrichtung einer neue 4.te Berechnungsvariante unter Vorgabe eines konstanten
     Reibungsgefälles. Ziel der neuen Berechnungsvariante ist die Generierung eines 
     1d-Stranges und der notwendigen Polynome und Daten für die instationäre Berechnung
     nach Teschke. 
     In der neuen Berechnungsvariante werden unter der Vorgabe eines konstanten 
     REIBUNGSGEFÄLLES folgende Effekte berücksichtigt:
     - Kontinuierliche Verluste entlang des Fließweges infolge Reibung, Trennflächen 
       und Bewuchs.
     - Ausbildung von Wasserstand-Abfluss-Beziehungen im OW und UW von Bauwerken: 
       derzeit NUR für Wehre. In Wehren werden alle örtlichen Verluste mitberücksichtigt.    
     - Für die Erzeugung der instationären w-Q-Polynome für die normalen Profile
       sollten alle Bauwerke deaktiviert werden.
     
     Für die Berechnungsvariante müssen u.a. folgende Vorgaben erfolgen:
     - Konstantes Reibungsgefälle
     - Abflussintervall mit Qmin, Qmax und dQ
     - KEIN Verlustbeiwert beta (infolge Einschnürung oder Aufweitung)
     - Fließwiderstand ausschließlich für Darcy-Weisbach ohne Formwiderstand (kein kst)
     - Brücken deaktivieren!
     
     Diese neue Berechnungsvariante lässt sich NUR über die Oberfläche WSPM ansteuern.
                          
                                                      Monika Donner, 04.05.2007

 Kalypso 2.0.1        27. Juni 2007
-----------------------------------

1.)  Anpassung der Ausgabe in den *.km-Dateien. In der ersten (Kopf-)Zeile
     wird nun zusätzlich die bordvolle Höhe ausgegeben. Dies dient der angepassten
     Berechnung der Kalinin-Miljukow-Parameter k und n.
     
                                                         Wolf Plöger, 27.06.2007     
                                                    
 Kalypso 2.0.2        03. Juli 2007
-----------------------------------

1.)  Bugfix: Bei der Stationär-ungleichförmigen Bordvollberechnung bei gleichzeitiger
     Ausgabe der W-Q-Dateien (*.pro) ist bei der Interpolation von Profilen im 
     Brückenbereich ein Fehler aufgetreten -> Behoben.

                                                         Wolf Plöger, 03.07.2007	 

 Kalypso 2.0.3        04. Juli 2007
-----------------------------------

1.)  Bugfix: Der Impulsstrombeiwert (alpha_IW) und Energiestrombeiwert (alpha_EW) nahmen 
     bislang bei hohen Abflüssen unsinnige Werte von bis über 100 an.

2.)  Bugfix: Der Fall, das sich das berechnete Energieliniegefälle "is" (in Subr eb2ks) grösser 
     eins oder kleiner Null wird, wurde Abgefangen durch ein Zurücksetzen des Energieliniegefälle 
     auf 0.001 (= Anfangswert für die erste Iteration am ersten Profil). 

3.)  Bugfix: Berechnung der Verlusthoehe infolge Reibung.

4.)  Erzeugung einer neuen Ausgabedatei für alle Berechnungen unter einer Abflussstaffelung
     Es wird ein Längsschnitt mit allen Profilen und allen Abflüssen erzeugt. Zusätzlich sind 
     die Teilabflüsse Q, Impulsstrombeiwert (alpha_IW) und Energiestrombeiwert (alpha_EW) enthalten.

5.)  Verbesserung: Der Trennflächen-Widerstandbeiwertes (Lambda) wurde auf ein 
     Maximum von 2.00 begrenzt. 
                                                       Monika Donner/ Wolf Plöger, 04.07.2007

 Kalypso 2.0.3.1      04. Juli 2007
-----------------------------------
1.)  Bugfix: Bei der stat.-unglf. Berechnung wurde die neue Datei "Q_LangSchnitt.txt" nicht
     richtig geschlossen.
                                                         Wolf Plöger, 05.07.2007     
                                                         	                                                 
Kalypso 2.0.4.1      31. Juli 2007
-----------------------------------
Bugfix Brückenverluste im Längsschnitt
     Behalten der Brückenprofile in der Laengsschnitt.txt und Q_LangSchnitt.txt.     

                                                         Monika Donner, 31.07.2007 

Kalypso 2.0.4.2      03. August 2007
-----------------------------------
1.)  Bugfix innere Abflussschleife ueber die Brücken (RV: konstantes Rebungsgefaelle)
     Schutz der Ergebnisse an der Brücke aus der äußeren Q-Schleife vor einem Überschreiben
     bei der Inneren Q-Schleife. 

2.)  Erweiterung der Laengsschnitt.txt um die Einträge der Teilabfluesse, Impuls- und 
     Energiestrombeiwert sowie Reibungsgefälle. 
                                                         Monika Donner, 03.08.2007 



Kalypso 2.0.4.3      07. August 2007
-----------------------------------
1.)  Bugfix innere Abflussschleife ueber die Brücken: (RV: konstantes Rebungsgefaelle)
     Fehler-Korrektur beim Zurückholen der alten Ergebnisse im UW der Brücke aus der äußeren 
     Q-Schleife. 

2.)  Bugfix: Energiehöhen- bzw. Verlusthöhen-Berechnung

                                                       Monika Donner, 07.08.2007 
                                                       
Kalypso 2.0.4.4      15. August 2007
-----------------------------------
1.)  Bugfix bei der automatischen ausserplanmaessigen Interpolation von Profilen.
     
2.)  Bugfix: Ausgabe im MS-DOS Fenster.

                                                       Wolf Plöger, 15.08.2007

Kalypso 2.0.5       17. August 2007
-----------------------------------
1.)  Erweiterung der Fließwiderstandsberechnung um extrem rauhes Regime. Verwendet
     wird die Formel nach Aguirre-Pe und Fuentes, wobei zwischen h=0,1*ks und h=0,3*ks
     eine lineare Übergangsfunktion zwischen Colebrook/White und Aguirre-Pe/Fuentes
     verwendet wird.
     Es besteht nun keine Begrenzung mehr bei der Wahl des ks-Wertes bei niedrigen
     Wassertiefen! Das Verfahren nach Aguirre-Pe/Fuentes führt bei niederigen Abflüssen
     zu größeren Fließwiderständen und damit zu höheren Wasserspiegeln!

                                                           Wolf Plöger, 17.08.2007 

Kalypso 2.0.5.2      3. Dezember 2007
-------------------------------------
1.)  Korrekturen und Erneuerungen fuer die Wehrroutine: w_ber, beiwert, g_wehr:       
     Bugfix fuer Sicherung der letzten Werte in w_ber bei "keiner Konvergenz in der Engergiehoehen
     Iteration". Veränderung fuer die neue Energiehoehenschaetzung im OW des Wehres.
     Neue Berechnungsformel für Überströmen: Beim Überströmen wird ein sogenannter Anstroemverlust 
     ueber den Verlust-Beiwert K_verlust berücksichtigt. So stellt sich ein glatterer Übergang zwischen 
     vollkommenem bzw. unvollkommenem Überfall und Überströmen ein. Wird der Verlust-Beiwert kleiner eins, 
     wird die ursprüngliche Gleichung ohne Verlust-Beiwert angesetzt.
        
2.)  Entkopplung der Berechnungsvarainte konstantes Reibungsgefälle zwischen den Profilen. Es werden keine
     Startwerte mehr aus dem Unterwasser vorgegeben.
     Betroffene Routinen: wspber, wspanf, station, verluste, eb2ks

                                                           Monika Donner, 03.12.2007  
                                                           
Kalypso 2.0.6       13. Dezember 2007
-------------------------------------
     
1.)  Fehlerbehebung bei der Berechnung der Trennflaechenrauhigkeit nach Pasche.
     
2.)  Bugfix bei der Berechnung der Sohlrauhigkeit in Verbindung mit extremen 
     Rauhigkeiten.
     
5.)  Im Projekt-Ordner /PROF/ wird nach einer Datei mit dem Namen "Kalypso_add.cfg"
     gesucht. Hier können im INI-Format zusaetzliche oder abweichende Konfigurationen
     für die Berechnung festgelegt werden. Die Datei wird nur gelesen, wenn sie
     existiert und die WSPWIN-Oberfläche verwendet wird.
     
                                                           Wolf Plöger, 13.12.2007                                                            
 
                                                           
Kalypso 2.0.6.1      04. Januar 2008
-------------------------------------
     
1.)  Fehlerbehebung in Wehrberechnung fuer rundkronige und scharfkantige Wehre.
     
2.)  Bereitstellen von zwei neuen Ergebnisdateien fuer RV "konstantes Reibungsgefaelle"
     zur Ausgabe der Energiehoehen-Abfluss-Beziehungen an Bruecken und Wehren
     EOW_QBreucke_EUW und EOW_QWehre_EUW 
     
                                                           Monika Donner, 04.01.2008                                                           

Kalypso 2.0.6.2     09. Januar 2008
-------------------------------------                                                           

1.)  Zusätzliche Option in "Kalypso_add.cfg": Es kann nun auch der Parameter
     CALC_KM_INTERN auf "true" oder "false" gesetzt werden und so die interne
     Kalinin-Miljukow-Berechnung ausgeschaltet werden, da teilweise fehlerhaft.

2.)  Reduktion der maximalen Gerinneabschnitte auf 750. Maximalen Abflüsse
     sind weiter bei 100, könnten aber auch reduziert werden um signifikante 
     Reduktion der Speicherbelegung zu erreichen.
     
                                                           Wolf Plöger, 09.01.2008     


Kalypso 2.0.6.3     10. Januar 2008
-------------------------------------                                                           

1.)  Neue Option zum Anstossen des Rechenkerns mittels angehängter Argumente beim
     Aufruf der Kalypso1d.exe. Bei diesem Aufruf muss das erste Argument ein "n" sein fuer 
     den Modus Kalypso und das zweite Argument der Pfad der INI-datei:
         z.B.: "D:\FlussXX\Kalypso-1D.exe n D:\FlussXX\kalypso-1D.ini"

     Diese neue Option ist nur auf einen Start in der KalypsoWSPM Umgebung geeignet!
     Alle alten Projekte bzw. Oberflächen egal ob in KalypsoWSPM, WspWin oder Manuell
     können wie gehabt aufgrufen werden.
     (Betroffene Routinen: wsp)

2.)  Nicht relevante Meldungen und Hinweise wurden begonnen in die LOG-Datei zuschreiben 
     lediglich Fehlermeldungen, Hinweise vor einem Programmabbruch und Hinweise zum Status
     der Berechnungen verbleiben in der error2.log bzw. werden im Dos-Fenster (WspWin) bzw. 
     in der Konsole (WSPM) ausgegeben.
     (Betroffene Routinen: qbordv, w_ber, wspber, globale_funktion, AIWSP, geomet)

     
                                                           Monika Donner, 10.01.2008    


Kalypso 2.0.6.4     22. Januar 2008
-------------------------------------                                                           

1.)  Verminderung der Iterationsprobleme bei der Berechnung der Wasserspiegellagen unter Abflussstaffelung. Dies
     führt häufig zu Rücksprüngen in der Wasserspiegellage unter zunehmenden Abfluss.
     Ursache der Problematik ist der unstetige Funktionsverlauf zwischen Reibungsgefälle und dem Wasserspiegel.
     So kommt es bei der Benetzung des Vorlandes ganz grundsätzlich zu einem sprunghaftem Anstieg des 
     Reibungsgefälles, der um so extremer ausfällt, wenn zusätzlich auf dem Vorland eine Senke zu füllen ist.
 
     Die Probleme bei der Berechnung eines Wasserspiegels wurden weiterstgehend behoben durch:
     - eine Optimierung der Schätzwertbildung während der Iteration
     - Erhöhung der maximale Anzahl der Konvergenzschritte (Kennzahl 50)
     - Behalten bester Werte unter allen Kennzahlen
     (Betroffene Routine: station)   
							
							 Edgar Nehlsen & Monika Donner, 21.01.2008 

                                                      
Kalypso 2.0.6.6     07. Februar 2008
-------------------------------------                                                           

1.)  Einbau des "Debug-Modus" fuer Wehre in der inneren Abfluss-Schleife NUR fuer die 
     Berechnungsvariante "konstantes Reibungsgefaelle". Durch diese neue Option werden nicht
     konvergierende inneren Abfluesse (Schleife 2000) ausgelassen und der naechste Abflusswert
     (qw+1) nach der Ausgabe einer Warnung berechnet.
  
2.)  BUGFIX in der Brückenberechnung: Betrifft alle Berechnungsvarianten!!!
     Fehlerhafte Uebergabe von der Brueckenberechnung (br-konv) in die Abflussberechnung (abfluss). 
     Statt der Differenz zwischen Energiehoehe in Profil 1 (OW-Bruecke) und WSP in Profil 3 
     (UW-Brücke) wurde die Differenz zwischen zwei Energiehoehen gebildet.
     --> Korrektur der uebergebenen Parameter aus br-konv nach abfluss
							
							          Monika Donner, 07.02.2008
                                                          

Kalypso 2.1.0.0     19. Februar 2008
-------------------------------------                                                           

1.)  Neue Subroutine ROHRE zur Berechnung von Rohren/Durchlässen bei der Berechnungsvariante 
     "konstantes Reibungsgefälle": Die Berechnng der Rohrprofile (k,e,m,t) erfolgt wasserstands-
     gesteuert und nicht abflussgesteuert. Die Schrittzahl wurde von der äusseren Abflussschleife 
     (QBORDV) übernommen, so dass die Anzahl der berechneten Stützstellen gleichbleibt. 
     (Betroffene Routinen: Rohre, Wspanf, Verluste) 

2.)  Fehlerbehebung:
     Beim Einlesen der Daten (Lage, Geometrie, etc.) für Maulprofile aus der Profil- Datei, 
     gesteuert über die Subroutine INTDAT wurde als "Bezgugspunkt Breite" das Sohlgefälle und 
     als "Bezugspunkt Höhe" der Bereitenwert eingelesen.
     (Betroffene Routine: Intdat)

3.)  Fehlerbehebung:
     Bei der Berechnung der Rohrgeometrie in der Subroutine UF wurde für Kreis-, Maul- und 
     Eiprofile angenommen, dass die Wasserspiegelbreite gleich dem benetzen Umfang ist.
     (Betroffene Routine: Uf)      
							
					             Edgar Nehlsen & Monika Donner, 19.02.2008


Kalypso 2.1.1.0      26. Februar 2008
-------------------------------------                                                           

1.)  Bug-Fix:
     Beim Einlesen der INI-Datei fuer einen Start im Modus "Kalypso" (also nicht WspWin) wurden zwar alle Einstellungen
     richtig eingelesen, aber beim Rückkehr in die HauptRoutine mit Default Belegungen ueberschrieben mit:
             REIBUNGSVERLUST = 'TRAPEZ'   und    ITERATIONSART = 'SIMPLE'
     Daher wurden für alle Berechnungsarten die Einstellung REIBUNGSVERLUST='GEOMET' und ITERATIONSART='EXACT ' 
     bis dato falsch übernommen!  
							
							                Monika Donner, 26.02.2008 



Kalypso 2.1.1.1r      10. März 2008
-------------------------------------                                                           

1.)  Zurückholen der ursprünglichen Energiehöhenberechnung (hen) bzw. Verlusthöhen-Berechnung (hv):
     Die Energiehöhe wurde seit Version 2.0.4.3 (07. August 2007) mit einem vereinfachten Ansatz ueber
     hv = v²/2g aus Stabilitätsgründen berechnet. Durch weitere Stabilisierung des Energiehöhenberechnung
     wird nun der ursprüngliche Ansatz: hv = phion / phiun**3 * q * q / g / 2. nach BWK 1, S.15 zurückgeholt.

     Diese Korrektur wirkt sich minimal (im cm Bereich) auf alle Rechenvarianten und alle Ergebnisse aus!
     Betroffene SUBR: eb2ks   							
							                Monika Donner, 10.03.2008 



Kalypso 2.1.2.1      07. Mai 2008
-------------------------------------    
Verbesserung der Brückenberechnung fuer Probleme bei reinem Druckabfluss

1)   Vermeidung geschätzter Energiehöhen (hea und heb) in Profil 1, die kleiner sind als die Energiehöhe
     im Unterwasser-Profil 3: Dies führte bislang zum Abbruch der Berechnung insbesondere unter reinem 
     Druckabfluss in der Brücke. Zugehörige Fehlerausgabe: 
         Differenz h0 zwischen Energiehoehe in Profil 1 (OW-Bruecke)
           und WSP in Profil 3 (UW-Brücke) ist NEGATIV
           --> Programmabbruch in ABFLUSS bei Brueckenberechnung

Folgen der Aenderung:
     Zwischen Version 2.1.1.1r und 2.1.2.1 treten weder in der Energiehöhe im Oberwasser 
     noch im Wasserstand Abweichungen auf. Getestet wurde 3 einzelne Brücken und an der Kollau mit 
     20 Brücken ueber verschiedene Abflussintervalle. Abfluesse die zum Abbruch der Berechnung
     führten, koennen mit der neuen Version 2.1.2.1 berechnet werden.

5)  Zulassen der Steuerung fuer extreme Rauheiten:
    Bislang wurden immer die Einstellungen CALC_KM_INTERN =true und  USE_EXTREM_ROUGH =false gesetzt
    Nun gilt diese Belegung nur noch, wenn der aufruf NICHT aus 'KALYPSO'(also WSPM oder Manueller Aufruf) 
    erfolgt.

    --> Achtung: Wenn vorher die Einstellung in der INI mit "USE_EXTREM_ROUGH = true" gesetzt war, kommen nun
        andere Ergebnisse raus, da die extremen Rauheiten ab Version 2.1.2.1 wirklich mit berücksichtigt
        werden. 


							                Monika Donner, 07.05.2008 



Kalypso 2.1.3.0      09. Juli 2008
-------------------------------------    
1) Korrektur fuer Bauwerks-Berechnung fuer Berechnungsvariante "konstantes Reibungsgefälle". 

   Hierbei wurde bislang in der inneren Abflussschleife nicht die tatsächliche Rauheit, sondern 
   weiterhin das vorgegebene Reibungsgefälle verwendet. --> Bug
   Dies führte zu einer gerinfügigen Abweichung (cm-Bereich) beim Vergleich zwischen einer normalen
   Wasserspiegellinien-Berechnung an einer Brücke (oder an einem Wehr) und den Ergebnissen aus der
   Huw-Q-How oder Euw-Q-Eow. Diese Abweichung zeigte sich insbesondere bei niedrigen Abflüssen und sehr 
   kleinen vorgegebenen Reibungsgefällen.

   Grundsätzlich sollen in der inneren Abflussschleife alle Verluste (auch der echte Sohlrauheitsverlust)
   berücksichtigt werden. Dementsprechend wurde zur Abfrage der BERECHNUNGSMODUS eine Abfrage nach der 
   Kennung "Q_ABFRAGE" ergänzt. Diese Kennung "Q_Abfrage" lieferte fuer die Berechnung mit
   konstantem Reibungsgefaelle die Auskunft, ob die Berechnung in einer inneren Abflussschleife 
   einer Bruecke oder eines Bauwerkes befindet, wo örtlich und echte Reibungsverluste zu
   berücksichtigen sind oder in Berechnung eines Normalprofils bzw. der äußeren Abflussschleife, 
   bei der das vorgegebene Reibungsgefaelle genutzt werden soll. Die Kennung wird auch verwendetet,
   um in der inneren Abflussschleife an Bruecken und Wehren die Ausgaben schlank zuhalten.

   Die Korrektur des Rauheitsverlustes bewirkt eine leichte Veränderung der Ergebnisse fuer Berechnungsvariante 
   "konstantes Reibungsgefälle" an Brücken- und Wehr-Bauwerken (instationäre Bauwerkstabellen). 

   Keine Auswirkungen gibt es fuer alle anderen Berechnungsvarianten und normale Profile.


							                Monika Donner, 09.07.2008 



Kalypso 2.1.4.0      23. Juli 2008
-------------------------------------    
1) BUGFIX in der Oberwasser-Berechnung der Bauwerke fuer alle Berechnungsvarianten

   Probleme an steile Gewässer und/ oder sehr hohen Fließgeschwindigkeiten: 
   WSP-Anstieg im Oberwasser der Brücken lagen zwischen Version 1.2RC vom 11.12.2006
   und Version 1.3.1.2 vom 27.04.2007. Diese Ergebnisse der Versionen 
   ab 1.3.1.2 bis heute sind identisch.

   Ursache: Korrektur der Übergabe des Wasserspiegels hr bzw. hrow in und aus der wspow.

   Hintergrund: Für den Zustand "Wehrüberfall & Druckabfluss" (nicht Überströmen!) an Brücken 
   wurde OW-Wasserstand nicht korrekt uebergeben. Dabei wurde der Wasserspiegelanstieg
   überschätzt und kann über dem WSP der Versionen vor dem 27.04.2007 liegen. 
   Mit zunehmendem Überströmen der Brücke gleichen sich die Wasserspiegel wieder an. 

   Die wspow wird für Wehre und für Brücken jeweils zur ersten Berechnung des Oberwasserstandes
   verwendet. Dabei wurde bis zum 27.04.2007 der berechnete Oberwasserstand fuer Wehre nicht richtig
   übergeben. Dies führte zum Absacken des Wasserstandes im Oberwasser des Wehres. Daher wurde die
   Übergabe des Parameters hr (Wasserstand) in der Version vom 27.04.2007 in der Routine wspow zur 
   Verbesserung der Wehrberechnung korrigiert. An Beispielgewässern zeigten sich damals
   (wie heute) keine Veränderungen an Brücken. 

   Für die Wehre war diese Korrektur richtig, für die Brücken jedoch nicht. Somit wurde nun die wspow
   soweit angepasst, dass und für Wehre die korrigierte Oberwasserberechnung (wie seit 27.04.2007)
   stattfindet und für Brücken die ursprüngliche Oberwasserberechnung zurückgeholt.

   Vergleiche zwischen der Version 2.1.4.0 und 2.1.3.0 bzw. 2.1.2.0 ergaben:
   -------------------------------------------------------------------------
    * Keine WSP-Änderung für Gewässer mit flachem Gefälle. Abweichungen wenn, dann nur im OW
      von Brücken lokale (<2 Profile), maximale Abweichung -9 bzw. -2 cm. 
      Alle anderen Abweichungen < 1mm bis hin zu Null. 
    * Änderung bzw. Absinken des Wasserspiegels für steile Gewässer und/ oder sehr
      hohen Fließgeschwindigkeiten (ca. > 3 m/s). Abweichungem im OW der Brücken, wenn Zustand
      "Wehrüberfall & Druckabfluss" vorlag, sonst nicht!!

							                Monika Donner, 23.07.2008 
  
   Hinweis:
   -----------
   Der Rechenkern kann KEINE negativen Wasserspiegellage verarbeiten. Dies betrifft auch die Zwischen-
   iterationen zur Berechnung der Wasserspiegellagen.
   Ausweg: Ein Anheben des gesamten Gewässers um +dz!
							                Monika Donner, 04.11.2008



Kalypso 2.1.4.1      07. November 2008
-------------------------------------    
1) BUGFIX fuer Abfluss-Änderungen entlang eines Gewässers speziell im Oberwasser einer Brücke 
   (Wasserspiegellagen-Berechnung)

   Die Abfrage ob ein neuer Abfluss-Wert an einer Station vorhanden ist, findet an jedem neu
   berechneten Profil (n, w, b, t, k, usw.) statt. Innerhalb einer Brückenbereich mit Impulsbilanz 
   zwischen OW und UW kann keine Abflussänderung angesetzt werden.
   Wurde ein Abflusswert genau zwischen dem Profil der Brücke b und dem interpolierten Profil im Oberwasser
   der Brücke (also Station(b)+0,006 km) definiert, so konnte bislang der Abflusswert mit seiner Abfluss-Station
   kein Referenzprofil mehr finden, da die Berechnung schon über das Abfluss-Profil hinausgelaufen ist.
   Nun wird eine Warnung ausgegeben und geprüft ob das zweit-zurückliegende Profil (nprof-2) eine Brücke war
   Die Abflussänderung wird dann im Oberwasser der Brücke angesetzt.

   Anmerkung: Abflussänderungen innerhalb von und an Bauwerken sind vom Anwender immer kritisch
              zu überdenken!

									Monika Donner, 07.11.2008

Kalypso 2.1.5.0      20. August 2009
-------------------------------------    
1) BUGFIX fuer negative Wasserspiegellagen bzw. negative GOK im Profil
   (alle Berechnungen: Wasserspiegellage bis Polynomberechnungen)

   Kontrolle und Korrektur in allen Berechnungsroutinen für negative WSP und/ oder negative
   Geländekanten im Profil. Nun ist auch ein Start mit einem negativen Wasserstand im Unterwasser
   Profil möglich. 
   Negativer WSP geht nach wie vor nicht in Wehren und Brücken! Eine negative Geometrie 
   bei positivem Wasserspigel funktioniert jedoch.

									Monika Donner, 20.08.2009

Kalypso 2.1.5.1      08. Oktober 2009
-------------------------------------    
1) BUGFIX fuer Längsschnitte bei Fließgesetz nach G. Manning-Strickler (kst-Werte)
  
   Bislang wurde die Laegsschnitt.txt für Manning-Berechnungen in Kalypso-WSPM, aber
   auch in WspWin nicht generiert, sondern in das DOS-Fenster geschrieben. 
   Nun gilt das nur noch für die Bordvoll-Berechnung, bei der kein Laengsschnitt erzeugt werden soll.

									Monika Donner, 08.10.2009


Kalypso 2.1.5.2      09. Januar 2010
-------------------------------------    
1) BUGFIX fuer Längsschnitte bei Fließgesetz nach G. Manning-Strickler (kst-Werte)
  
   Die Berechnung der Schubspannung "Tau" fuer die Ausgabe in der Laegsschnitt.txt wurde 
   fuer Manning-Kst-Berechnungen deaktiviert. 
   --> Für Manning-Kst-Berechnungen steht in allen Laegsschnitten nun 0.000

									Monika Donner, 09.01.2009
 