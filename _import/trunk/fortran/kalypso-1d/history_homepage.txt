Version 273   Juni 2004
-----------------------
1.)  Bordvollberechnung stationär-ungleichförmig: die Fehlerhafte Ausgabe der Längsschnitte bei
     Berechnungen von mehr als 53 Profilen wurde korrigiert

                                            Wolf Plöger, Juni 2004


Version 274 20.7.2004
---------------------
1.)  Bordvollberechnung stationär-ungleichförmig:
	- Eingabeparameter (qmax, qmin, qstep) werden beim Einlesen wieder auf die Konsole ausgegeben
	- die Dateien für die W/Q Beziehung bzw. die einzelnen WSP-Berechnungen werden jetzt mit
     ausreichend Stellen benamt, so dass
         a) Abflüsse > 1000 m3 möglich sind und
         b) keine Dateien mehr gleich benamt werden

                                            Wolf Plöger, 20. Juli 2004

Kalypso 0.9.2  28.07.2004
-------------------------
1.)  Umwandlung des codes in FORTRAN90

                                            Wolf Plöger, 28. Juli 2004


Kalypso 0.9.3  28.07.2004
-------------------------
1.)  Behebung einiger Übergabefehler.

2.)  Behebung einer Reihe von FORTRAN-Standard Verletzungen.

                                            Wolf Plöger, 28. Juli 2004

Kalypso 1.0  12.08.2004
-------------------------
1.)  Das Programm KALYPSO-1D und alle seine Subroutinen wurden unter die
     GNU Lesser General Public License gestellt und sind damit offene Codes!

                                            Wolf Plöger, 12. August 2004

Kalypso 1.0.1 19.10.2004
------------------------
1.)  Fehler beim Lesen der Kommentarzeile (Subroutine READCOMMENT in proep.f90)
     in Profildateien wurde behoben. Fehler ist aufgetreten bei deutschen Sonderzeichen, 
     die FORTRAN nicht lesen kann. Durch Verwendung von IOSTAT in READ-Befehl konnte
     dieser abgefangen werden.
                                            Wolf Plöger 19. Oktober 2004

Kalypso 1.0.2 13.01.2005
------------------------
1.)  Anpassungen beim Einlesen der Kreisprofile.

                                            Wolf Plöger 13. Januar 2005

Kalypso 1.0.3 02.02.2005
------------------------
1.)  Erhöhung der maximal möglichen Profile auf 500. Weitere Erhöhungen sind
     ab sofort ohne Probleme möglich.

                                            Wolf Plöger 02. Februar 2005



Kalypso 1.0.4 28.02.2005
------------------------
1.)  Als Kennung fuer den Block mit den Rauhigkeitswerten ist jetzt neben
     'RAUHIGKEIT' auch 'RAUHEIT' erlaubt. 
     (Problem ist aufgetreten, weil der WSPWIN Mapper beim Einlesen des Triple-Formats
     nur die Kennung 'RAUHEIT KS' erlaubt. Somit werden durch den Mapper teilweise
     Profildateien erzeugt, die statt RAUHIGKEIT die Kennung RAUHEIT aufweisen.)

                                            Wolf Plöger 28. Februar 2005

Kalypso 1.0.5  April 2005
-------------------------
1.)  Einige Änderungen in der Programmstruktur:

2.)  Erweiterung des Codes, so dass im DATH-Ordner die Datei "laengsschnitt.txt" erzeugt wird.
     Diese beinhaltet den gleichen Längsschnitt, wie die standardmäßig ausgegebenen WSPWin-Datei,
     allerdings in einer einfachen Tabellenform, die leicht in EXCEL importiert werden kann!
    
3.)  Änderung der Subroutine PROE_PRO (siehe Version 1.0.1). Jetzt können auch Kommentare 
     mit mehr als einer Zeile verarbeitet werden, wenn Sie nicht am Ende der Profildatei stehen.

                                              Wolf Plöger, 21.04.2005


Kalypso 1.0.6  02.05.2005
-----------------------------
A C H T U N G:  In der Vorgängerversion 1.0.5 haben sich zwei kleine Bugs eingeschlichen, 
deshalb bitte ab sofort nur noch die Version 1.0.6 benutzen!

A C H T U N G:  Durch die erhöhte Genauigkeit kann die Berechnung teils deutlich
länger dauern. Auch die Ergebnisse können teilweise leicht von den Ergebnissen
der Vorgängerversionen abweichen!

1.)  Erhöhung der Genauigkeit bei der iterativen Berechnung.

2.)  Umbenennung der Kontrolldatei von "Kontroll" nach "Kontroll.log". 

3.)  Änderung der Ausgabe in der MS-DOS Box. Statt der Uhrzeit, des Datums und der Versionsnummer
     erscheint nun das aktuell berechnete Profil.

                                                Wolf Plöger 02.05.2005


Kalypso 1.0.7  11.05.2005
-----------------------------
1.)  Problem bei Brückenberechnung behoben (Es kam vor, dass im Querprofil weitere Punkte 
     interpoliert wurden, dort wurde in einem speziellen Fall verkehrt interpoliert).

                                                Wolf Plöger 11.05.2005


Kalypso 1.0.8  Mai.05.2005
-----------------------------

1.)  Einige Bereinigungsarbeiten am Code, ohne die Berechnungsergebnisse zu verändern.

                                                    Wolf Plöger, 25.05.2005


Kalypso 1.0.9  Mai.05.2005
-----------------------------
1.)  Erhöhung der maximalen Zeichenlänge auf 250. Dies funktioniert nun auf
     FORTRAN-Seite, allerdings kann die Oberfläche WSPWin 8.0.3 diese langen 
     Dateinamen noch nicht verarbeiten.

                                                    Wolf Plöger, 30.05.2005

Kalypso 1.0.10   Juli 2005
--------------------------
1.)  Bug-Fix bei der Lambdawert Berechnung für kleine Wassertiefen.

2.)  Bug-Fix bei der Berechnung des Formbeiwertes nach MARCHI (BWK, Merkblatt 1, 1999, S. 20). 

3.)  Änderung des Formates der Tabellenausgabe. Formbeiwert wird nun mit ausgegeben.

4.)  Zusätzlich Berechnung der Sohlschubspannung für den Flussschlauch:

       tau = lambda_fl/8 * rho * v_fl^2

     Dieser Wert nun in Laengsschnitt.txt ausgegeben.

5.)  Überarbeitung der Ausgabedatei LAENGSSCHNITT.TXT. 

                                                    Wolf Plöger, 13.07.2005

Kalypso 1.0.11  Juli 2005
-------------------------
1.)  Berechnung wird unterbrochen, wenn bestimmte Fehler auftreten. Es 
     öffnet sich nun ein Pop-Up Fenster mit weiteren Informationen. Der 
     Benutzer kann wählen, ob die Berechnung fortgesetzt werden soll 
     (z.B. ohne Wehre) oder ob die Berechnung beendet werden soll.

                                                    Wolf Plöger, 19.07.2005

Kalypso 1.0.12  August 2005
---------------------------
1.)  Bei der Berechnung von Kalinin-Miljukow-Parametern wird nun zusätzlich
     für jede Profildatei eine Datei mit der Endung *.km erzeugt und in den
     /PROF/ Ordner abgelegt. Diese beinhaltet die berechnete WQ-Beziehung
     für jedes Profil des berechneten Strangs.
     (Hinweis: Die Berechnung der Kalinin-Miljukow-Parameter soll in Zukunft
     in ein eigenständiges Programm ausgegliedert werden, wahrscheinlich
     in KALYPSO-NA Oberfläche.)

2.)  Nicht behobener BUG bei der Brückenberechnung: Wenn auf dem Vorland neben
     der eigentlichen Brücke eine Senke auftritt kann es bei einem hohen
     Unterwasserstand zu Berechnungsproblemen kommen.
     -> Die Senke auf dem Vorland muss mindestens auf die Höhe des 
        Schnittpunktes zwischen Brückenoberkante und Gelände angehoben 
        werden.
     -> Fehlermeldung bei diesem BUG wurde verbessert.

                                                    Wolf Plöger, 19.07.2005

Kalypso 1.0.13  08.11.2005
--------------------------
1.)  Tabelle der KM-Ausgabedatei bekommt neuen und leichter verständlichen Kopf.

2.)  Bei der Berechnung von Sonderprofilen wird der Formbeiwert nicht mehr
     berücksichtigt.

                                                    Wolf Plöger, 08.11.2005

Kalypso 1.0.14     08.12.2005
-----------------------------
1.)  Es wird eine neue Datei (lambda_i.txt in /DATH/) angelegt, in der die 
     einzelnen berechneten Lambdawerte der Rauhigkeitsabschnitte im Flussschlauch
     ausgegeben werden. Für die Vorländer werden die mittleren Werte ausgegeben.
     Zusätzlich wird für die einzelnen Knoten die jeweilige mittlerer 
     Fließgeschwindigkeit des Abschnittes (Vorland links, rechts, Flussschlauch)
     ausgegeben.

5.)  Verbesserung der Fehlerausgabe, wenn keine Grundrauheit angegeben
     wurde (z.B. fehlerhafte Verschneidung im WSPWIN Mapper).

                                                    Wolf Plöger, 08.12.2005

Kalypso 1.0.15   Januar 2006
----------------------------
1.)  Bugfix bei der Berechnung von extrem komplexen Brücken.
 
                                                    Wolf Plöger, 17.01.2006


Kalypso 1.0.16   Februar 2006
-----------------------------
1.)  Zusätzliche Prüfung der eingegebenen Bewuchsparameter. Bewuchs zwischen den
     Trennflächen wird direkt gelöscht, Inkonsistente Dateieneingabe, z.B.
     ax= 5.0,  ay = 5.0,  dp = 0.0 wird geprüft und dann Bewuchs an dieser Stelle
     entfernt. Warnhinweise werden in error2.log geschrieben.

2.)  Verbesserung der Iteration zur Bestimmung der Trennflächenrauhigkeit.

                                                    Wolf Plöger, 02.02.2006


Kalypso 1.0.17   März 2006
--------------------------
1.)  BUG-Fix bei der Ausgabe der *.km Dateien.

2.)  "Verschönerung" der Ausgabe in MS-DOS Box und in error2.log.

3.)  Neue verbesserte Fehlerausgabe, wenn bei Bordvollberechung kein Abfluss
     berechnet wurde.

4.)  Datei mit Kontrollausgaben KONTROLL.LOG wird ab sofort immer ausgegeben.

                                                    Wolf Plöger, 13.03.2006


Kalypso 1.0.18   April 2006
---------------------------
1.)  Erhöhung der Anzahl der maximal möglichen Abflussänderungen in einem Flusslauf von 10 auf 50.

2.)  Erweiterung der Ausgabe in "laengsschnitt.txt"

                                                    Wolf Plöger, 26.04.2006


Kalypso 1.1 und folgende (a-g),  April-Juni 2006
------------------------------------------------
1.)  Umstellung des Codes auf neue Konfigurationsdatei für KALYPSO-Oberfläche.



Kalypso 1.2 RC1   11. Dezember 2006
-----------------------------------
1.)  Neue Berechnungsmethode für den Verzögerungsverlust hinzugefügt.
     Dieser Verlust wurde bisher über die Verfahren DVWK, Björnsen oder DFG
     bestimmt. Hierbei wurde die Verlusthöhe teilweise deutlich überschätzt.
     Neues Verfahren wird nach BWK Merkblatt 1, 1999 (S.28f) implemetiert.
     Bei alter WSPWIN-Oberfläche wird bei Wahl der Option DFG intern nun
     nach BWK gerechnet! 
     Bei KALYPSO-Oberfläche wird DFG-Option durch BWK-Option ersetzt.

                                                    Wolf Plöger, 11.12.2006

Kalypso 1.3    14. Febvruar 2007
--------------------------------
1.)  Umstieg auf freien G95 Compiler.

                                                    Wolf Plöger, 14.02.2007

                                                    
Kalypso 1.3.1      04. April 2007
-----------------------------------
1.)  Generierung der Längsschnitt.txt auch fuer die stat. ungleichförmige 
     Berechnung (=Abfluss-Steigergung):      

2.)  Ueberarbeitung und BUG-Fix der Wehrberechnung	 
	   					    Monika Donner, 04.04.2007
                                               
                                                   
Kalypso 1.3.1.2     26. April 2007
-----------------------------------    
1.)  Ueberarbeitung und BUG-Fix der Wehrberechnung für rund- & scharfkronige Wehre
						    Monika Donner, 26.04.2007

Kalypso 2.0.0        04. Mai 2007
-----------------------------------
1.)  Einrichtung einer neue 4.te Berechnungsvariante unter Vorgabe eines konstanten
     Reibungsgefälles. Ziel der neuen Berechnungsvariante ist die Generierung eines 
     1d-Stranges und der notwendigen Polynome und Daten für die instationäre Berechnung
     nach Teschke. 
     In der neuen Berechnungsvariante werden unter der Vorgabe eines konstanten 
     REIBUNGSGEFÄLLES folgende Effekte berücksichtigt:
     - Kontinuierliche Verluste entlang des Fließweges infolge Reibung, Trennflächen 
       und Bewuchs.
     - Ausbildung von Wasserstand-Abfluss-Beziehungen im OW und UW von Bauwerken: 
       derzeit NUR für Wehre. In Wehren werden alle örtlichen Verluste mitberücksichtigt.    
     - Für die Erzeugung der instationären w-Q-Polynome für die normalen Profile
       sollten alle Bauwerke deaktiviert werden.
     
     Für die Berechnungsvariante müssen u.a. folgende Vorgaben erfolgen:
     - Konstantes Reibungsgefälle
     - Abflussintervall mit Qmin, Qmax und dQ
     - KEIN Verlustbeiwert beta (infolge Einschnürung oder Aufweitung)
     - Fließwiderstand ausschließlich für Darcy-Weisbach ohne Formwiderstand (kein kst)
     - Brücken deaktivieren!
     
     Diese neue Berechnungsvariante lässt sich NUR über die Oberfläche WSPM ansteuern.
                          
                                                      Monika Donner, 04.05.2007

 Kalypso 2.0.1        27. Juni 2007
-----------------------------------

1.)  Anpassung der Ausgabe in den *.km-Dateien. In der ersten (Kopf-)Zeile
     wird nun zusätzlich die bordvolle Höhe ausgegeben. Dies dient der angepassten
     Berechnung der Kalinin-Miljukow-Parameter k und n.
     
                                                         Wolf Plöger, 27.06.2007     
                                                    
 Kalypso 2.0.2        03. Juli 2007
-----------------------------------

1.)  Bugfix: Bei der Stationär-ungleichförmigen Bordvollberechnung bei gleichzeitiger
     Ausgabe der W-Q-Dateien (*.pro) ist bei der Interpolation von Profilen im 
     Brückenbereich ein Fehler aufgetreten -> Behoben.

                                                         Wolf Plöger, 03.07.2007	 

 Kalypso 2.0.3        04. Juli 2007
-----------------------------------

1.)  Bugfix: Der Impulsstrombeiwert (alpha_IW) und Energiestrombeiwert (alpha_EW) nahmen 
     bislang bei hohen Abflüssen unsinnige Werte von bis über 100 an.

2.)  Bugfix: Der Fall, das sich das berechnete Energieliniegefälle "is" (in Subr eb2ks) grösser 
     eins oder kleiner Null wird, wurde Abgefangen durch ein Zurücksetzen des Energieliniegefälle 
     auf 0.001 (= Anfangswert für die erste Iteration am ersten Profil). 

3.)  Bugfix: Berechnung der Verlusthoehe infolge Reibung.

4.)  Erzeugung einer neuen Ausgabedatei für alle Berechnungen unter einer Abflussstaffelung
     Es wird ein Längsschnitt mit allen Profilen und allen Abflüssen erzeugt. Zusätzlich sind 
     die Teilabflüsse Q, Impulsstrombeiwert (alpha_IW) und Energiestrombeiwert (alpha_EW) enthalten.

5.)  Verbesserung: Der Trennflächen-Widerstandbeiwertes (Lambda) wurde auf ein 
     Maximum von 2.00 begrenzt. 
                                                       Monika Donner/ Wolf Plöger, 04.07.2007

 Kalypso 2.0.3.1      04. Juli 2007
-----------------------------------
1.)  Bugfix: Bei der stat.-unglf. Berechnung wurde die neue Datei "Q_LangSchnitt.txt" nicht
     richtig geschlossen.
                                                         Wolf Plöger, 05.07.2007     
                                                         	                                                 
Kalypso 2.0.4.1      31. Juli 2007
-----------------------------------
Bugfix Brückenverluste im Längsschnitt
     Behalten der Brückenprofile in der Laengsschnitt.txt und Q_LangSchnitt.txt.     

                                                         Monika Donner, 31.07.2007 

Kalypso 2.0.4.2      03. August 2007
-----------------------------------
1.)  Bugfix innere Abflussschleife ueber die Brücken (RV: konstantes Rebungsgefaelle)
     Schutz der Ergebnisse an der Brücke aus der äußeren Q-Schleife vor einem Überschreiben
     bei der Inneren Q-Schleife. 

2.)  Erweiterung der Laengsschnitt.txt um die Einträge der Teilabfluesse, Impuls- und 
     Energiestrombeiwert sowie Reibungsgefälle. 
                                                         Monika Donner, 03.08.2007 



Kalypso 2.0.4.3      07. August 2007
-----------------------------------
1.)  Bugfix innere Abflussschleife ueber die Brücken: (RV: konstantes Rebungsgefaelle)
     Fehler-Korrektur beim Zurückholen der alten Ergebnisse im UW der Brücke aus der äußeren 
     Q-Schleife. 

2.)  Bugfix: Energiehöhen- bzw. Verlusthöhen-Berechnung

                                                       Monika Donner, 07.08.2007 
                                                       
Kalypso 2.0.4.4      15. August 2007
-----------------------------------
1.)  Bugfix bei der automatischen ausserplanmaessigen Interpolation von Profilen.
     
2.)  Bugfix: Ausgabe im MS-DOS Fenster.

                                                       Wolf Plöger, 15.08.2007

Kalypso 2.0.5       17. August 2007
-----------------------------------
1.)  Erweiterung der Fließwiderstandsberechnung um extrem rauhes Regime. Verwendet
     wird die Formel nach Aguirre-Pe und Fuentes, wobei zwischen h=0,1*ks und h=0,3*ks
     eine lineare Übergangsfunktion zwischen Colebrook/White und Aguirre-Pe/Fuentes
     verwendet wird.
     Es besteht nun keine Begrenzung mehr bei der Wahl des ks-Wertes bei niedrigen
     Wassertiefen! Das Verfahren nach Aguirre-Pe/Fuentes führt bei niederigen Abflüssen
     zu größeren Fließwiderständen und damit zu höheren Wasserspiegeln!

                                                           Wolf Plöger, 17.08.2007 

Kalypso 2.0.5.2      3. Dezember 2007
-------------------------------------
1.)  Korrekturen und Erneuerungen fuer die Wehrroutine: w_ber, beiwert, g_wehr:       
     Bugfix fuer Sicherung der letzten Werte in w_ber bei "keiner Konvergenz in der Engergiehoehen
     Iteration". Veränderung fuer die neue Energiehoehenschaetzung im OW des Wehres.
     Neue Berechnungsformel für Überströmen: Beim Überströmen wird ein sogenannter Anstroemverlust 
     ueber den Verlust-Beiwert K_verlust berücksichtigt. So stellt sich ein glatterer Übergang zwischen 
     vollkommenem bzw. unvollkommenem Überfall und Überströmen ein. Wird der Verlust-Beiwert kleiner eins, 
     wird die ursprüngliche Gleichung ohne Verlust-Beiwert angesetzt.
        
2.)  Entkopplung der Berechnungsvarainte konstantes Reibungsgefälle zwischen den Profilen. Es werden keine
     Startwerte mehr aus dem Unterwasser vorgegeben.
     Betroffene Routinen: wspber, wspanf, station, verluste, eb2ks

                                                           Monika Donner, 03.12.2007  
                                                          