<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            category="org.kalypso.model.wspm.ui.preferences.KalypsoWspmPreferencePage"
            class="org.kalypso.model.wspm.pdb.ui.internal.preferences.WspmPdbPreferencePage"
            id="WspmPdbPreferencePage"
            name="Cross Section Database">
      </page>
   </extension>
   <extension
         point="org.eclipse.ui.views">
      <category
            id="org.kalypso.model.wspm.pdb.ui.viewCategory"
            name="Cross Section Database"
            parentCategory="org.kalypso.ui.kalypso">
      </category>
      <view
            allowMultiple="false"
            category="org.kalypso.model.wspm.pdb.ui.viewCategory"
            class="org.kalypso.model.wspm.pdb.ui.internal.preferences.PdbView"
            icon="icons/pdb.gif"
            id="PdbView"
            name="Profildatenbank"
            restorable="true">
      </view>
   </extension>

   <extension
         point="org.eclipse.ui.menus">
        <menuContribution
              allPopups="false"
              locationURI="toolbar:org.kalypso.model.wspm.tuhh.ui.light.WspmMapViewPart?before=widgets" >
             <command label="" commandId="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.SelectPdbProfiles" style="radio"/>
          </menuContribution>
    </extension>

   <extension
         point="org.eclipse.ui.commands">
      <category
            id="org.kalypso.model.wspm.pdb.ui.commands.categories.MapCategory"
            name="Cross Sections Map Commands">
      </category>
      <command
            categoryId="org.kalypso.model.wspm.pdb.ui.commands.categories.MapCategory"
            id="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.SelectPdbProfiles"
            name="Select Cross Sections">
      </command>
   </extension>

   <extension
         point="org.eclipse.ui.handlers">
      <handler
            commandId="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.SelectPdbProfiles">
         <class
               class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler">
            <parameter
                  name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.widget"
                  value="org.kalypso.model.wspm.pdb.ui.internal.wspm.SelectPdbProfilesWidget">
            </parameter>
            <parameter
                  name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.icon"
                  value="icons/selectProfileWidget.gif">
            </parameter>
            <parameter
                  name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.tooltip"
                  value="Select Cross Sections">
            </parameter>
            <parameter
                  name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.plugin"
                  value="org.kalypso.model.wspm.pdb.ui">
            </parameter>
         </class>
      </handler>
    </extension>         
   
    <extension
          point="org.eclipse.ui.perspectiveExtensions">
       <perspectiveExtension
             targetID="WspmLightPerspective">
          <view
                closeable="false"
                id="PdbView"
                minimized="false"
                moveable="false"
                relationship="stack"
                relative="org.kalypso.model.wspm.tuhh.ui.light.WspmGmvViewPart"
                showTitle="true"
                standalone="false"
                visible="true">
          </view>
       </perspectiveExtension>
    </extension>
    <extension
          point="org.eclipse.ui.startup">
       <startup
             class="org.kalypso.model.wspm.pdb.ui.internal.PdbStartup">
       </startup>
    </extension>

  <!-- GML TREE -->
  <extension point="org.eclipse.ui.commands">
     <command
           categoryId="org.kalypso.ogc.gml.gmltree.category"
           description="Uploads WSPM data into the cross section database as a new state"
           id="org.kalypso.model.wspm.pdb.ui.gmvtree.command.checkinState"
           name="Upload Data into Cross Section Database"/>
  </extension>
  <extension point="org.eclipse.ui.commandImages">
     <image commandId="org.kalypso.model.wspm.pdb.ui.gmvtree.command.checkinState" icon="icons/checkinState.gif"/>
  </extension>
  <extension point="org.eclipse.ui.handlers">
     <handler commandId="org.kalypso.model.wspm.pdb.ui.gmvtree.command.checkinState" class="org.kalypso.model.wspm.pdb.ui.internal.wspm.CheckinStateHandler"/>
  </extension>

  <extension point="org.eclipse.ui.menus">
    <menuContribution allPopups="false" locationURI="toolbar:org.kalypso.model.wspm.tuhh.ui.light.WspmGmvViewPart?after=data">
       <command commandId="org.kalypso.model.wspm.pdb.ui.gmvtree.command.checkinState" style="push"/>
    </menuContribution>
  </extension>
  <extension
        point="org.kalypso.ui.gmlExportWizards">
     <wizard
           category="org.kalypso.model.wspm.tuhh.ui.category.exportGmlWizards"
           class="org.kalypso.model.wspm.pdb.ui.internal.wspm.LocalDataProjectExport"
           icon="icons/exportLocalAsWspm.gif"
           id="org.kalypso.model.wspm.pdb.ui.internal.wspm.LocalDataProjectExport"
           name="KalypsoWSPM">
     </wizard>
  </extension>
   
</plugin>
