\section{Versionen}
\begin{table}[H]
  \centering
  \begin{tabular}{|p{2.5cm}|c|c|p{8.5cm}|}
    \hline
    Version       & von        & bis    & neu in dieser Version \\
                  & Release (cvs-tag)    & & \\
    \hline
    Version 00    &            &                                &  \\
    Version 01    &            &                                &  \\
    Version 02    &            &                                &  \\
    Version 03    &            & 08.07.2004                     &  \\
    Version 2.0   & 08.07.2004 & 12.07.2004                     & Es wird ausschließlich das grap-Format als
                                                                  Niederschlagsformat akzeptiert.\\
    Version 2.0.1 (Ingbüros) & 12.07.2004 & 12.08.2004          & Durch Analyzer Programm aufgeräumt (Fortran Standard,
                                                                  Arguments, Variablen), nicht verwendete Routinen
                                                                  gelöscht.\\
    Version 2.0.2 & 12.08.2004 &                                & Anfangswerte auch aus der Kurzzeitsimulation schreiben.
                                                                  Faltung des Interflows mit ZFT anstelle des
                                                                  Parallelspeichers bei Berechnung mit Hydrotopen. Fehler in
                                                                  der Berechnung des CIN- und CEX-Wertes behoben.
                                                                  Formatänderungen: Darstellung Bodenfeuchte im GraphicTool,
                                                                  Format der Ausgabendateien mit Anfangsdatum\\
    Version 2.0.3 & 2005       &  01.04.2006                           &\\
    Version 2.0.4 & 01.04.2006 &  19.04.2006                    &Aufteilungfaktor Fluss/ Vorland pro Abfluss \\
    Version 2.0.5 & 19.04.2006 &  09.08.2006                    & Mulden Rigolen Berechnung, Format Hydrotopdate\\
    Version 2.0.6 & 09.08.2006 &  13.06.2007                    & Logger, KM-Berechnung\\
    Version 2.0.7 & 13.06.2007 &                                & van Genuchten und Makroporen\\
    Version 2.0.8 &  &                                & Umstellung auf g95 Compiler\\
    \hline
  \end{tabular}
  \caption{Versionsübersicht}
\end{table}

Auf alte Änderungen kann mit Hilfe der Änderungsnummer Bezug genommen werden (z.B. V03m1 - Änderung von Version 02 zu
Version 03 Nummer 1).

\subsection{Version 01 zu Version 02}

\textbf{Erhöhung der Anzahl möglicher Zeitschritte in der KZsimulation (CB, 26.10.2002) (V02m1)}\\
In param.cmn idimt, idimtgw und idim von 1086 auf 2880 gesetzt.

\textbf{Initialisierung der Variable m\_bmax in der Datei inp\_bod\_b.f90 (FN, 29.10.2002) (V02m2)}\\
Variable/Feld m\_bmax mit 0.0 initialisiert. Grund: Wenn Bodenarten nicht richtig aus der Hydrotop-Datei eingelesen
werden, kommt es jetzt direkt zu einer Fehlermeldung. Vorher wurde die do-Schleife (Zeile 109 bis 185) nicht
durchlaufen, da m\_bmax nicht mit Werten ungleich Null "aufgefüllt" wurde. Es kam erst im Anschluss zu der
Fehlermeldung (Zeile 243), welche nicht eindeutig auf die Fehler in der Hydrotop-Datei hinwies.

\textbf{Jahr 2000 Fähigkeit (SK/EP, 10.03.2003) (V02m3)}\\
Gerechnet werden kann nur eine Langzeitsimulation < 100 Jahre (max. 99 Jahre), da das Jahr zum Teil noch 2stellig
übergeben wird. Ansonsten vollständige Jahr 2000 Fähigkeit für Kurz- und Langzeitsimulation hergestellt.
\begin{itemize}
    \item Anfangswerte:\\
          Anfangswerte in der *.konfig Datei sind 8-stellig anzugeben: jjjj,mm,tt\\
          Sollen zu jedem Zeitschritt der Langzeitsimulation Anfangswerte geschrieben werden, ist in der *.konfig Datei als
          Anfangswert für die Kurzzeitsimulation nur 1000001 anzugeben. Werden in der Langzeitsimulation für jeden Tag die
          Anfangswerte herausgeschrieben, kann der erzeugte lzsim Ordner ausgelagert und in der *.konfig Datei der entsprechende
          Pfad angegeben werden mit lzpath=....  Liegt der lzsim Ordner z.B. unter c:$\backslash$daten$\backslash$lzsim ist
          lzpath=c:$\backslash$daten anzugeben. Der Pfad wird nach der beendenden 99999 nach den Anfangswerten angegeben.
          (Feature für KalypsoRRM und Kalypso Forecast Tool).
    \item Eingabeformate:
    \begin{itemize}
        \item Niederschläge:\\
              Langzeit\\
              Jahresblock nasim\\
              1.Zeile Kommentar\\
              2.Zeile 7x,jjjj,mm,tt...\\
              \\
              Kurzeit (grap-Format)\\
              1. Zeile Kommentar\\
              2. Zeile 7x,jjjj,mm,tt...
        \item Klimadaten: (TV-Datei) keine Änderung zum alten Format\\
    \end{itemize}
\end{itemize}

\subsection{Version 02 zu Version 03}

\textbf{Formate Eingabedatei Langzeitniederschläge geändert (SK, 25.07.2003) (V03m1)}\\
Das Eingabeformat der Langzeitniederschläge wird geändert um die Kommunikation mit dem Datacenter zu erleichtern. Die
Niederschläge werden jetzt mit dem Grap-Kurzzeitformat eingelesen. Das Nasim-Blockformat wird nicht mehr unterstützt.
Der Inhalt der Subroutine input\_nied\_lz wird durch die Einleseroutine input\_nied\_kz, die die Datei
input\_nied\_kz\_dat aufruft, ersetzt.

$\Rightarrow$ Kommentar: JH, 16.06.2004\\
In der inp\_nied\_kz wird die Subroutine n\_approx aufgerufen, welche den Niederschlag auf das Simulationszeitintervall
approximiert. Dies ist bei einer Langzeitsimulation nicht erforderlich, da das Niederschlagsintervall dem
Simulationsintervall entspricht (24h).\\
Außerdem wird in der inp\_nied\_kz der eingelesene Niederschlag in eine Niederschlagsintensität umgerechnet. Dies
geschieht jedoch nach dem Aufruf der inp\_nied\_lz (welche durch die inp\_nied\_kz ersetzt ist) aus der Subroutine
input nochmals und ist daher überflüssig. Es geschieht jedoch kein Fehler, da bei der Umrechnung in der inp\_nied\_lz
die Umrechnungsparameter faktn und dt beide zu 24 gesetzt sind und sich damit ein Faktor von 1 ergibt. Siehe auch
V2.0m1, V2.0m2.

\textbf{Anfangsstunde Langzeitsimulation wird auf 00 gesetzt (SK, 25.07.2003) (V03m2)}\\
Um den Austausch mit dem Datacenter zu harmonisieren wird die Anfangsstunde für die Langzeitsimulation auf 00 Uhr
gesetzt (vorher 7:30). Dies geschieht in der Routine inp\_nied\_kz\_dat.dat (Bei Kurzzeitsimulation wird nach wie vor
die Stunde aus der falstart.lst eingelesen).


\textbf{Niederschlagsverschiebung um ein Niederschlagsintervall zurück (EP, 07.11.2003) (V03m3)}\\
Bei der Langzeitsimulation ist eine Verschiebung der Niederschläge um einen Tag zurück erforderlich, da der DWD die
Tagesniederschläge immer für den Zeitraum von 7.30 Uhr eines Tages bis 7.30 Uhr des nächsten Tages misst. D.h. der in
der GRAP-Datei am Tag X angegebene Niederschlag bezieht sich immer auf den Tag davor.

$\Rightarrow$ Kommentar: JH, 14.06.2004\\
Die Änderung erfolgt durch das Zurücksetzen des eingelesenen Niederschlages um ein Niederschlagsintervall. Da die
Ausführung in der inp\_nied\_kz\_dat geschieht, gilt sie nach Änderung V03m1 für Kurz- und Langzeitsimulation.

\textbf{Definition der Korekturfaktoren Interflow (EP, 02.11.2003) (V03m4)}\\
Die Definition von m\_retlay in der Subroutine gebiet sind unlogisch, da m\_retlay bereits in der Subroutine
inp\_bod\_b definiert wird. Daher werden diese Zeilen auskommentiert. Ist der zusammengesetzte Korrekturfaktor
m\_retlay ($m\_retlay = xret \cdot retlay$) größer als 1, so wird dieser zu 1 gesetzt (Zeile if (m\_retlay(ilay,nb)
.gt. 1.) m\_retlay(ilay,nb) = 1. war zuvor versehentlich auskommentiert worden).

Wegen doppelter Definition Korrektur Interflow:\\
1: in Eingabedatei Bodentyp (boden.dat): xret (wird von Routine inp\_bod\_b gelesen), sollte nur 0 (kein Interflow in
Bodenschicht zulässig) oder 1 Interflow in Bodenschicht zulässig) sein.\\
2: in Eingabedatei Gebiet (*.geb): m\_retlay (wird von Routine gebiet gelesen). Diese ruft wiederum die Datei
inp\_bod\_b   auf. Beide Korrekturfaktoren werden multipliziert.\\
Problem: Korrekturfaktor-Interflow retlay darf nie größer 1 werden, da dieser Faktor multiplikativ auf das
Interflowvolumen wirkt. Die  Wasserverluste können dadurch so groß werden, dass die Bodenfeuchte negativ wird. Dann
wird in der Kurzzeitsimulation während der Abarbeitung jedes Hydrotops, jeder Bodenschicht eine Fehlermeldung
geschrieben. Daher in Bodendatei als Null oder 1 definieren und in Gebietsdatei niemals größer 1 setzen!

\textbf{Anzahl der Niederschlagswerte darf die Anzahl der Simulationszeitschritte überschreiten (???) (V03m6)}\\
In der Routine input wird die Sicherheitsabfrage so geändert, dass die Anzahl der Niederschlagswerte größer sein darf
als der Simulationszeitraum, aber nicht umgekehrt.\\
Vorher: (idif.ne.izaehl.or.ierr.gt.0)\\
Jetzt: (idif.gt.izaehl.or.ierr.gt.0)

\textbf{Einlesen der Niederschlagsstation für jedes Teilgebiet möglich (???) (V03m7)}\\
Es ist möglich, für jedes Teilgebiet die verwendete Niederschlagsstation anzeigen zu lassen. Dafür wurde Abfrage in
Gebietsdatei auskommentiert, die prüfte, ob für Station schon in einem anderen Teilgebiet vorgekommen ist.

\textbf{Mögliche Formate Eingabedatei Temperatur Verdunstung erweitert () (V03m8)}\\
Um eine bessere Komunikation mit dem DataCenter zu ermöglichen, ist es jetzt auch möglich die Zeitreihen für Temperatur
und Verdunstung in getrennten Dateien jeweils nach dem Ex2-Format einzulesen:\\
EX2-Format mit tt:mm:jjjj ss:mm Wert, Format(2(i2,1x),i4,1x,i2,1x,a)\\
Dies geschieht in der input\_nied.tv-Datei. Diese Datei hieß vorher input\_nied.lz. Die Aufrufe der Subroutine zum
Einlesen der Temperatur- und Verdunstung wurde von input\_nied.lz in inp\_nied.tv umbenannt. Die Eingabedateien müssen
aus der Gebietsdatei wie folgt aufgerufen werden:\\
xxxxx.tmp:yyyyy.verd (gleiche Zeile). Es ist auch noch möglich das alte TV-Format (Temperatur und Verdunstung in einer
Datei) zu verwenden.

\textbf{Änderungen um maximale Anzahl von Bodentypen und Landnutzungen zu erhöhen (SK, 21.10.2003) (V03m9)}\\
In Datei param.cmn wurden folgende Variablen geändert:\\
Idimnutz = 5000\\
Idimnutz2 = 100\\
Idimnutz3 = 100\\
In der Routine inp\_bod\_020.f90 wird die Abfrage nach der Bodentypenanzahl if(ityp .gt 50) auf if(ityp .gt idimnutz2)
geändert. Auch in der Variablendeklaration am Beginn der Subroutine, bei der Deklaration der Variablen für die
Bodenkennwerte, wird 50 auf idimnutz2 gesetzt.

\textbf{Änderung Synthetische Niederschläge (SK) (V03m10)}\\
Es soll ermöglicht werden, dass für jedes Teilgebiet eine Datei mit synthetischen Niederschlägen eingelesen werden
kann. In der Version 02 wurde der Name der Gebietsdatei aus der falstart.lst gelesen. Der Leseaufruf erfolgte aus der
Hauptroutine (call checkn). Bei Erreichen des Aufrufs call gebiet wurden dann keine unterschiedlichen
Niederschlagsdateinamen für einzelne Teilgebiete eingelesen. Änderungen in folgenden Routinen sind daher in Version 03
vorgenommen worden:
\begin{itemize}
    \item Routine bcena3 (später geänderte Bezeichnung: kalypso-na)
    \begin{itemize}
        \item Call checkn wurde auskommentiert.
        \item Bei dem Aufruf call Gebiet wurden zwei Parameter xjah und xwahl2 am Ende übergeben.
        \item Die Parameter pdsol (Dauer des Niederschlags) und pjsol (Jährlichkeit) werden durch die Parameter xjah und
              xwahl2 ersetzt.
    \end{itemize}
    \item Routine gebiet
    \begin{itemize}
        \item xjah und xwahl2 wurden als Real deklariert
        \item beim Aufruf call input werden die Parameter xjah und xwahl2 übergeben
    \end{itemize}
    \item Routine input
    \begin{itemize}
        \item xjah und xwahl2 wurden als Real deklariert
        \item an Marke 32 wird die Routine checkn aufgerufen, die in der Gebietsdatei auskommentiert wurde. Call checkn
    \end{itemize}
    \item Routine checkn wurde geändert
\end{itemize}

\textbf{Hydrotopfläche und Versiegelungsgrad wird nur aus der Hydrotopdatei übernommen (SK/CB) (V03m11)}\\
In Version 02 müssen Versiegelungsgrad und Hydrotopfläche in Gebietsdatei und Hydrotopdatei eingegeben werden. Zwischen
beiden erfolgte ein Abgleich. Um bei Änderungen in den Hydrotopflächen über die Kalypsooberfläche keine Redundanzen
berücksichtigen zu müssen, wird die Hydrotopfläche jetzt immer aus der Hydrotopdatei übernommen (siehe Routine gebiet)
und automatisch über das Objektmodell in die Gebietsdatei übertragen.

\textbf{Routine inp\_hydro Fehlermeldungen (EP) (V03m12)}\\
Fehlermeldungen  optimiert


\textbf{Herausgefundene Fehler durch Eingabedateien (EP) (V03m13)}
\begin{itemize}
    \item Aufteilungsfaktor Grundwasser/Tiefengrundwasser wird an zwei Stellen gesetzt. Es dürfen niemals beide ungleich
          1 gesetzt werden, da dann Fehler in Boden-Routine, die die Grundwasserroutine aufruft, auftritt.
    \begin{enumerate}
        \item Hydrotopdatei (Variable: m\_f1gws)
        \item Gebietsdatei (Variable: rtr)
    \end{enumerate}
    \item Korrekturfaktor banf in Gebietsdatei wird bei fehlendem Ordner lzsim als Startwert eingelesen
\end{itemize}

\textbf{Unit Hydrograph, Routine isov (EP, 05.06.03) (V03m13)}\\
Wenn  Retentionskonstanten sehr viel größer als der Simulationszeitraum sind, kann der Unit Hydrograph innerhalb des
Simulationszeitraums nicht abgearbeitet werden. Um dies zu vermeiden, wird der Unit Hydrograph in diesem Fall dann so
korrigiert, dass er auf alle innerhalb des Simulationszeitraums komplett abgearbeitet werden kann.\\
UH wird ungünstig verändert, wenn sehr hohe Retentionskonstanten. Hierdurch kann das Ergebnis von isov sehr stark von
der Dauer der Simulation (idif) abhängig werden. idif+ituh immer gleich idim. Das bedeutet, wenn idif klein ist, wird
ituh groß und umgekehrt. Bei großer Retentionskonstante wird der UH nicht vollständig im Zeitraum von ituh liegen, d.h.
der UH wird mit einem Korrekturfaktor multipliziert, so daß nach der Korrektur der UH auf den Wert 1.0 normiert ist.
Wenn ituh kurz ausfällt, aufgrund eines langen Simulationszeitraumes, dann wird die Korrektur größer ausfallen, als bei
kleinem Simulationszeitraum. Hierdurch entsteht eine größere Stauchung des UH bei langem Simulationszeitraum. Dies
führt zu dem paradoxen Ergebnis, daß bei langem Simulationszeitraum die durch isov gefaltete Ganglinie schneller
abläuft als bei kurzem Simulationszeitraum. Zur Vermeidung dieses Paradoxom wird ituh= idim gesetzt (Änderung von RS
wird rückgängig gemacht). In diesem Fall bleibt bei hohen Retentionskonstanten immer noch ein Einfluß der
Simulationszeit bestehen, allerdings wird der Widerspruch vermieden.

\subsection{Version 03 zu Version 2.0}
\textbf{Subroutine inp\_nied\_lz ersetzt (JH, 22.06.2004) (V2.0m1)}\\
Da die Übernahme der inp\_nied\_kz in die inp\_nied\_lz zu verschiedensten Problemen führte (Verschiebung der
Niederschläge Ein-/Ausgabe, Approximation (V03m1 Kommentar)), wurde die\\
inp\_nied\_lz überarbeitet und inp\_nied\_kz und inp\_nied\_kz\_dat zu einer neuen Subroutine\\
inp\_nied\_lz zusammengefügt. Es wird jetzt lediglich das grap-Format der Niederschlagsdatei Langzeit akzeptiert.\\
Die Niederschlagsdaten bleiben nach V03m3 um einen Tag zurück verschoben. Außerdem wurde der Fehler bei der Ausgabe der
Anzahl eingelesener Niederschlagswerte behoben (zuvor wurden hier unsinnige Angaben gemacht 369 o.ä.).

\textbf{Subroutine inp\_nied\_kz\_dat zurückgesetzt (JH, 22.06.2004) (V2.0m2)}\\
Da es eine eigenständige Subroutine zum Einlesen der Langzeitniederschläge im grap-Format gibt (inp\_nied\_lz, V2.0m1),
sind die Spezifikationen zum Langzeitniederschlag in der Subroutine inp\_nied\_kz\_dat nicht mehr notwendig. Aus diesem
Grund können die Änderungen V03m2 und V03m3 für die Kurzzeitsimulation in inp\_nied\_kz\_dat rückgängig gemacht werden.
Da Ausschließlich das grap-Format verwendet werden soll, werden die anderen Formate gelöscht, wobei beim Aufruf dieser
Formate durch den Benutzer eine Fehlermeldung erscheint.

$\Rightarrow$ Kommentar: JH, 28.06.2004\\
Es bleibt nicht geklärt, ob die Kurzzeitniederschläge je korrekt eingelesen wurden. Dies ist zu prüfen! Außerdem muss
überprüft werden in welcher Form die Kurzzeitniederschläge geschrieben werden, da es möglicherweise auch hier sinnvoll
ist die Werte um eine Intervall zurückzusetzten.

\subsection{Version 2.0 zu Version 2.0.1}
\textbf{Aufräumen (JH, 12.07.2004) (V2.0.1m1)}\\
Der Code wurde durch eine Analyse im Analyzer aufgeräumt. Es sind hierbei die überflüssigen Routinen outnas,
outarcview\_tg, qbm\_hws, isovtgw (durch isov ersetzt) und hydographt (durch hydograph ersetzt) gelöscht worden (im cvs
noch vorhanden bis zum 08.07.2004). Außerdem wurde der Fortran Standard und die Argumente mittels der Funktion Check
geprüft und verbessert/hergestellt. Die bei der Analyse auftretenden Hinweise zu nicht verwendeten Variablen wurden
(soweit dies möglich war) ebenfalls berücksichtigt und die entsprechenden Variablen gelöscht. Zusätzlich wurde eine
Umbenennung der Dateien vorgenommen (Versionsbezeichnung 03 entfernt).

\textbf{Anzahl der Anfangsbedingungen auf 100 erweitert (JH, 19.07.2004) (V2.0.1m2)}\\
Die Anzahl der möglichen Anfangsbedingungen in der *.konfig wurde auf 100 erweitert (vorher 15). Hierzu wurde der
Parameter idimanf im Common-Block param.cmn auf 100 gesetzt. Außerdem wurden in der Routine kalypso-na die
Fehlermeldungen bezüglich der maximalen Anzahl an Anfangsbedingungen optimiert.

\textbf{Verwirrung bezüglich bcena Benennungen aufgehoben (JH, 09.08.2004) (V2.0.1m3)}\\
Alle bcena Bezeichnungen wurden entfernt, bzw. durch KALYPSO-NA ersetzt. Außerdem wird beim Berechnungsstart ein
Hinweis zum Modell (Version, Autor...) ausgegeben (Bildschirm und output Dateien).

\subsection{Version 2.0.1 zu Version 2.0.2}
\textbf{Anfangswerte auch aus der Kurzzeitsimulation schreiben (JH, 24.-30.09.2004) (V2.0.2m1)}\\
Es können jetzt auch Anfangswerte aus einer Kurzzeitsimulation neu erzeugt werden. Hierbei waren folgende Änderungen
notwendig:
\begin{enumerate}
    \item Einlesevorgang aus *.konfig\\
          Die Daten der zu schreibenden Anfangswerte in der *.konfig wurden um die Angabe der Stunde erweitert. Format:
          yyyymmdd hh (i8,2x,i2). Falls diese nicht angegeben werden, so werden sie zu Null gesetzt. Änderung erfolgt
          beim Einlesen der Werte aus der *.konfig, kalypso-na.f90 Z. 1422 ff.
    \item Anfangswerte schreiben *.lzg\\
          Die Anfangsdaten werden in der Langzeitsimulation wie gewohnt geschrieben, jedoch hat sich das Format durch
          den Zusatz der Stunden bei der Datumsangabe geändert. In der Kurzzeitsimulation wird die *.lzg Datei jetzt
          auch geschrieben. Neues einheitliches Format der *.lzg-Datei:\\
          nanf(i1),nanfstd(i1),' h','    1',' qgs' \hspace{2cm} (i8,2x,i2,a2,a4,a4)')\\
          '1',qz(i) \hspace{2cm} (a4,f9.3)\\
          Die Variable nanfstd ist neu und stellt die Zeit in Stunden dar, zu der die jeweiligen Anfangswerte
          geschrieben werden sollen. In der Langzeitsimulation werden die Werte automatisch durch '00' ersetzt.
          Änderungen in kalypso-na.f90 Z. 1943 ff.
    \item Anfangswerte schreiben *.lzs\\
          Die Anfangsdaten werden in der Langzeitsimulation wie gewohnt geschrieben, jedoch hat sich das Format durch
          den Zusatz der Stunden bei der Datumsangabe geändert. In der Kurzzeitsimulation wird die *.lzs Datei jetzt
          auch geschrieben. Neues einheitliches Format der *.lzs-Datei:\\
          Grundwasser:\\
          nanf(ianf),nanfstd(ianf),' h','   1','gwsp' \hspace{2cm} (i8,2x,i2,a2,2x,a4,1x,a4)\\
          1,hgws(t),qb(t) \hspace{2cm} (i4,f9.2,f9.3)\\
          Boden:\\
          nanf(ianf),nanfstd(ianf),' h',anzelem,'bodf' \hspace{2cm} (i8,2x,i2,a2,2x,i4,1x,a4)\\
          nn,bi(nn),(bof(nn,ilay),ilay=1,anzlayy) \hspace{2cm} (i4,f7.2,10(f7.2))\\
          Schnee:\\
          nanf(ianf),nanfstd(ianf),' h','   1','snow' \hspace{2cm} (i8,2x,i2,a2,2x,a4,1x,a4)\\
          1,h(nt),ws(nt) \hspace{2cm} (i4,2(f9.2))\\
          Die Variable nanfstd ist neu und stellt die Zeit in Stunden dar, zu der die jeweiligen Anfangswerte
          geschrieben werden sollen. In der Langzeitsimulation werden die Werte automatisch durch '00' ersetzt.
          Änderungen in boden.f90 Z.1072ff., snow.f90 Z. 218 ff..
          Das Öffnen der *.lzs Dateien wurde ín der Kurzzeitsimulation hinzugefügt (gebiet.f90 Z. 347ff.).
    \item Anfangswerte einlesen *.lzg\\
          Die Routine inp\_anf\_gerinne.f90 wurde so angepasst, dass das neue Format aus der *.lzg Datei gelesen werden
          kann. Um alte Modelle aufrecht zu erhalten, ist es weiterhin ohne weitere Angaben möglich die Anfangswerte
          im alten Format einzulesen (Das Programm \glqq merkt \grqq selbst, um welches Format es sich handelt).
    \item Anfangswerte einlesen *.lzs\\
          Die Routine inp\_anf.f90 wurde so angepasst, dass das neue Format aus der *.lzs Datei gelesen werden
          kann. Um alte Modelle aufrecht zu erhalten, ist es weiterhin ohne weitere Angaben möglich die Anfangswerte
          im alten Format einzulesen (Das Programm \glqq merkt\grqq  selbst, um welches Format es sich handelt).
\end{enumerate}

\textbf{Formatänderung- Darstellung Bodenfeuchte im GraphicTool (SK, 21.10.2004) (V2.0.2m2)}\\
Die Bodenfeuchte (Datei bof.dat, Kanalnummer nbof) konnte aufgrund der nicht Formatkonformen Ausgabe nicht mit dem
GraficTool angezeigt werden. Aus diesem Grund wurde das Ausgabeformat dem Blockformat angepasst. Es kann jedoch
trotzdem nur das erste Hydrotop angezeigt werden.(boden.f90 Z. 1367ff.)

\textbf{Faltung des Interflows mit ZFT anstelle des Parallelspeichers bei Berechnung mit Hydrotopen (SK, 21.10.2004) (V2.0.2m3)}\\
Der Interflow wird im Gebietsbearbeitungsfall ispk=7 (Hydrotope) mit der Zeitflächenfunktion (identisch zum
Oberflächenabflusses) gefaltet. Bei der Berechnung alter Modelle werden aus diesem Grund abweichungen in den
Ergebnissen vorhanden sein!(gebiet.f90 Z. 712ff.)

\textbf{Fehler in der Berechnung des CIN- und CEX-Wertes behoben (SK, EP, 21.10.2004) (V2.0.2m4)}\\
Der schon am 03.11.2003 festgestellte Fehler in der Berechnung des CIN und CEX-Wertes wurde jetzt endgültig behoben und
in die aktuelle Berechnungsroutine eingefügt.\\
Zur Erinnerung des festgestellten Fehlers:\\
Beide Parameter wurden bislang in der Einheit [mm/dm/h] gefuehrt. In der Subroutine bodf\_n.f90 werden diese beiden
Parameter, die dort cin und cex heißen in der Einheit [mm/h] erwartet. Der Fehler liegt darin, dass xbfm (max.
Bodenfeuchte) nur in der Einheit mm je dm Schichtdicke definiert ist. Diese Groesse muss daher noch mit der
tatsächlichen Schichtdicke multipliziert werden.

Da diese Änderung weitreichende Auswirkung auf das Berechnungsergebnis hat, gibt es Inkonsistenzen für alte geeichte
Modelle. Daher muss bei einer Berechnung alter Modelle an der alten, wenn auch fehlerhaften Definition von xcin und
xcex festgehalten werden. Bei alten Modellanwendungen also unbedingt an diese Umstellung denken!!! (inp\_bod\_b.f90 Z.
221ff.)

\textbf{Format der Ausgabendateien geändert (JH, SK, 11.11.2004) (V2.0.2m5)}\\
Für die Ausführung mehrerer Berechnungen hintereinander wird die Bezeichnung der Ausgabedateien wieder mit dem
Anfangsdatum versehen. Die Endung .dat bleibt erhalten (z.B. 940313\_qgg.dat), die Änderungen von AG 18.08.02 werden
teilweise zurückgenommen. Außerdem werden für einige Dateien die Kopfzeilen im Fall von synthetischen Niederschlägen
angepasst. (kalypso-na.f90 Z. 790ff.)

\subsection{Version 2.0.2 zu Version 2.0.3}
\textbf{Anzahl der Zuflusszeitreihenwerte bei Kurzzeit auf 5000 erhöht  (JH 22.05.2005) (V2.0.3m1)}\\
Liegt die Zuflusszeitreihe (Knoten zu Knoten Beziehung) im Grap-Format vor (Fall 5 in der
Netzdatei), so wird die Zeitreihe bei einer Kurzzeitsimulation mit der Subroutine
inp\_peg\_kz eingelesen. Hier wurde die mögliche Anzahl an Datenpaaren auf 5000 erhöht
(zuvor 1500), um den Simulationszeitraum bei Kurzzeitsimulation zu verlängern (bei 5min
sind ca. 17 Tage möglich). (inp\_peg\_kz.f90 Z. 63)

\textbf{Bugfix: Inhalt Interzeptionsspeicher bei Hydrotopberechnung (JH, AvD 17.08.2005) (V2.0.3m2)}\\
Bei der Berechnung des Inhaltes des Interzeptionsspeichers wurde der Inhalt nicht richtig
initialisiert (es wurde immer der Wert des zuvor berechneten Hydrotopes als Anfangsinhalt
verwendet). In der Routine incept wurde die Initialisierung der Variablen bianf angepasst
und diese als Anfangswert verwendet. In der aufrufenden Routine boden wird die Variable
bianf als Liste in die Variable bi(nn) geschrieben, welche immer Hydrotopbezogen den
Inhalt des Interzeptionsspeicher vorhält. (incept.f90)

\textbf{Bugfix: ianz deklariert (JH, AvD 17.08.2005) (V2.0.3m3)}\\
In der Subroutine gebiet war die Variable ianz nicht deklariert. Diese wurde als Integer
deklariert. (gebiet.f90 Z. 134)

\subsection{Version 2.0.3 zu Version 2.0.4}
\textbf{Einführung des Aufteilungsfaktors pro Abfluss  (JH 02.02.2006) (V2.0.4m1)}\\
Die Berechnung der Kalinin-Miljukov Parameter wird jetzt auf Basis der km-Dateien in
Kalypso Enterprise durchgeführt. In diesem Zuge der Umstellung wurde ein
abflussabhängiger Aufteilungsfaktor Fluss-Vorland eingefügt. Außerdem entfällt die Angabe
des bordvollen Abflusses in der Kopfzeile jedes KM-Stranges in der Gerinnedatei, da jetzt
auch Stränge berechnet werden können, welche den bordvollen Abfluss nie erreichen
(Änderung der Einleseroutine intrsp.f90). Die Berechnung der Abflussanteile anhand des
Aufteilungsfaktors wurde korregiert, da die alte Berechnung abhängig vom Bordvollen
Abfluss war und der Aufteilungsfaktor falsch verwendet wurde. Alte
Berechnung:$q_{Vorland}=(q-qfmax)\cdot(1-c)$. Neue Berechnung $q_{Vorland}=(q)\cdot(1-c)$
(gerinne.f90 Z.206ff.). Kommentar: Der Unterschied in der Berechnung ist beim Kollau
Modell verschwindend klein (jedoch sind hier die KM Parameter auch kalibriert und der
Bordvolle Abfluss meist nicht erreicht).

\subsection{Version 2.0.4 zu Version 2.0.5}
Die Änderungen betreffen die Einführung von Mulden Rigolen (CK) und sind daher sehr
großräumig angelegt.
\textbf{Format der Hydrotopdaten  (CK 19.04.2006) (V2.0.5m1)}\\
Die Hydrotopdaten werden jetzt formatfrei eingelesen und die nicht verwendeten Parameter
(x1, x2, x3, m\_hbod) wurden aus der Einleseroutine entfernt. Jetztiges Format:...
(inp\_hydro.f90)

\textbf{neue Module  (CK 19.04.2006) (V2.0.5m2)}\\
Es wurden die Module LOG\_FILE, NAConstants, ANF\_CONS und Physical\_CONS erstellt, um
hier die allgemeinen Parameter zu definieren. Das Modul LOG\_File dient zur Ausdabe des
Debug Log-Files. Dieses Log-File ist neu und wird nur im Debug ausgeführt (Parameter in
LOG\_File).

\textbf{Umstellung der Grundwasserberechnung (CK 19.04.2006) (V2.0.5m3)}\\
Die grundwasserberechnung erfolgt jetzt in einer eigenen Routine  auf Basis der
Teilgebiete (der Teil wurde vollständig aus der Routine boden herausgelöst). Die neue
Routine hat den namen gwsp (welches nichts mit der vorhandenen Routine zu tun hat - d.h.
die alte gwsp Routine wurde gelöscht, da diese nicht mehr verwendet wurde).

\textbf{Ispk=7 (CK 19.04.2006) (V2.0.5m4)}\\
Im Code wird nurnoch der Gebietsbearbeitungfall ispk=7 unterstützt (Berechnung auf Basis
von hydrotopen).

\textbf{Berechnung der Evaporation in neuer Methode (CK 19.04.2006) (V2.0.5m5)}\\
Die Evaporation wird in der neuen Methode evapot durchgeführt.

\textbf{Mulden Rigolen (CK 19.04.2006) (V2.0.5m6)}\\
Die Berechnung der Mulden Rigolen erfolgt in der Routine qmr, welche neu hinzugefügt
wurde und ähnlich zur bodenroutine funktioniert. Zum Einlesen der Mulden Rigolen Angaben
in der Datei *.mr ist die neue Routine inp\_mrs erstellt. Die Ausgabe der Ergebnisse
(Muldenrigolenabfluss) erfolgt in der Datei ...qmr.dat. Hierzu wurde die Ausgabedatei in
der Konfiguration hinter der Evapotranspiration eingefügt. Die Mulden Rigolen Berechnung
funktioniert, wurde jedoch noch nicht ausreichend getestet.

\subsection{Version 2.0.5 zu Version 2.0.6}
Die Änderungen betreffen die Einführung von Mulden Rigolen (CK) und sind daher sehr
großräumig angelegt.
\textbf{Einführung des Loggers  (JH) (V2.0.6m1)}\\
Zur besseren fehlerausgabe für das User Interface wurde ein Interface implementiert,
welches die Fehlermeldungen als XML Datei ablegt. Die Änderungen beziehen sich somit auf
alle im Code vorhandenen Fehlermeldungen (die alten write statements wurden nicht
entfernt). (logger.f90)

\textbf{Änderung der Kalinin Miljukov Parameter  (JH 19.01.2007) (V2.0.6m1)}\\
Es ist nicht mehr erforderlich ,dass der 3te Abfluss der bordvolle Abfluss ist. Die
Abgrenzung Fluss- Vorland erfolgt anhand des Aufteilungsfaktors alpha. (gerinne.f90)


\subsection{Version 2.0.6 zu Version 2.0.7}
Die Änderungen betreffen die Einführung von van genuchten Parametern und Makroporen (KV)
und sind daher sehr großräumig angelegt.

\subsection{Version 2.0.7 zu Version 2.0.8}
Die Änderungen betreffen hauptsächlich die Umstellung auf den g95 Compiler, sowie
allgemeines Aufräumen des Codes. Um den Code übersichtlicher zu gestalten wurden viel
nicht verwendete Coderudimente entfernt. Dies beinhaltet, dass lediglich noch die von dem
User Interface verwendeten Formate unterstützt werden!
\textbf{Grap Format eingeschränkt  (JN 14.06.2007) (V2.0.7m1)}\\
Das grap Format für die Kurzzeitniederschläge wird lediglich in der von der GUI
verwendeten Form berücksichtigt. Die Variablen ianz, fl, dtc, inum werden
im Format nicht benötigt und daher auch nicht mehr gelesen.
\begin{verbatim}
Kommentartext
       198001010000   0  0.      0.
grap
28.03.1997 07:09:00 0
28.03.1997 07:10:00 0.1
28.03.1997 07:29:00 0
28.03.1997 07:30:00 0
\end{verbatim}
(inp\_nied\_kz\_dat.f90)

\subsection{Version 2.0.8 zu Version 2.1.0}
Es handelt sich um die Zusammenführung der Version 2.0.8 mit den Programmierungen
von Christoph Küpferle zur Berechnung der Mulden-Rigolen. Bei Vorliegen einer *.mr Datei Werden
Mulden-Rigolen berechnet. Die Bodendatei benötigt zwei parameter vmacro und r, die für die van Genuchten Berechnung 
von Karolina gebraucht werden. 


\begin{verbatim}
Kommentartext
Kommentartext: TG-Nummer
Kommentartext: Fläche[m^2]  Nutzung  Bodenprofil  max.Perk[mm/d] Zufluss-GW[%]   
Kommentartext: TG-Nummer	Anzahl Elemente
Kommentartext: Hydrotop-ID d-Dränrohr[mm] kf-Dränrohr[mm/d] Gefälle-Dränrohr
[prommille] Rahigkeit-Drän [mm] Muldenbreite[m]	entwä. Knoten
4500
580. MRS_N mrs 2.8E-8 1.0
200. 4270. 0.003 2. 1.8 0
\end{verbatim}

\begin{verbatim}
Typ       Tiefe[dm] vmacro r
mrs          4
mulde   3.0 0.0 0.00 0.00
filter  3.0 0.0 0.00 0.00
mSfsld2 7.0 0.0 0.00 0.00
mSfsld2 1.0 0.0 0.00 0.00
mS-Sl2_3     2
Hnz4SV3  8.0 0.0 0.00 0.00
mS-Sl22  10.0 0.0 0.00 0.00
\end{verbatim}