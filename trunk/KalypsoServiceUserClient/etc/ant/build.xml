<?xml version="1.0" encoding="ISO-8859-1"?>
<project name="KalypsoServiceUserClient" default="fake" basedir=".">

	<property name="project" value="${workspace}/KalypsoServiceUserClient" />
	<property name="project-name" value="KalypsoServiceUserClient" />
    <property file="service.properties" />
	
	<import file="${workspace}/KalypsoServiceCore/etc/ant/service-build.xml"/>

	<path id="deploy.classpath">
		<fileset dir="${project.lib}" includes="**/*.jar"/>

		<fileset dir="${workspace}/KalypsoServiceCore/build/deploy" includes="**/*.jar" />
		
	    <fileset dir="${workspace}/JavaApiContributions/build/deploy" includes="**/*.jar" />
		<fileset dir="${workspace}/KalypsoCommons/build/deploy" includes="**/*.jar" />
		<fileset dir="${workspace}/KalypsoCore/build/deploy" includes="**/*.jar" />
		<fileset dir="${workspace}/KalypsoAuth/build/deploy" includes="**/*.jar" />
		<fileset dir="${workspace}/KalypsoServiceUser/build/deploy" includes="**/*.jar" />
	</path>

	<!-- 
		Description: currently only support for generating the service-proxies
		is provided.
	
		* proxy-services
		
		When the service interface of a service changes, there is
		a builder (configured for this Project) that 
		calls the corresponding target from this build file in order
		to generate the proxy-jar needed to comminucate with the
		web service (jaxrpc).

		Some of the service-proxies depend on core-projects such as
		KalypsoCore, etc. In order to take care of these
		dependencies there's the target 'build-core' which builds
		all of them.
	-->
	
	<target name="fake" description="fake target, does nothing">
	</target>
    
    <target name="clean">
    	<ant antfile="${workspace}/KalypsoBuild/central-build/build-core.xml" target="clean" inheritAll="false" />
    </target>

    <target name="build-core" depends="clean">
		<echo message="Builds the most common project (needed for dependency from services projects)"/>
		
		<ant antfile="${workspace}/KalypsoBuild/central-build/build-core.xml" target="build-core" inheritAll="false" />
    	
    	<!-- why? we just have a projekt dependency instead -->
	  	<!--copy file="${workspace}/KalypsoServiceCore/build/deploy/KalypsoServiceCore.jar" todir="${workspace}/KalypsoServiceUserClient/lib" overwrite="true"/-->
	</target>
	
	<target name="proxy-UserService" depends="build-core">
		<echo message="Proxy the user service and copy the client jar"/>

		<antcall target="generate-proxy" inheritall="false"/>
	</target>
	
</project>
