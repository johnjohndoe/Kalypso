<Workflow URI="org.kalypso.model.rrm.WF_KalypsoHydrology" xmlns="http://www.renew.de/workflow/base" xmlns:con="http://www.renew.de/workflow/contexts" defaultTask="org.kalypso.model.rrm.timeseriesManagement">
  <Help>NONE</Help>
  <Name>KalypsoHydrology-Workflow</Name>

  <Task URI="org.kalypso.model.rrm.timeseriesManagement" context="TimeseriesManagementContext"/>

  <TaskGroup URI="org.kalypso.model.rrm.parameterDefinition">
    <Task URI="org.kalypso.model.rrm.snowDefinition" context="ParameterDefinition_Snow" />
    <Task URI="org.kalypso.model.rrm.soilDefinition" context="ParameterDefinition_Soil" />
    <Task URI="org.kalypso.model.rrm.landuseDefinition" context="ParameterDefinition_Landuse" />
  </TaskGroup>

  <TaskGroup URI="org.kalypso.model.rrm.modelConstruction">
    <Task URI="org.kalypso.model.rrm.editNetElements" context="EditNetElements_extContext1" />
    <Task URI="org.kalypso.model.rrm.editNetRelations" context="EditNetRelationsContext" />
    <Task URI="org.kalypso.model.rrm.hydrotopes" context="EditHydrotopesContext_mapInput" />
    <Task URI="org.kalypso.model.rrm.completeNetElements" context="CompleteNetElements_extContext1" />
  </TaskGroup>

  <Task URI="org.kalypso.model.rrm.catchmentModels" context="CatchmentModelsContext"/>

  <Task URI="org.kalypso.model.rrm.simulationManagement" context="SimulationManagementContext"/>

  <Perspectives>
    <con:PerspectiveContext id="ContextHydrology" perspectiveId="org.kalypso.kalypso1d2d.pjt.perspective.Perspective">

      <!-- Timeseries Management -->
      <con:WorkbenchSiteContext id="TimeseriesManagementContext" parent="ContextHydrology">
        <con:ViewContext id="TimeseriesManagementView" partId="org.kalypso.ui.rrm.internal.timeseries.view.TimeseriesManagementView" parent="TimeseriesManagementContext" />
        <con:ViewContext id="TimeseriesPropertiesView" partId="org.kalypso.ui.rrm.internal.utils.featureTree.TreePropertiesView" parent="TimeseriesManagementContext" />
        <con:ViewContext id="TimeseriesDiagramView" partId="org.kalypso.ui.rrm.internal.diagram.RrmDiagramView" parent="TimeseriesManagementContext" />
      </con:WorkbenchSiteContext>

      <!-- Parameter Definitions -->
      <con:WorkbenchSiteContext id="ParameterDefinition_Snow" parent="ContextHydrology">
        <con:ViewContext id="ParameterDefinition_Snow_GttView" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart" parent="EditNetElementsContext" />
        <con:ViewContext id="ParameterDefinition_Snow_FeatureView" partId="org.kalypso.featureview.views.FeatureView" parent="EditNetElementsContext" />
      </con:WorkbenchSiteContext>

      <con:WorkbenchSiteContext id="ParameterDefinition_Soil" parent="ContextHydrology">
        <con:ViewContext id="ParameterDefinition_Soil_GttView_Layers" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart:Layers" parent="ParameterDefinition_Soil" />
        <con:ViewContext id="ParameterDefinition_Soil_GttView_Profiles" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart:Profiles" parent="ParameterDefinition_Soil" />
        
        <con:ViewContext id="ParameterDefinition_Soil_FeatureView" partId="org.kalypso.featureview.views.FeatureView" parent="ParameterDefinition_Soil" />
      </con:WorkbenchSiteContext>

      <con:WorkbenchSiteContext id="ParameterDefinition_Landuse" parent="ContextHydrology">
        <con:ViewContext id="ParameterDefinition_Landuse_GttView_Sealing" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart:Sealing" parent="ParameterDefinition_Landuse" />
        <con:ViewContext id="ParameterDefinition_Landuse_GttView_SeasonalCycle" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart:SeasonalCycle" parent="ParameterDefinition_Landuse" />
        <con:ViewContext id="ParameterDefinition_Landuse_GttView_LanduseGroups" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart:LanduseGroups" parent="ParameterDefinition_Landuse" />
        
        <con:ViewContext id="ParameterDefinition_Landuse_FeatureView" partId="org.kalypso.featureview.views.FeatureView" parent="ParameterDefinition_Landuse" />
      </con:WorkbenchSiteContext>

      <!--  Model construction -->
      <con:WorkbenchSiteContext id="EditNetElementsContext" parent="ContextHydrology">
        <con:ViewContext id="EditNetElements_MapOutlineView" partId="org.kalypso.ui.views.outline" parent="EditNetElementsContext" />
        <con:ViewContext id="EditNetElements_MapView" partId="org.kalypso.ui.views.mapView" parent="EditNetElementsContext">
          <con:ExtensionContext id="EditNetElements_extContext1" parent="EditNetElements_MapView" handlerFactoryId="kalypsoContextHandlerFactory">
            <con:Parameter name="type" value="mapViewInputContext" />
            <con:Parameter name="input" value=".views/Overview.gmt" />
          </con:ExtensionContext>
        </con:ViewContext>
        <con:ViewContext id="EditNetElements_GttView_Nodes" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart:Nodes" parent="EditNetElementsContext" />
        <con:ViewContext id="EditNetElements_GttView_Channels" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart:Channels" parent="EditNetElementsContext" />
        <con:ViewContext id="EditNetElements_GttView_Catchments" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart:Catchments" parent="EditNetElementsContext" />

        <con:ViewContext id="EditNetElements_FeatureView" partId="org.kalypso.featureview.views.FeatureView" parent="EditNetElementsContext" />

      </con:WorkbenchSiteContext>

      <con:WorkbenchSiteContext id="MapContextWithWidgetView" parent="ContextHydrology">
        <con:ViewContext id="MapOutlineView2" partId="org.kalypso.ui.views.outline" parent="MapContextWithWidgetView" />
        <con:ViewContext id="MapView2" partId="org.kalypso.ui.views.mapView" parent="MapContextWithWidgetView" />
        <con:ViewContext id="MapWidgetView" partId="org.kalypso.ui.editor.mapeditor.views.ActionOptionsView" parent="MapContextWithWidgetView">
          <con:ExtensionContext id="EditNetRelationsContext" parent="MapWidgetView" handlerFactoryId="kalypsoContextHandlerFactory">
            <con:Parameter name="type" value="mapViewInputContext" />
            <con:Parameter name="input" value=".views/ModelNet.gmt" />
          </con:ExtensionContext>
        </con:ViewContext>
      </con:WorkbenchSiteContext>

      <con:WorkbenchSiteContext id="EditHydrotopesContext" parent="ContextHydrology">
        <con:ViewContext id="EditHydrotopesContext_MapOutlineView" partId="org.kalypso.ui.views.outline" parent="EditHydrotopesContext" />
        <con:ViewContext id="EditHydrotopesContext_MapView" partId="org.kalypso.ui.views.mapView" parent="EditHydrotopesContext">
          <con:ExtensionContext id="EditHydrotopesContext_mapInput" parent="EditHydrotopesContext_MapView" handlerFactoryId="kalypsoContextHandlerFactory">
            <con:Parameter name="type" value="mapViewInputContext" />
            <con:Parameter name="input" value=".views/Hydrotopes.gmt" />
          </con:ExtensionContext>
        </con:ViewContext>
      
        <con:ViewContext id="EditHydrotopesContext_GttView_Catchments" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart:Catchments" parent="EditHydrotopesContext" />
        <con:ViewContext id="EditHydrotopesContext_GttView_Landuse" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart:Landuse" parent="EditHydrotopesContext" />
        <con:ViewContext id="EditHydrotopesContext_GttView_Geologie" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart:Geologie" parent="EditHydrotopesContext" />
        <con:ViewContext id="EditHydrotopesContext_GttView_Pedologie" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart:Pedologie" parent="EditHydrotopesContext" />
        <con:ViewContext id="EditHydrotopesContext_GttView_Hydrotopes" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart:Hydrotopes" parent="EditHydrotopesContext" />
        
        <con:ViewContext id="EditHydrotopesContext_FeatureView" partId="org.kalypso.featureview.views.FeatureView" parent="EditHydrotopesContext" />
      </con:WorkbenchSiteContext>

      <con:WorkbenchSiteContext id="CompleteNetElements" parent="ContextHydrology">
        <con:ViewContext id="CompleteNetElements_MapOutlineView" partId="org.kalypso.ui.views.outline" parent="CompleteNetElements" />
        <con:ViewContext id="CompleteNetElements_MapView" partId="org.kalypso.ui.views.mapView" parent="CompleteNetElements">
          <con:ExtensionContext id="CompleteNetElements_extContext1" parent="CompleteNetElements_MapView" handlerFactoryId="kalypsoContextHandlerFactory">
            <con:Parameter name="type" value="mapViewInputContext" />
            <con:Parameter name="input" value=".views/Overview.gmt" />
          </con:ExtensionContext>
        </con:ViewContext>
        <con:ViewContext id="CompleteNetElements_GttView_KMChannels" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart:KMChannels" parent="CompleteNetElements" />
        <con:ViewContext id="CompleteNetElements_GttView_StorageChannels" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart:StorageChannels" parent="CompleteNetElements" />
        <con:ViewContext id="CompleteNetElements_GttView_Catchments" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart:Catchments" parent="CompleteNetElements" />

        <con:ViewContext id="CompleteNetElements_FeatureView" partId="org.kalypso.featureview.views.FeatureView" parent="CompleteNetElements" />

      </con:WorkbenchSiteContext>

      <!-- Catchment Model Management -->
      <con:WorkbenchSiteContext id="CatchmentModelsContext" parent="ContextHydrology">
        <con:ViewContext id="CatchmentModelsView" partId="org.kalypso.ui.rrm.internal.cm.view.CatchmentModelsView" parent="CatchmentModelsContext" />
        <con:ViewContext id="CatchmentModelsPropertiesView" partId="org.kalypso.ui.rrm.internal.utils.featureTree.TreePropertiesView" parent="CatchmentModelsContext" />
      </con:WorkbenchSiteContext>

      <!-- Simulation Management -->
      <con:WorkbenchSiteContext id="SimulationManagementContext" parent="ContextHydrology">
        <con:ViewContext id="GttView" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart" parent="ContextHydrology" />
      </con:WorkbenchSiteContext>

    </con:PerspectiveContext>
  </Perspectives>
</Workflow>