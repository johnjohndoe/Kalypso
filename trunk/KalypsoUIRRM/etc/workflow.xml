<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Workflow URI="org.kalypso.model.rrm.WF_KalypsoHydrology" xmlns="http://www.renew.de/workflow/base" xmlns:con="http://www.renew.de/workflow/contexts" defaultTask="org.kalypso.model.rrm.timeseriesManagement">
  <Help>NONE</Help>
  <Name>KalypsoHydrology-Workflow</Name>

  <Task URI="org.kalypso.model.rrm.timeseriesManagement" context="TimeseriesManagementContext">
    <Help>%timeseriesManagement_help</Help>
    <Name>%timeseriesManagement</Name>
  </Task>

  <TaskGroup URI="org.kalypso.model.rrm.modelConstruction">
    <Help>%modelConstruction_help</Help>
    <Name>%modelConstruction</Name>
    <Task URI="org.kalypso.model.rrm.editNetRelations" context="EditNetRelationsContext">
      <Help>%editNetRelations_help</Help>
      <Name>%editNetRelations</Name>
    </Task>
  </TaskGroup>

  <Task URI="org.kalypso.model.rrm.catchmentModels" context="CatchmentModelsContext">
    <Help>%catchmentModels_help</Help>
    <Name>%catchmentModels</Name>
  </Task>

  <Task URI="org.kalypso.model.rrm.simulationManagement" context="SimulationManagementContext">
    <Help>%simulationManagement_help</Help>
    <Name>%simulationManagement</Name>
  </Task>

  <Perspectives>
    <con:PerspectiveContext id="ContextHydrology" perspectiveId="org.kalypso.kalypso1d2d.pjt.perspective.Perspective">


      <con:WorkbenchSiteContext id="TimeseriesManagementContext" parent="ContextHydrology">
        <con:ViewContext id="TimeseriesManagementView" partId="org.kalypso.ui.rrm.internal.timeseries.view.TimeseriesManagementView" parent="TimeseriesManagementContext" />
        <con:ViewContext id="TimeseriesPropertiesView" partId="org.kalypso.ui.rrm.internal.utils.featureTree.TreePropertiesView" parent="TimeseriesManagementContext" />
        <con:ViewContext id="TimeseriesDiagramView" partId="org.kalypso.ui.rrm.internal.diagram.RrmDiagramView" parent="TimeseriesManagementContext" />
      </con:WorkbenchSiteContext>

      <con:WorkbenchSiteContext id="CatchmentModelsContext" parent="ContextHydrology">
        <con:ViewContext id="CatchmentModelsView" partId="org.kalypso.ui.rrm.internal.cm.view.CatchmentModelsView" parent="CatchmentModelsContext" />
        <con:ViewContext id="CatchmentModelsPropertiesView" partId="org.kalypso.ui.rrm.internal.utils.featureTree.TreePropertiesView" parent="CatchmentModelsContext" />
      </con:WorkbenchSiteContext>

      <con:WorkbenchSiteContext id="SimulationManagementContext" parent="ContextHydrology">
        <con:ViewContext id="GttView" partId="org.kalypso.ui.editor.gistableeditor.GttViewPart" parent="ContextHydrology" />
      </con:WorkbenchSiteContext>

      <con:WorkbenchSiteContext id="MapContext" parent="ContextHydrology">
        <con:ViewContext id="MapOutlineView" partId="org.kalypso.ui.views.outline" parent="MapContext" />
        <con:ViewContext id="MapView" partId="org.kalypso.ui.views.mapView" parent="MapContext">

          <con:ExtensionContext id="OverviewMap" parent="MapContext" handlerFactoryId="kalypsoContextHandlerFactory">
            <con:Parameter name="type" value="mapViewInputContext" />
            <con:Parameter name="input" value=".views/Overview.gmt" />
          </con:ExtensionContext>
        </con:ViewContext>

      </con:WorkbenchSiteContext>

      <con:WorkbenchSiteContext id="MapContextWithWidgetView" parent="ContextHydrology">
        <con:ViewContext id="MapOutlineView2" partId="org.kalypso.ui.views.outline" parent="MapContextWithWidgetView" />
        <con:ViewContext id="MapView2" partId="org.kalypso.ui.views.mapView" parent="MapContextWithWidgetView" />
        <con:ViewContext id="MapWidgetView" partId="org.kalypso.ui.editor.mapeditor.views.ActionOptionsView" parent="MapContextWithWidgetView">

          <con:ExtensionContext id="EditNetRelationsContext" parent="MapWidgetView" handlerFactoryId="kalypsoContextHandlerFactory">

            <con:Parameter name="type" value="mapViewInputContext" />
            <con:Parameter name="input" value=".views/ModelNet.gmt" />

            <!-- TODO: map tools view; activate edit relation widget -->
          </con:ExtensionContext>

        </con:ViewContext>

      </con:WorkbenchSiteContext>

    </con:PerspectiveContext>
  </Perspectives>
</Workflow>